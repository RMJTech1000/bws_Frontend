@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    .btn {
        position: relative;
        padding: 8px 10px;
    }

    .btndrop {
        width: 100%;
    }

    .dropdown-toggle:after {
        margin-left: 5.255em !important;
    }

    .rightbox .form-group {
        padding-bottom: 0;
    }

    .slotbox .form-group .form-control {
        height: 27px;
    }

    .slotbox .form-group select.form-control {
        height: 27px;
    }
</style>
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css" rel="stylesheet">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.full.min.js"></script>
<script type="text/javascript">

    LayoutApp.controller('MyController', function ($scope, $http, $timeout) {

        $('#overlay').fadeIn().delay(100).fadeOut();

        $(document).ready(function () {
            $('.my-select').select2({
                placeholder: "--Select--",
                allowClear: true,
                width: '100%'
            });
        });


        $scope.VendorMasterAllvalues = null;
        $scope.fillVendorMasterValues = function () {

            $http({
                method: 'POST',
                url: '/api/VendorApi/InvVendorCustomerMaster/',
                data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.VendorMasterAllvalues = result.data;



                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillVendorMasterValues();

        $scope.CurrencyValue = null;
        $scope.fillCurrencyValues = function () {
            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/CurrencyValues/',
                data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.CurrencyValue = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillCurrencyValues();

        $scope.ChargeCodeAllvalues = null;
        $scope.fillChargecodeValues = function () {
            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/ChargeCode/',
                data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.ChargeCodeAllvalues = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillChargecodeValues();

        $scope.CntrTypesvalues = null;
        $scope.fillCntrTypeValues = function () {
            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/CntrTypeValues/',
                data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.CntrTypesvalues = result.data;


                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillCntrTypeValues();

        $scope.PortAllvalues = null;
        $scope.fillPortsValues = function () {
            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/PortValues/',
                data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.PortAllvalues = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillPortsValues();

        $scope.VesselMasterAllvalues = null;
        $scope.fillVesselMasterValues = function () {

            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/VesselMaster/',
                data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.VesselMasterAllvalues = result.data;



                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillVesselMasterValues();



        $scope.DynamicGrid = [{
            TID: "", VesselName: "", VesselID: "", VoyageName: "", VoyageID: "", PortName: "", PortID: "",
            ContainerNo: "", CntrType: "", CntrTypeID: "", BLNo: "", ChargeCodeID:"",ChargeCodeName:"", Currency: "", CurrencyID:"",TariffAmt:"",Percentage:"",Tax:"",Status:"",ErrorLog: ""
        }];
        $scope.DynamicGrid.splice(0, 1);


        $scope.VoyageValueAll = null;
        $("#ddlVessel").change(function ()
        {

            var Datavalue = {};
            Datavalue.VesID = $("#ddlVessel").val();
            $http({
                method: 'POST',
                url: '/api/VendorApi/VoyageDetails/',
                data: JSON.stringify(Datavalue)
            }).then(function (result) {
                $timeout(function () {
                    $scope.VoyageValueAll = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });

        });



        $(document).ready(function () {
            var queryString = new Array();
            if (window.location.search.split('?').length > 1) {
                var params = window.location.search.split('?')[1].split('&');
                for (var i = 0; i < params.length; i++) {
                    var key = params[i].split('=')[0];
                    var value = decodeURIComponent(params[i].split('=')[1]);
                    queryString[key] = value;
                }
            }

            if (queryString["RegID"] != null) {

                $scope.RegId = queryString["RegID"].toString();
                $scope.ExistingBLValues(queryString["RegID"].toString());
                $scope.FilExistingDetails(queryString["RegID"].toString());
            }
           
        });



        $scope.AddRecord = function (DynamicGrid) {
            var validation = "";

            var ddlVessel = $('#ddlVessel').val();
            if (ddlVessel == "?") {
                validation += "<span style='color:red;'>*</span> <span>Please Select Vessel</span></br>"
            }

            var ddlVoyage = $('#ddlVoyage').val();
            if (ddlVoyage == "?") {
                validation += "<span style='color:red;'>*</span> <span>Please Select Voyage</span></br>"
            }
            var ddlPOL = $('#ddlPOL').val();
            if (ddlPOL == "?") {
                validation += "<span style='color:red;'>*</span> <span>Please Select Port of Loading</span></br>"
            }

            var txtBLNumber = $('#txtBLNumber').val();
            if (txtBLNumber.length == 0) {
                validation += "<span style='color:red;'>*</span> <span>Please Enter BlNumber</span></br>"
            }

            var txtContainerNo = $('#txtContainerNo').val();
            if (txtContainerNo.length == 0) {
                validation += "<span style='color:red;'>*</span> <span>Please Enter Container No</span></br>"
            }


            var ddlCntrTypes = $('#ddlCntrTypes').val();
            if (ddlCntrTypes == "?") {
                validation += "<span style='color:red;'>*</span> <span>Please Select Container Types</span></br>"
            }

            var ddlchargeCode = $('#ddlchargeCode').val();
            if (ddlchargeCode == "?") {
                validation += "<span style='color:red;'>*</span> <span>Please Select Charge Code</span></br>"
            }

            var ddlCurrency = $('#ddlInvCurrency').val();
            if (ddlCurrency == "?") {
                validation += "<span style='color:red;'>*</span> <span>Please Select Currency</span></br>"
            }

            var txtTraiffAmt = $('#txtTraiffAmt').val();
            if (txtTraiffAmt.length == 0) {
                validation += "<span style='color:red;'>*</span> <span>Please Enter Traiff Amount</span></br>"
            }

            var txtTaxPercentage = $('#txtTaxPercentage').val();
            if (txtTaxPercentage.length == 0) {
                validation += "<span style='color:red;'>*</span> <span>Please Enter TaxPercentage</span></br>"
            }

            var txtTaxAmt = $('#txtTaxAmt').val();
            if (txtTaxAmt.length == 0) {
                validation += "<span style='color:red;'>*</span> <span>Please Enter TaxAmt</span></br>"
            }

            var txtErrorLog = $('#txtErrorLog').val();
            if (txtErrorLog.length == 0) {
                validation += "<span style='color:red;'>*</span> <span>Please Enter ErrorLog</span></br>"
            }


            if (validation != "") {
                ShowPopup(validation);
                return false;
            }



            var TIDValue;
            TIDValue = ($scope.TID == "") ? 0 : $scope.TID;

            var val = {
                'TID': TIDValue,
                'VesselName': $("#ddlVessel option:selected").text(),
                'VesselID': $("#ddlVessel").val(),
                'VoyageName': $("#ddlVoyage option:selected").text(),
                'VoyageID': $("#ddlVoyage").val(),
                'PortName': $("#ddlPOL option:selected").text(),
                'PortID': $("#ddlPOL").val(),
                'ContainerNo': $scope.txtContainerNo,
                'CntrType': $("#ddlCntrTypes option:selected").text(),
                'CntrTypeID': $("#ddlCntrTypes").val(),
                'BLNo': $scope.txtBLNumber,
                'ChargeCodeName': $("#ddlchargeCode option:selected").text(),
                'ChargeCodeID': $("#ddlchargeCode").val(),
                'Currency': $("#ddlInvCurrency option:selected").text(),
                'CurrencyID': $("#ddlInvCurrency").val(),
                'TariffAmt': $scope.txtTraiffAmt,
                'Percentage': $scope.txtTaxPercentage,
                'Tax': $scope.txtTaxAmt,
                'Status':"",
                'ErrorLog': $scope.txtErrorLog,

            };
            if ($scope.HDArrayIndex != null && $scope.HDArrayIndex.length != 0) {
                $scope.DynamicGrid[$scope.HDArrayIndex] = val;
            } else {
                $scope.DynamicGrid.push(val);
            }

            $("#ddlVessel").val("");
            $("#ddlVoyage").val("");
            $("#ddlPOL").val("");
            $("#ddlCntrTypes").val("");
            $("#ddlchargeCode").val("");
            $("#ddlInvCurrency").val("");
            $scope.txtBLNumber = "";
            $scope.txtContainerNo = "";
            $scope.txtTraiffAmt = "";
            $scope.txtTaxPercentage = "";
            $scope.txtErrorLog = "";
            $scope.HDArrayIndex = "";
            $scope.TID = 0;
            $scope.HDArrayIndex = "";
            $scope.TID = 0;

        }

        $scope.Selectvalues = function (DynamicGrid, index) {
            $scope.GetVoyageDtls($scope.DynamicGrid[index].VesselID);
            $scope.HDArrayIndex = index;
            $scope.TID = $scope.DynamicGrid[index].TID;
            $scope.ddlVessel = { ID: $scope.DynamicGrid[index].VesselID };
            $scope.ddlVoyage = { ID: $scope.DynamicGrid[index].VoyageID };
            $scope.ddlPOL = { ID: $scope.DynamicGrid[index].PortID };
            $scope.ddlCntrTypes = { ID: $scope.DynamicGrid[index].CntrTypeID };
            $scope.ddlchargeCode = { ID: $scope.DynamicGrid[index].ChargeCodeID };
            $scope.ddlInvCurrency = { ID: $scope.DynamicGrid[index].CurrencyID };
            $scope.txtBLNumber = $scope.DynamicGrid[index].BLNo;
            $scope.txtContainerNo = $scope.DynamicGrid[index].ContainerNo;
            $scope.txtTraiffAmt = $scope.DynamicGrid[index].TariffAmt;
            $scope.txtTaxPercentage = $scope.DynamicGrid[index].Percentage;
            $scope.txtTaxAmt = $scope.DynamicGrid[index].Tax;
            $scope.txtErrorLog = $scope.DynamicGrid[index].ErrorLog;
        }

        $scope.Recordsave = function (data) {

            var validation = "";

            var txtInvoiceNo = $('#txtInvoiceNo').val();
            if (txtInvoiceNo.length == 0) {
                validation += "<span style='color:red;'>*</span> <span>Please Enter InvoiceNo</span></br>"
            }

            var txtInvoiceDate = $('#txtInvoiceDate').val();
            if (txtInvoiceDate.length == 0) {
                validation += "<span style='color:red;'>*</span> <span>Please Enter Invoice Date</span></br>"
            }

            
            var ddlvendorName = $('#ddlvendorName').val();
            if (ddlvendorName == "?") {
                validation += "<span style='color:red;'>*</span> <span>Please Select Vendor Name</span></br>"
            }

            var ddlCurrency = $('#ddlCurrency').val();
            if (ddlCurrency == "?") {
                validation += "<span style='color:red;'>*</span> <span>Please Select Currency Name</span></br>"
            }



            var txtInvoiceAmt = $('#txtInvoiceAmt').val();
            if (txtInvoiceAmt.length == 0) {
                validation += "<span style='color:red;'>*</span> <span>Please Enter Invoice Amount</span></br>"
            }

            var Datav = "undefined";
            angular.forEach(data, function (value, key) {

                Datav += data[key].ChargeCodeID.ID;

            });

            if (Datav.toString() == "undefined") {
                validation += "<span style='color:red;'>*</span> <span>Please Add invoice Details</span></br>"
            }

            if (validation != "") {
                ShowPopup(validation);
                return false;
            }
            $('#overlay').fadeIn().delay(100).fadeOut();

            var BussData = {}
            var Items = []

            if ($scope.RegId == "")
                BussData.ID = 0;
            else
                BussData.ID = $scope.RegId;

            BussData.InvoiceNo = $scope.txtInvoiceNo;
            BussData.InvDate = $("#txtInvoiceDate").val();
            BussData.PartyID = $("#ddlvendorName").val();
            BussData.PartyName = $("#ddlvendorName option:selected").text();
            BussData.CurrencyID = $("#ddlCurrency").val();
            BussData.Currency = $("#ddlCurrency option:selected").text();
            BussData.Remarks = $scope.txtRemarks;
            BussData.UserID = 1;
            BussData.GeoLocID = 1;
            BussData.SessionFinYear = "1977";
            BussData.InvTax = "0";
            BussData.InvAmount = $scope.txtInvoiceAmt;

            angular.forEach(data, function (value, key) {
                if (typeof data[key].TID == "undefined") {
                    intTID = 0;
                }
                Items.push('Insert:' + intTID, data[key].VesselName,
                    data[key].VesselID,
                    data[key].ChargeCodeID,
                    data[key].VoyageName,
                    data[key].VoyageID,
                    data[key].PortName,
                    data[key].PortID,
                    data[key].ContainerNo,
                    data[key].CntrType,
                    data[key].CntrTypeID,
                    data[key].BLNo,
                    data[key].ChargeCodeName,
                    data[key].Currency,
                    data[key].CurrencyID,
                    data[key].TariffAmt,
                    data[key].Percentage,
                    data[key].Tax,
                    data[key].Status,
                    data[key].ErrorLog,
                );
            });
            BussData.Itemsv = Items.toString();

            $http({
                method: 'POST',
                url: '/api/VendorApi/VendorInvoiceInsert',
                data: JSON.stringify(BussData),

            }).then(function (result) {
                $timeout(function () {
                    $scope.RegId = result.data[0].ID;

                    if (result.data[0].ID != "0") {
                        ShowPopup("Saved Successfully");
                    }
                    else {

                        ShowPopup("Error Not saved");
                    }

                    setTimeOut(function () {
                        window.location = "/";
                    }, 3000);
                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {

                ShowPopup('There has been an error: ' + result);
            });



        }


        $scope.ExistingBLValues = function (ID) {
            var BussDate = {};
            BussDate.ID = ID;
            $http({
                method: 'POST',
                url: '/api/VendorApi/VendorInvoiceExisting',
                data: JSON.stringify(BussDate),

            }).then(function (result) {
                $timeout(function () {
                    $scope.txtInvoiceNo = result.data[0].InvoiceNo;
                    $('#txtInvoiceDate').val(result.data[0].InvDate);
                    $scope.ddlvendorName ={ ID: result.data[0].PartyID };
                    $scope.ddlCurrency = { ID: result.data[0].CurrencyID };
                    $scope.txtInvoiceAmt = result.data[0].InvAmount;
                    $scope.txtRemarks = result.data[0].Remarks;
                });
            }, function (result) {

                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            });

        }

        $scope.FilExistingDetails = function (ID) {
            var Datavalue = {};
            Datavalue.ID = ID;

            $http({
                method: 'POST',
                url: '/api/VendorApi/VendorInvoiceExistingDtls',
                data: JSON.stringify(Datavalue),

            }).then(function (result) {
                $timeout(function () {

                    if (result.data[0].VesselID != "") {
                        $scope.DynamicGrid.splice(0, 1);
                    }

                    angular.forEach(result.data, function (value, key) {
                        $scope.DynamicGrid.push({
                      
                            'TID': result.data[key].ID,
                            'VesselName': result.data[key].VesselName,
                            'VesselID': result.data[key].VesselID,
                            'VoyageName': result.data[key].VoyageNo,
                            'VoyageID': result.data[key].VoyageID,
                            'PortName': result.data[key].PortName,
                            'PortID': result.data[key].PortID,
                            'ContainerNo': result.data[key].ContainerNo,
                            'CntrType': result.data[key].CntrTypes,
                            'CntrTypeID': result.data[key].CntrTypeID,
                            'BLNo': result.data[key].BLNo,
                            'ChargeCodeID': result.data[key].NarrationID,
                            'ChargeCodeName': result.data[key].Narration,
                            'Currency': result.data[key].Currency,
                            'CurrencyID': result.data[key].CurrencyID,
                            'TariffAmt': result.data[key].InvAmount,
                            'Percentage': result.data[key].TaxPCD,
                            'Tax': result.data[key].InvTax,
                            'Status': result.data[key].Status,
                            'ErrorLog': result.data[key].ErrorLog,

                        });

                    });
                });
            }, function (result) {

                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            });
        }

        $scope.GetVoyageDtls = function (VessID) {

            var Datavalue = {};
            Datavalue.VesID = VessID;
            $http({
                method: 'POST',
                url: '/api/VendorApi/VoyageDetails/',
                data: JSON.stringify(Datavalue)
            }).then(function (result) {
                $timeout(function () {
                    $scope.VoyageValueAll = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        }
    });

    function numericvalidation() {
        var key = event.keyCode; if ((key >= 48) && (key <= 58) || (key == 46))
            return true;
        else
            return false;
    }

    function ShowPopup(message) {
        swal(message);
    };


</script>


<script type="text/javascript">
    $(function () {
        $("#btnTranship").click(function () {
            if (result.data[0].TranshimentPortID != "0") {
                $('#demoModalTranshipment').modal('show');
            }

        });
    });
</script>
<div ng-app="MyApp" ng-controller="MyController">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12 backbtn" style="text-align:right;">
                <a href="/VendorBill/VendorBillCreateSearch" type="submit" ng-click="back();" class="btn btn-fill btnback btn-success btn-round btntop">
                    <i class="material-icons">reply</i> Back
                </a>

            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="card ">
                    <div class="card-header card-header-primary card-header-text">
                        <div class="card-text">
                            <h4 class="card-title">Vendor Invoice Creation</h4>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="row">

                            <div class="col-md-12 pull-right">
                                <div class="col-md-3" style="float:right;">
                                    <div class="dropdown" style="float:right;">
                                        <a class="btn btn-success btndrop dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            OPTIONS
                                        </a>

                                        <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                            <a class="dropdown-item" href="#"><i class="fa fa-user"></i> <span style="padding-left:20px;">Upload Vendor Invoice</span></a>
                                            <a class="dropdown-item" href="#"><i class="fa fa-bookmark" style="color: #0585b5;"></i> <span style="padding-left:20px;">View Vendor Invoice</span></a>
                                            <a class="dropdown-item" href="#"><i class="fa fa-bookmark" style="color: #f3e10f;"></i> <span style="padding-left:20px;">Duplicate Check</span></a>
                                            <a class="dropdown-item" href="#"><i class="fa fa-bookmark" style="color: #f905db;"></i> <span style="padding-left:20px;">Change Company</span></a>
                                            <a class="dropdown-item" href="#"><i class="fa fa-ship" style="color: #333333;"></i> <span style="padding-left:20px;">Raise Dispute</span></a>
                                            <a class="dropdown-item" href="#"><i class="fa fa-asterisk" style="color: #333333;"></i> <span style="padding-left:20px;">Dispute History</span></a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="card-header card-header-primary card-header-text" style="width: 100% !important; margin-top: 14px; margin-bottom: 7px; ">
                                <div class="card-text" style="background-color: #e6e6e6!important; color: #000!important;background:none!important; box-shadow: none!important; width: 100%!important; padding: 7px 0px; " ortant;">
                                    <h1 class="card-title" style="color: #000; font-weight: 500; background-color: #ededed; padding: 8px; font-size:18px;">Basic Details</h1>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="col-md-12">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <label>Invoice No</label>
                                                        <input type="text" autocomplete="off" id="txtInvoiceNo" ng-model="txtInvoiceNo" class="form-control" />

                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <label>Invoice Date</label>
                                                        <input type="date" autocomplete="off" id="txtInvoiceDate" ng-model="txtInvoiceDate" class="form-control" />

                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-12" id="DivRRvisible">
                                                        <label>Vendor Name</label>
                                                        <select class="form-control my-select" id="ddlvendorName" ng-model="ddlvendorName" ng-options="item.VendorName for item in VendorMasterAllvalues track by item.ID">
                                                        </select>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                                <div class="col-md-12">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <label>Currency</label>
                                                        <select class="form-control my-select" id="ddlCurrency" ng-model="ddlCurrency" ng-options="item.Currency for item in CurrencyValue track by item.ID">
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <label>Invoice Amount</label>
                                                        <input type="text" autocomplete="off" id="txtInvoiceAmt" ng-model="txtInvoiceAmt" class="form-control" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <label>Remarks</label>
                                                        <input type="text" autocomplete="off" id="txtRemarks" ng-model="txtRemarks" class="form-control" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>


                        </div>

                        <div class="row">
                            <div class="card-header card-header-primary card-header-text" style="width: 100% !important; margin-top: 14px; margin-bottom: 7px; ">
                                <div class="card-text" style="background-color: #e6e6e6!important; color: #000!important;background:none!important; box-shadow: none!important; width: 100%!important; padding: 7px 0px; " ortant;">
                                    <h1 class="card-title" style="color: #000; font-weight: 500; background-color: #ededed; padding: 8px; font-size:18px;">Invoice Details</h1>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="col-md-12">
                                    <div class="row">
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <label>Vessel</label>
                                                        <select class="form-control" id="ddlVessel" ng-model="ddlVessel" ng-options="item.VesselName for item in VesselMasterAllvalues track by item.ID">
                                                           
                                                        </select>
                                                        
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <label>Voyage</label>
                                                        <select class="form-control" id="ddlVoyage" ng-model="ddlVoyage" ng-options="item.VoyageName for item in VoyageValueAll track by item.ID">
                                                        </select>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-12" id="DivRRvisible">
                                                        <label>Port</label>
                                                        <select id="ddlPOL" class="form-control" ng-model="ddlPOL" options="{ allowClear: true }" ng-options="item.PortName for item in PortAllvalues track by item.ID"></select>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <label>BLNumber</label>
                                                        <input type="text"  autocomplete="off" id="txtBLNumber" ng-model="txtBLNumber" class="form-control" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                                <div class="col-md-12">
                                    <div class="row">

                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <label>Container No</label>
                                                        <input type="text" autocomplete="off" id="txtContainerNo" ng-model="txtContainerNo" class="form-control" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <label>Container Type</label>
                                                        <select class="form-control" id="ddlCntrTypes" ng-model="ddlCntrTypes" ng-options="item.CntrTypes for item in CntrTypesvalues track by item.ID">
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <label>Charge</label>
                                                        <select class="form-control" id="ddlchargeCode" ng-model="ddlchargeCode" ng-options="item.ChargeCode for item in ChargeCodeAllvalues track by item.ID"></select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <label>Tariff Currency</label>
                                                        <select class="form-control" id="ddlInvCurrency" ng-model="ddlInvCurrency" ng-options="item.Currency for item in CurrencyValue track by item.ID">
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>


                            <div class="col-md-12">


                                <div class="col-md-12">
                                    <div class="row">

                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <label>Tariff Amount</label>
                                                        <input type="text"  autocomplete="off" id="txtTraiffAmt" ng-model="txtTraiffAmt" class="form-control" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <label>Tax Percentage</label>
                                                        <input type="text"  autocomplete="off" id="txtTaxPercentage" ng-model="txtTaxPercentage" class="form-control" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <label>Tax Amount</label>
                                                        <input type="text" autocomplete="off" id="txtTaxAmt" ng-model="txtTaxAmt" class="form-control" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <label>Error Log</label>
                                                        <input type="text" autocomplete="off" id="txtErrorLog" ng-model="txtErrorLog" class="form-control" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>


                        </div>

                    </div>
                    <div class="row">
                        <div class="col-md-12" style="text-align: right; margin-left: -36px;">

                            <button type="submit" class="btn btn-info">
                                <i class="material-icons">save</i>
                                FETCH BL
                            </button>
                            <button type="submit" class="btn btn-primary">
                                <i class="material-icons">cancel</i>
                                Upload From Excel
                            </button>
                            <button type="submit" class="btn btn-success" ng-click="AddRecord();">
                                <i class="material-icons">add</i>
                                Add
                            </button>
                           
                            <button type="submit" class="btn btn-warning">
                                <i class="material-icons">edit</i>
                                update
                            </button>
                            <button type="submit" class="btn btn-danger">
                                <i class="material-icons">cancel</i>
                                Delete
                            </button>

                        </div>
                    </div>

                    <div class="row" style="margin-top:20px;">
                        <div class="col-md-12">
                            <div class="material-datatables" style="width:100%;overflow:scroll;">
                                <table class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">
                                    <thead class="gridhead1">
                                        <tr>
                                            <th>S.NO</th>
                                            <th>VESSEL</th>
                                            <th>VOYAGE</th>
                                            <th>PORT</th>
                                            <th>CONTAINER NO</th>
                                            <th>CONTAINER TYPE</th>
                                            <th>BL NO</th>
                                            <th>CHARGE</th>
                                            <th>CUR</th>
                                            <th>TARIFF AMT</th>
                                            <th>TAX %</th>
                                            <th>TAX AMT</th>
                                            <th>STATUS</th>
                                            <th>ERROR LOG</th>
                                            <th class="td-actions text-right">Actions</th>
                                        </tr>
                                        </thead>
                                    <tbody>
                                        <tr ng-repeat="gRow in DynamicGrid">
                                            <td>{{$index+1}}</td>

                                            <td>{{gRow.VesselName}}
                                                <input type="hidden" id="VesselID" class="form-control" ng-model="gRow.VesselID" />
                                            </td>
                                           
                                            <td>
                                                {{gRow.VoyageName}}
                                                <input type="hidden" id="VoyageID" class="form-control" ng-model="gRow.VoyageID" />
                                            </td>
                                            <td>{{gRow.PortName}}
                                                <input type="hidden" id="PortID" class="form-control" ng-model="gRow.PortID" />
                                            </td>
                                            <td>{{gRow.ContainerNo}}</td>
                                            <td>
                                                {{gRow.CntrType}}
                                                <input type="hidden" id="PortID" class="form-control" ng-model="gRow.CntrTypeID" />
                                            </td>
                                            <td>{{gRow.BLNo}}</td>
                                            <td>
                                                {{gRow.ChargeCodeName}}
                                                <input type="hidden" id="PortID" class="form-control" ng-model="gRow.ChargeCodeID" />
                                            </td>
                                            <td>
                                                {{gRow.Currency}}
                                                <input type="hidden" id="PortID" class="form-control" ng-model="gRow.CurrencyID" />
                                            </td>
                                            <td>{{gRow.TariffAmt}}</td>
                                            <td>{{gRow.Percentage}}</td>
                                            <td>{{gRow.Tax}}</td>
                                            <td>{{gRow.Status}}</td>
                                            <td>{{gRow.ErrorLog}}</td>
                                            <td class="td-actions text-right bindgrid">

                                                <button type="button" rel="tooltip" ng-click="Selectvalues(DynamicGrid,$index)" class="btn btn-success btn-round" data-original-title="" title="">
                                                    <i class="material-icons">edit</i>
                                                </button>
                                                <button type="button" rel="tooltip" ng-click="Remove(DynamicGrid,$index)" class="btn btn-danger btn-round" data-original-title="" title="">
                                                    <i class="material-icons">delete</i>
                                                </button>
                                                <input type="hidden" id="HDID" class="form-control" ng-model="gRow.TID" />
                                            </td>
                                        </tr>
                                    </tbody>
                                    </table>
                            </div>
                            </div>
                        </div>

                                <div class="row" style="margin-top:20px;">
                                    <div class="col-md-12" style="text-align: right; margin-left: -36px;">
                                        <input tx type="hidden" id="HDArrayIndex" ng-model="HDArrayIndex" />
                                        <input type="hidden" id="TID" ng-model="TID" />
                                        <input type="hidden" id="RegId" ng-model="RegId" />
                                        <button type="submit" ng-click="Recordsave(DynamicGrid);" class="btn btn-success">
                                            <i class="material-icons">save</i>
                                            Save
                                        </button>

                                    </div>
                                </div>




                            </div>
                        </div>

                    </div>


                </div>
</div>

<script>
    $(document).ready(function () {
        $('.datepicker').datetimepicker({
            format: 'DD/MM/YYYY',

        });
    });
</script>

