@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css" rel="stylesheet">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.full.min.js"></script>
<script type="text/javascript">

    LayoutApp.controller('MyController', function ($scope, $http, $timeout) {
        $scope.HDArrayIndex = "";
        $(document).ready(function () {
            $('.my-select').select2({
                placeholder: "--Select--",
                allowClear: true,
                width: '100%'
            });
        });

        $scope.CargoMasterAllvalues = null;
        $scope.fillCargoMasterValues = function () {

            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/CargoTypesMaster/',
                data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.CargoMasterAllvalues = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillCargoMasterValues();

        $scope.BLNumberlist = null;
        $scope.fillBlNumber = function () {
            var Datavalue = {};
            Datavalue.AgentId = localStorage.getItem("AgencyID");
            $http({
                method: 'POST',
                url: '/api/CorrectionApi/ListBLListAgentwise/',
                data: JSON.stringify(Datavalue),
            }).then(function (result) {
                $timeout(function () {
                    $scope.BLNumberlist = result.data;
                });
            }, function (result) {

                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected. Please reconnect and try again.");
                }
            });

        };
        $scope.fillBlNumber();

        $scope.CustomerMasterAllvalues = null;
        $scope.fillCustomerMasterValues = function () {

            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/CustomerMaster/',
                data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.CustomerMasterAllvalues = result.data;



                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillCustomerMasterValues();


        $scope.AgencyMasterAllvalues = null;
        $scope.fillAgencyMasterValues = function () {

            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/AgencyMaster/',
                data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.AgencyMasterAllvalues = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillAgencyMasterValues();

        $scope.PortAllvalues = null;
        $scope.fillPortsValues = function () {
            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/PortValues/',
                data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.PortAllvalues = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillPortsValues();

        $scope.CityAllvalues = null;
        $scope.fillCityValues = function () {
            $http({
                method: 'POST',
                url: '/api/Home/cityBind/',
                data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.CityAllvalues = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillCityValues();


        $scope.FilBOLPartyDetails = function (BOLRegID) {
            $("#overlay").show();
            var Datavalue = {};
            Datavalue.ID = BOLRegID;

            $http({
                method: 'POST',
                url: '/api/CorrectionApi/BOLPartyDetailsRecord',
                data: JSON.stringify(Datavalue),

            }).then(function (result) {
                $timeout(function () {
                    if (result.data.length > 0) {
                        $scope.ddlShipper = { ID: result.data[0].ShipperOldID };
                        $scope.txtShipperAddress = result.data[0].ShipperOLdAddress;

                        $scope.ddlConsignee = { ID: result.data[0].ConsigneeOldID }
                        $scope.txtConsAddress = result.data[0].ConsigneeOldAddress

                        $scope.ddlNotify = { ID: result.data[0].NotifyOldID }
                        $scope.txtNotifyAddress = result.data[0].NotifyOldAddress


                        $scope.ddlShipperNew = { ID: result.data[0].ShipperOldID };
                        $scope.txtShipperNewAddr = result.data[0].ShipperOLdAddress;

                        $scope.ddlConsigneeNew = { ID: result.data[0].ConsigneeOldID };
                        $scope.txtConsigneeNewAddr = result.data[0].ConsigneeOldAddress

                        $scope.ddlNotifyNew = { ID: result.data[0].NotifyOldID };
                        $scope.txtNotifyNewAddr = result.data[0].NotifyOldAddress

                        $scope.ddldestinationAgent = { ID: result.data[0].DesAgentoldID };
                        $scope.txtdestinationAgentAddress = result.data[0].DesAgentIDOldAddress

                        $scope.ddldestinationAgentNew = { ID: result.data[0].DesAgentoldID };
                        $scope.txtdestinationAgentAddressNewAddr = result.data[0].DesAgentIDOldAddress

                    }

                    $("#overlay").hide();
                });
            }, function (result) {

                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            });
        }

        $("#ddlBLNumber").change(function () {


            $scope.FilBOLReleaseExsiting($("#ddlBLNumber").val());
            $scope.FilBOLPartyDetails($("#ddlBLNumber").val());



        });

        $scope.FilBOLReleaseExsiting = function (BOLRegID) {
            $("#overlay").show();
            var Datavalue = {};
            Datavalue.BLID = BOLRegID;
            $http({
                method: 'POST',
                url: '/api/CorrectionApi/BOLReleaseExistingViewRecord',
                data: JSON.stringify(Datavalue),

            }).then(function (result) {
                $timeout(function () {

                    if (result.data.length > 0) {

                        
                        if (result.data[0].TSPORTID != "") {
                            $scope.TranshipmentPort(result.data[0].TSPORTID);
                        }
                        

                        $scope.txtMarks = result.data[0].MarkNo;
                        $scope.txtCargoDesc = result.data[0].OldCargoDesc;
                        $scope.txtMarksNew = result.data[0].MarkNo;
                        $scope.txtNewCargoDesc = result.data[0].OldCargoDesc;
                        $scope.HDBkgID = result.data[0].BkgID;
                        $scope.ddlPOO = { ID: result.data[0].POOID };
                        $scope.ddlPOL = { ID: result.data[0].POLID };
                        $scope.ddlPOD = { ID: result.data[0].PODID };
                        $scope.ddlFPOD = { ID: result.data[0].FPODID };
                        $scope.ddlPOONew = { ID: result.data[0].POOID };
                        $scope.ddlPOLNew = { ID: result.data[0].POLID };
                        $scope.ddlPODNew = { ID: result.data[0].PODID };
                        $scope.ddlFPODNew = { ID: result.data[0].FPODID };
                        $scope.ddlTSPort = { ID: result.data[0].TSPORTID };
                        $scope.ddlTranshipmentAgent = { ID: result.data[0].TranshipmetAgentID };
                        $scope.ddlTSPortNew = { ID: result.data[0].TSPORTID };
                       
                        if (result.data[0].TSPORTID != "") {
                            $scope.TranshipmentPortNew(result.data[0].TSPORTID);
                            $scope.ddlTranshipmentAgentNew = { ID: result.data[0].TranshipmetAgentID };
                        }
                      

                        $scope.FilBOLCntrExistingDetails(result.data[0].BkgID, result.data[0].BLID);
                    }

                    $("#overlay").hide();

                });
            }, function (result) {

                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            });
        }

        $scope.DynamicGridContainer = [{ CntrID: "", CntrNo: "", Size: "", ISOCode: "", SealNo: "", NoOfPkg: "", PakgType: "", GrsWt: "", NtWt: "", VGM: "", CBM: "" }]

        $scope.FilBOLCntrExistingDetails = function (BkgIDv, BLIDv) {
            $("#overlay").show();

            var Datavalue = {};
            Datavalue.BkgID = BkgIDv;
            Datavalue.BLID = BLIDv;

            $http({
                method: 'POST',
                url: '/api/CorrectionApi/BOLCntrExistingRecord',
                data: JSON.stringify(Datavalue),

            }).then(function (result) {

                $timeout(function () {
                    if (result.data.length > 0) {
                        $scope.CntrBolDtls = result.data;
                        if (result.data[0].CntrType != "") {
                            $scope.DynamicGridContainer.splice(0, 1);
                        }
                        angular.forEach(result.data, function (value, key) {
                            $scope.DynamicGridContainer.push({
                                'CntrID': result.data[key].CntrID,
                                'CntrNo': result.data[key].CntrNo,
                                'Size': result.data[key].Size,
                                'SealNo': result.data[key].SealNo,
                                'NoOfPkg': result.data[key].NoOfPkg,
                                'PakgType': { ID: result.data[key].PakgTypeID },
                                'GrsWt': result.data[key].GrsWt,
                                'NtWt': result.data[key].NtWt,
                                'VGM': result.data[key].VGM,
                                'CBM': result.data[key].CBM,
                            });

                        });
                    }
                    else {

                    }

                    $("#overlay").hide();
                });
            }, function (result) {

                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            });
        }

        $(document).ready(function () {

            var queryString = new Array();
            if (window.location.search.split('?').length > 1) {
                var params = window.location.search.split('?')[1].split('&');
                for (var i = 0; i < params.length; i++) {
                    var key = params[i].split('=')[0];
                    var value = decodeURIComponent(params[i].split('=')[1]);
                    queryString[key] = value;
                }
            }
            if (queryString["CMRegID"] != null) {

                $scope.HDID = queryString["CMRegID"].toString();
                $scope.fillCorrectionMemoExistingValue($scope.HDID);
                $scope.FilCntrExistingDetails($scope.HDID);
            }
            else {
                document.getElementById("btnApproval").disabled = true;
                document.getElementById("btnApproval").style.cursor = 'not-allowed';
                document.getElementById("btnRejected").disabled = true;
                document.getElementById("btnRejected").style.cursor = 'not-allowed';
            }
        });

        $scope.fillCorrectionMemoExistingValue = function (cmID) {

            var Datavalue = {};
            Datavalue.ID = cmID;
            $http({
                method: 'POST',
                url: '/api/CorrectionApi/CorrectionMemoExistingValues',
                data: JSON.stringify(Datavalue),

            }).then(function (result) {
                $timeout(function () {
                    $scope.TanshimentMaster(result.data[0].TSPORTIDNew);
                    $scope.ddlBLNumber = { ID: result.data[0].BLID };
                    $scope.BindCorrectionNo = result.data[0].CorrectionNo;
                    $scope.ddlShipper = { ID: result.data[0].ShipperOldID };
                    $scope.ddlShipperNew = { ID: result.data[0].ShipperNewID };
                    $scope.ddlConsignee = { ID: result.data[0].ConsigneeOldID };
                    $scope.ddlConsigneeNew = { ID: result.data[0].ConsigneeNewID };
                    $scope.ddlNotify = { ID: result.data[0].NotifyOldID };
                    $scope.ddlNotifyNew = { ID: result.data[0].NotifyNewID };

                    $scope.txtShipperAddress = result.data[0].ShipperOLdAddress;
                    $scope.txtShipperNewAddr = result.data[0].ShipperNewAddress;
                    $scope.txtConsigneeNewAddr = result.data[0].ConsigneeNewAddress;
                    $scope.txtConsAddress = result.data[0].ConsigneeOldAddress;
                    $scope.txtNotifyAddress = result.data[0].NotifyOldAddress;
                    $scope.txtNotifyNewAddr = result.data[0].NotifNewAddress;
                    $scope.txtCargoDesc = result.data[0].OldCargoDesc;
                    $scope.txtNewCargoDesc = result.data[0].NewCargoDesc;
                    $scope.txtMarks = result.data[0].OldMarksNo;
                    $scope.txtMarksNew = result.data[0].NewMarksNo;
                    $scope.HDBkgID = result.data[0].BkgID;
                 
                    $scope.ddlPOO = { ID: result.data[0].POOID };
                    $scope.ddlPOL = { ID: result.data[0].POLID };
                    $scope.ddlPOD = { ID: result.data[0].PODID };
                    $scope.ddlFPOD = { ID: result.data[0].FPODID };
                    $scope.ddlTSPort = {
                        ID: result.data[0].TSPORTID
                    };
                    $scope.ddlTranshipmentAgent = {
                        ID: result.data[0].TranshipmetAgentID
                    };

                    $scope.ddlFPODNew = {
                        ID: result.data[0].FPODIDNew
                    };
                    $scope.ddlPOONew = {
                        ID: result.data[0].POOIDNew
                    };
                    $scope.ddlPOLNew = {
                        ID: result.data[0].POLIDNew
                    };
                    $scope.ddlPODNew = {
                        ID: result.data[0].PODIDNew
                    };
                    $scope.ddlFPODNew = {
                        ID: result.data[0].FPODIDNew
                    };


                    $scope.ddlTSPortNew = {
                        ID: result.data[0].TSPORTIDNew
                    };
                    $scope.ddlTranshipmentAgentNew = {
                        ID: result.data[0].TranshipmetAgentIDNew
                    };


                    $scope.ddldestinationAgent = { ID: result.data[0].DesAgentoldID };
                    $scope.txtdestinationAgentAddress = result.data[0].DesAgentIDOldAddress

                    $scope.ddldestinationAgentNew = { ID: result.data[0].AgencyNewID };
                    $scope.txtdestinationAgentAddressNewAddr = result.data[0].AgencyNewAddress
                    if (result.data[0].Status == "1") {

                        document.getElementById("btnSave").disabled = true;
                        document.getElementById("btnSave").style.cursor = 'not-allowed';

                    }
                    if (result.data[0].Status == "2") {

                        document.getElementById("btnApproval").disabled = true;
                        document.getElementById("btnApproval").style.cursor = 'not-allowed';
                        document.getElementById("btnRejected").disabled = true;
                        document.getElementById("btnRejected").style.cursor = 'not-allowed';
                        document.getElementById("btnSave").disabled = true;
                        document.getElementById("btnSave").style.cursor = 'not-allowed';
                    }
                    if (result.data[0].Status == "3") {

                        document.getElementById("btnApproval").disabled = true;
                        document.getElementById("btnApproval").style.cursor = 'not-allowed';
                        document.getElementById("btnRejected").disabled = true;
                        document.getElementById("btnRejected").style.cursor = 'not-allowed';
                        document.getElementById("btnSave").disabled = true;
                        document.getElementById("btnSave").style.cursor = 'not-allowed';
                    }
                });
            }, function (result) {

                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            });

        }

        $scope.FilCntrExistingDetails = function (cmID) {
            $("#overlay").show();

            var Datavalue = {};
            Datavalue.ID = cmID;

            $http({
                method: 'POST',
                url: '/api/CorrectionApi/CorrectionMemoCntrExistingValues',
                data: JSON.stringify(Datavalue),

            }).then(function (result) {

                $timeout(function () {
                    if (result.data.length > 0) {
                        $scope.CntrBolDtls = result.data;
                        if (result.data[0].CntrNo != "") {
                            $scope.DynamicGridContainer.splice(0, 1);
                        }
                        angular.forEach(result.data, function (value, key) {
                            $scope.DynamicGridContainer.push({
                                'CntrID': result.data[key].CntrID,
                                'CntrNo': result.data[key].CntrNo,
                                /*'Size': result.data[key].Size,*/
                                'SealNo': result.data[key].SealNo,
                                'NoOfPkg': result.data[key].NoOfPkg,
                                'PakgType': { ID: result.data[key].PakgTypeID },
                                'GrsWt': result.data[key].GrsWt,
                                'NtWt': result.data[key].NtWt,
                                'VGM': result.data[key].VGM,
                                'CBM': result.data[key].CBM,
                            });

                        });
                    }
                    else {

                    }

                    $("#overlay").hide();
                });
            }, function (result) {

                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            });
        }

        $scope.RecordSave = function (datav) {

            var validation = "";

            var ddlBLNumber = $('#ddlBLNumber').val();
            if (ddlBLNumber == "?") {
                validation += "<span style='color:red;'>*</span> <span>Please Select BLNumber</span></br>"
            }

            if (validation != "") {
                ShowPopup(validation);
                return false;
            }
            $("#overlay").show();
            var BussData = {}
            var Itemsv = []


            BussData.BLNumber = $("#ddlBLNumber option:selected").text();
            BussData.BLID = $("#ddlBLNumber").val();
            BussData.CorrectionNo = $("#ddlBLNumber option:selected").text();
            if ($("#ddlShipper").val() != "?")
                BussData.ShipperOldID = $("#ddlShipper").val();
            else
                BussData.ShipperOldID = 0;
            if ($("#ddlShipperNew").val() != "?")
                BussData.ShipperNewID = $("#ddlShipperNew").val();
            else
                BussData.ShipperNewID = 0;

            BussData.ShipperNewAddress = $("#txtShipperNewAddr").val();
            BussData.ShipperOldAddress = $("#txtShipperAddress").val();
            if ($("#ddlConsignee").val() != "?")
                BussData.ConsigneeOldID = $("#ddlConsignee").val();
            else
                BussData.ConsigneeOldID = 0;

            if ($("#ddlConsigneeNew").val() != "?")
                BussData.ConsigneeNewID = $("#ddlConsigneeNew").val();
            else
                BussData.ConsigneeNewID = 0;

            BussData.ConsigneeNewAddress = $("#txtConsigneeNewAddr").val();
            BussData.ConsigneeOldAddress = $("#txtConsAddress").val();


            if ($("#ddlNotify").val() != "?")
                BussData.NotifyOldID = $("#ddlNotify").val();
            else
                BussData.NotifyOldID = 0;
            if ($("#ddlNotifyNew").val() != "?")
                BussData.NotifyNewID = $("#ddlNotifyNew").val();
            else
                BussData.NotifyNewID = 0;

            BussData.NotifNewAddress = $("#txtNotifyNewAddr").val();
            BussData.NotifyOldAddress = $("#txtNotifyAddress").val();

            if ($("#ddldestinationAgent").val() != "?")
                BussData.AgencyOldID = $("#ddldestinationAgent").val();
            else
                BussData.AgencyOldID = 0;
            if ($("#ddldestinationAgentNew").val() != "?")
                BussData.AgencyNewID = $("#ddldestinationAgentNew").val();
            else
                BussData.AgencyNewID = 0;

            BussData.AgencyNewAddress = $("#txtConsigneeNewAddr").val();
            BussData.AgencyOldAddress = $("#txtdestinationAgentAddressNewAddr").val();

            BussData.OldMarksNo = $("#txtMarks").val();
            BussData.NewMarksNo = $("#txtMarksNew").val();

            BussData.OldCargoDesc = $("#txtCargoDesc").val();
            BussData.NewCargoDesc = $("#txtNewCargoDesc").val();

            BussData.Status = 1;
            BussData.AgentID = localStorage.getItem("AgencyID");
            BussData.UserID = localStorage.getItem("UserID");
            BussData.BkgID = $scope.HDBkgID;

            if ($("#ddlPOO").val() != "?" && $("#ddlPOO").val() != null)
                BussData.POOLID = $("#ddlPOO").val();
            else
                BussData.POOLID = 0;

            if ($("#ddlPOL").val() != "?" && $("#ddlPOL").val() != null)
                BussData.POLID = $("#ddlPOL").val();
            else
                BussData.POLID = 0;
            if ($("#ddlPOD").val() != "?" && $("#ddlPOD").val() != null)
                BussData.PODID = $("#ddlPOD").val();
            else
                BussData.PODID = 0;
            if ($("#ddlFPOD").val() != "?" && $("#ddlFPOD").val() != null)
                BussData.FPODID = $("#ddlFPOD").val();
            else
                BussData.FPODID = 0;
            if ($("#ddlPOONew").val() != "?" && $("#ddlPOONew").val() != null)
                BussData.POOIDNew = $("#ddlPOONew").val();
            else
                BussData.POOIDNew = 0;

            if ($("#ddlPOLNew").val() != "?" && $("#ddlPOLNew").val() != null)
                BussData.POLIDNew = $("#ddlPOLNew").val();
            else
                BussData.POLIDNew = 0;

            if ($("#ddlPODNew").val() != "?" && $("#ddlPODNew").val() != null)
                BussData.PODIDNew = $("#ddlPODNew").val();
            else
                BussData.PODIDNew = 0;
            if ($("#ddlFPODNew").val() != "?" && $("#ddlFPODNew").val() != null)
                BussData.FPODIDNew = $("#ddlFPODNew").val();
            else
                BussData.FPODIDNew = 0;

            if ($("#ddlTSPort").val() != "?" && $("#ddlTSPort").val() != null)
                BussData.TSPORTID = $("#ddlTSPort").val();
            else
                BussData.TSPORTID = 0;
            if ($("#ddlTSPortNew").val() != "?" && $("#ddlTSPortNew").val() != null)
                BussData.TSPORTIDNew = $("#ddlTSPortNew").val();
            else
                BussData.TSPORTIDNew = 0;
            if ($("#ddlTranshipmentAgent").val() != "?" && $("#ddlTranshipmentAgent").val() != null)
                BussData.TranshipmetAgentID = $("#ddlTranshipmentAgent").val();
            else
                BussData.TranshipmetAgentID = 0;
            if ($("#ddlTranshipmentAgentNew").val() != "?" && $("#ddlTranshipmentAgentNew").val() != null)
                BussData.TranshipmetAgentIDNew = $("#ddlTranshipmentAgentNew").val();
            else
                BussData.TranshipmetAgentIDNew = 0;


            var NetwetS = 0;
            var VGMS = 0;
            var CBMS = 0;
            angular.forEach(datav, function (value, key) {
                if (datav[key].NtWt == "")
                    NetwetS = 0;
                else
                    NetwetS = datav[key].NtWt;

                if (datav[key].VGM == "")
                    VGMS = 0;
                else
                    VGMS = datav[key].VGM;

                if (datav[key].CBM == "")
                    CBMS = 0;
                else
                    CBMS = datav[key].CBM;

                Itemsv.push('Insert:' + datav[key].CntrID, datav[key].SealNo, datav[key].NoOfPkg, datav[key].PakgType.ID, datav[key].PakgType.CargoName, datav[key].GrsWt,
                    NetwetS, VGMS, CBMS);
            });
            BussData.ItemsCntr = Itemsv.toString();


            $http({
                method: 'POST',
                url: "/api/CorrectionApi/CorrectionMemoInsert/",
                data: JSON.stringify(BussData),
            }).then(function (result) {
                if (result.data.length > 0) {
                    $scope.CorrectionNo = result.data[0].CorrectionNo;
                    ShowPopup(result.data[0].Message);

                    setTimeout(function () { location.href = "/Document/CorrectionMemoView" }, 1500);
                    return false;
                   
                }
                else {

                    $("#overlay").hide();
                }
            }

            );
        }


        $("#ddlShipperNew").change(function () {

            var Datavalue = {};
            Datavalue.PartyID = $("#ddlShipperNew").val();
            $http({
                method: 'POST',
                url: '/api/CorrectionApi/PartyByAddress/',
                data: JSON.stringify(Datavalue)
            }).then(function (result) {
                $timeout(function () {
                    $scope.txtShipperNewAddr = result.data[0].Address;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });

        });

        $("#ddlConsigneeNew").change(function () {

            var Datavalue = {};
            Datavalue.PartyID = $("#ddlConsigneeNew").val();
            $http({
                method: 'POST',
                url: '/api/CorrectionApi/PartyByAddress/',
                data: JSON.stringify(Datavalue)
            }).then(function (result) {
                $timeout(function () {
                    $scope.txtConsigneeNewAddr = result.data[0].Address;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });

        });

        $("#ddlNotifyNew").change(function () {

            var Datavalue = {};
            Datavalue.PartyID = $("#ddlNotifyNew").val();
            $http({
                method: 'POST',
                url: '/api/CorrectionApi/PartyByAddress/',
                data: JSON.stringify(Datavalue)
            }).then(function (result) {
                $timeout(function () {
                    $scope.txtNotifyNewAddr = result.data[0].Address;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });

        });

        $("#ddldestinationAgentNew").change(function () {

            var Datavalue = {};
            Datavalue.PartyID = $("#ddldestinationAgentNew").val();
            $http({
                method: 'POST',
                url: '/api/CorrectionApi/AgencyPartyByAddress/',
                data: JSON.stringify(Datavalue)
            }).then(function (result) {
                $timeout(function () {
                    $scope.txtdestinationAgentAddressNewAddr = result.data[0].Address;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });

        });



        $scope.BtnApproval = function () {
            var Datavalue = {};
            Datavalue.ID = $scope.HDID;
            $http({
                method: 'POST',
                url: '/api/CorrectionApi/CorrectionMemoUpdate/',
                data: JSON.stringify(Datavalue)
            }).then(function (result) {
                if (result.data.length > 0) {

                    ShowPopup(result.data[0].Message);
                    setTimeout(function () { location.href = "/Document/CorrectionMemoView" }, 1500);
                }
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });

        }


        $scope.BtnRejected = function () {
            var Datavalue = {};
            Datavalue.ID = $scope.HDID;
            $http({
                method: 'POST',
                url: '/api/CorrectionApi/CorrectionMemoRejected/',
                data: JSON.stringify(Datavalue)
            }).then(function (result) {
                if (result.data.length > 0) {

                    ShowPopup(result.data[0].Message);
                }
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });

        }


        $scope.TranshimentMasterAllvalues = null;
        $("#ddlTSPort").change(function () {

            var Datavalue = {};
            Datavalue.PortID = $("#ddlTSPort").val();
            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/PortAgencyMaster/',
                data: JSON.stringify(Datavalue),
            }).then(function (result) {
                $timeout(function () {
                    $scope.TranshimentMasterAllvalues = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });

        });

        $scope.TranshipmentPort = function (TsPort) {

            var Datavalue = {};
            Datavalue.PortID = TsPort;
            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/PortAgencyMaster/',
                data: JSON.stringify(Datavalue),
            }).then(function (result) {
                $timeout(function () {
                    $scope.TranshimentMasterAllvalues = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        }
        $scope.TranshipmentPortNew = function (TsPort) {

            var Datavalue = {};
            Datavalue.PortID = TsPort;
            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/PortAgencyMaster/',
                data: JSON.stringify(Datavalue),
            }).then(function (result) {
                $timeout(function () {
                    $scope.TranshimentMasterAllvaluesNew = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        }
        $scope.TranshimentMasterAllvaluesNew = null;
        $("#ddlTSPortNew").change(function () {

            var Datavalue = {};
            Datavalue.PortID = $("#ddlTSPortNew").val();
            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/PortAgencyMaster/',
                data: JSON.stringify(Datavalue),
            }).then(function (result) {
                $timeout(function () {
                    $scope.TranshimentMasterAllvaluesNew = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });

        });

        $scope.TanshimentMaster = function(TsPort)
        {
            var Datavalue = {};
            Datavalue.PortID = TsPort;
            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/PortAgencyMaster/',
                data: JSON.stringify(Datavalue),
            }).then(function (result) {
                $timeout(function () {
                    $scope.TranshimentMasterAllvaluesNew = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        }


    });
    function ShowPopup(message) {
        swal(message);
    };

</script>
<style>
    legend {
        background-color: #21277a;
        padding: 4px 9px;
        font-size: 14px;
        color: #fff;
    }

    .chargedtls label {
        font-size: 13px !important;
    }
    /* .chargedtls
        {
            border:1px solid #ccc;
        }*/

    .card .pickupdiv .table tr td {
        font-size: 12px;
        border: 1px solid #ccc;
        padding-top: 1px;
        padding-bottom: 1px;
        color: #333;
    }

    .card .pickupdiv .table tr th {
        position: sticky;
        top: 0;
        z-index: 1;
        background-color: #21277a;
    }

    .btncharge {
        padding: 8px 18px;
        margin: -4px 1px;
    }

    .form-control[disabled], .form-group .form-control[disabled], fieldset[disabled] .form-control, fieldset[disabled] .form-group .form-control {
        background-color: #eee;
    }
</style>
<div ng-app="MyApp" ng-controller="MyController">

    <div id="overlay" style="display:none;">
        <div class="loadcontainer">
            <div class="spinner"></div>
            <p>Loading Please Wait</p>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12 backbtn" style="text-align:right;">
                <a href="/Document/CorrectionMemoView" class="btn btn-fill btn-success btn-round btntop">
                    <i class="fa fa-reply"></i> Back

                </a>
            </div>
        </div>
        <div class="row">

            <div class="col-md-12">
                <div class="card ">
                    <div class="card-header card-header-primary card-header-text">
                        <div class="card-text">
                            <h4 class="card-title">Correction Memo</h4>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="row" style="border:1px solid #ccc;">
                            <div class="col-md-7" style="border-right: 1px solid #ccc; text-align: center; padding-top:24px;">
                                <button class="btn btn-success" id="btnSave" ng-disabled="SaveHidvalue" ng-click="RecordSave(DynamicGridContainer);">Save</button>
                                <input type="hidden" id="HDID" ng-model="HDID" />
                                <button class="btn btn-primary" id="btnApproval" ng-click="BtnApproval();" style="background-color: #20498e;"><i class="fa fa-thumbs-up"></i> Approve </button>
                                <button href="#" class="btn btn-danger" id="btnRejected" ng-click="BtnRejected();" style="background-color: #f7948d;"><i class="fa fa-thumbs-down"></i> Rejected </button>
                                <input type="hidden" id="HDBkgID" ng-model="HDBkgID" />
                            </div>

                            <div class="col-md-5">
                                <div class="row">
                                    <div class="col-md-12" style="border-bottom:1px solid #ccc;">
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-4">BL Number:</div>
                                                <div class="col-md-7 padlr0">
                                                    <select class="form-control my-select" id="ddlBLNumber" ng-model="ddlBLNumber" ng-options="item.BLNumber for item in BLNumberlist track by item.ID"></select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-4">Corrcetion No:</div>
                                                <div class="col-md-7 padlr0">
                                                    <label ng-bind="BindCorrectionNo"></label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                            </div>

                        </div>

                        <div class="row" style="margin-top:20px; border:1px solid #ccc;">
                            <div class="col-md-12" style="margin-top:20px;">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <fieldset>
                                                    <legend>Shipper(Old)</legend>
                                                </fieldset>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-3">
                                                            <label>Name</label>
                                                        </div>
                                                        <div class="col-md-9">
                                                            <select disabled class="form-control my-select" id="ddlShipper" ng-model="ddlShipper" ng-options="item.CustomerName for item in CustomerMasterAllvalues track by item.ID">
                                                            </select>
                                                            @*<input type="text" disabled  id="txtShipperOld" ng-model="txtShipperOld" class="form-control" />*@
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-3">
                                                            <label>Address</label>
                                                        </div>
                                                        <div class="col-md-9">
                                                            <textarea disabled ng-model="txtShipperAddress" id="txtShipperAddress" class="form-control"></textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <fieldset>
                                                    <legend>Shipper(New)</legend>
                                                </fieldset>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-3">
                                                            <label>Name</label>
                                                        </div>
                                                        <div class="col-md-9">
                                                            <select class="form-control my-select" id="ddlShipperNew" ng-model="ddlShipperNew" ng-options="item.CustomerName for item in CustomerMasterAllvalues track by item.ID">
                                                            </select>
                                                            @*<input type="text" id="txtShipperNew" ng-model="txtShipperNew" class="form-control" />*@
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-3">
                                                            <label>Address</label>
                                                        </div>
                                                        <div class="col-md-9">
                                                            <textarea ng-model="txtShipperNewAddr" id="txtShipperNewAddr" class="form-control"></textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <fieldset>
                                                    <legend>Consignee(Old)</legend>
                                                </fieldset>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-3">
                                                            <label>Name</label>
                                                        </div>
                                                        <div class="col-md-9">
                                                            <select disabled class="form-control my-select" id="ddlConsignee" ng-model="ddlConsignee" ng-options="item.CustomerName for item in CustomerMasterAllvalues track by item.ID">
                                                            </select>
                                                            @*<input type="text" disabled id="txtConsigneeOld" ng-model="txtConsigneeOld" class="form-control" />*@
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-3">
                                                            <label>Address</label>
                                                        </div>
                                                        <div class="col-md-9">
                                                            <textarea disabled ng-model="txtConsAddress" id="txtConsAddress" class="form-control"></textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <fieldset>
                                                    <legend>Consignee(New)</legend>
                                                </fieldset>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-3">
                                                            <label>Name</label>
                                                        </div>
                                                        <div class="col-md-9">
                                                            <select class="form-control my-select" id="ddlConsigneeNew" ng-model="ddlConsigneeNew" ng-options="item.CustomerName for item in CustomerMasterAllvalues track by item.ID">
                                                            </select>
                                                            @*<input type="text" id="txtConsigneeNew" ng-model="txtConsigneeNew" class="form-control" />*@
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-3">
                                                            <label>Address</label>
                                                        </div>
                                                        <div class="col-md-9">
                                                            <textarea ng-model="txtConsigneeNewAddr" id="txtConsigneeNewAddr" class="form-control"></textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <fieldset>
                                                    <legend>Notify(Old)</legend>
                                                </fieldset>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-3">
                                                            <label>Name</label>
                                                        </div>
                                                        <div class="col-md-9">
                                                            <select disabled class="form-control my-select" id="ddlNotify" ng-model="ddlNotify" ng-options="item.CustomerName for item in CustomerMasterAllvalues track by item.ID">
                                                            </select>
                                                            @*<input type="text" disabled id="txtNotifyOld" ng-model="txtNotifyOld" class="form-control" />*@
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-3">
                                                            <label>Address</label>
                                                        </div>
                                                        <div class="col-md-9">
                                                            <textarea disabled ng-model="txtNotifyAddress" id="txtNotifyAddress" class="form-control"></textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <fieldset>
                                                    <legend>Notify(New)</legend>
                                                </fieldset>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-3">
                                                            <label>Name</label>
                                                        </div>
                                                        <div class="col-md-9">
                                                            <select class="form-control my-select" id="ddlNotifyNew" ng-model="ddlNotifyNew" ng-options="item.CustomerName for item in CustomerMasterAllvalues track by item.ID">
                                                            </select>
                                                            @*<input type="text" id="txtNotifyNew" ng-model="txtNotifyNew" class="form-control" />*@
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-3">
                                                            <label>Address</label>
                                                        </div>
                                                        <div class="col-md-9">
                                                            <textarea ng-model="txtNotifyNewAddr" id="txtNotifyNewAddr" class="form-control"></textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>

                                @*--des--*@


                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <fieldset>
                                                    <legend>Destination Agent(Old)</legend>
                                                </fieldset>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-3">
                                                            <label>Name</label>
                                                        </div>
                                                        <div class="col-md-9">
                                                            <select disabled class="form-control my-select" id="ddldestinationAgent" ng-model="ddldestinationAgent" ng-options="item.AgencyName for item in AgencyMasterAllvalues track by item.ID">
                                                            </select>
                                                            @*<input type="text" disabled id="txtNotifyOld" ng-model="txtNotifyOld" class="form-control" />*@
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-3">
                                                            <label>Address</label>
                                                        </div>
                                                        <div class="col-md-9">
                                                            <textarea disabled ng-model="txtdestinationAgentAddress" id="txtdestinationAgentAddress" class="form-control"></textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <fieldset>
                                                    <legend>Destination Agent(New)</legend>
                                                </fieldset>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-3">
                                                            <label>Name</label>
                                                        </div>
                                                        <div class="col-md-9">
                                                            <select class="form-control my-select" id="ddldestinationAgentNew" ng-model="ddldestinationAgentNew" ng-options="item.AgencyName for item in AgencyMasterAllvalues track by item.ID">
                                                            </select>
                                                            @*<input type="text" id="txtNotifyNew" ng-model="txtNotifyNew" class="form-control" />*@
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-3">
                                                            <label>Address</label>
                                                        </div>
                                                        <div class="col-md-9">
                                                            <textarea ng-model="txtdestinationAgentAddressNewAddr" id="txtdestinationAgentAddressNewAddr" class="form-control"></textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>

                                @*--des--*@



                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <fieldset>
                                                    <legend>Marks & Nos(Old)</legend>
                                                </fieldset>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <textarea disabled ng-model="txtMarks" id="txtMarks" style="height:180px!important;" class="form-control"></textarea>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <fieldset>
                                                    <legend>Marks & Nos(New)</legend>
                                                </fieldset>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <textarea ng-model="txtMarksNew" id="txtMarksNew" style="height:180px!important;" class="form-control"></textarea>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <fieldset>
                                                    <legend>Cargo Description(Old)</legend>
                                                </fieldset>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <textarea disabled ng-model="txtCargoDesc" id="txtCargoDesc" style="height:180px!important;" class="form-control"></textarea>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <fieldset>
                                                    <legend>Cargo Description(New)</legend>
                                                </fieldset>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <textarea ng-model="txtNewCargoDesc" id="txtNewCargoDesc" style="height:180px!important;" class="form-control"></textarea>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>



                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <fieldset>
                                                    <legend>PORTS(Old)</legend>
                                                </fieldset>
                                            </div>
                                        </div>

                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-3">
                                                        <label>POR</label>
                                                    </div>
                                                    <div class="col-md-9">
                                                        <select id="ddlPOO" disabled class="form-control my-select" ng-model="ddlPOO" options="{ allowClear: true }" ng-options="item.CityName for item in CityAllvalues track by item.ID"></select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-3">
                                                        <label>POL</label>
                                                    </div>
                                                    <div class="col-md-9">
                                                        <select id="ddlPOL" disabled class="form-control my-select" ng-model="ddlPOL" options="{ allowClear: true }" ng-options="item.PortName for item in PortAllvalues track by item.ID"></select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-3">
                                                        <label>POD</label>
                                                    </div>
                                                    <div class="col-md-9">
                                                        <select id="ddlPOD" disabled class="form-control my-select" ng-model="ddlPOD" options="{ allowClear: true }" ng-options="item.PortName for item in PortAllvalues track by item.ID"></select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-3">
                                                        <label>FPOD</label>
                                                    </div>
                                                    <div class="col-md-9">
                                                        <select id="ddlFPOD" disabled class="form-control my-select" ng-model="ddlFPOD" options="{ allowClear: true }" ng-options="item.CityName for item in CityAllvalues track by item.ID"></select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                    </div>
                                    <div class="col-md-6">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <fieldset>
                                                    <legend>PORTS(New)</legend>
                                                </fieldset>
                                            </div>
                                        </div>

                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-3">
                                                        <label>POR</label>
                                                    </div>
                                                    <div class="col-md-9">
                                                        <select id="ddlPOONew" class="form-control my-select" ng-model="ddlPOONew" options="{ allowClear: true }" ng-options="item.CityName for item in CityAllvalues track by item.ID"></select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-3">
                                                        <label>POL</label>
                                                    </div>
                                                    <div class="col-md-9">
                                                        <select id="ddlPOLNew" class="form-control my-select" ng-model="ddlPOLNew" options="{ allowClear: true }" ng-options="item.PortName for item in PortAllvalues track by item.ID"></select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-3">
                                                        <label>POD</label>
                                                    </div>
                                                    <div class="col-md-9">
                                                        <select id="ddlPODNew" class="form-control my-select" ng-model="ddlPODNew" options="{ allowClear: true }" ng-options="item.PortName for item in PortAllvalues track by item.ID"></select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-3">
                                                        <label>FPOD</label>
                                                    </div>
                                                    <div class="col-md-9">
                                                        <select id="ddlFPODNew" class="form-control my-select" ng-model="ddlFPODNew" options="{ allowClear: true }" ng-options="item.CityName for item in CityAllvalues track by item.ID"></select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>


                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <fieldset>
                                                    <legend>TRANSHIPMENT(OLD)</legend>
                                                </fieldset>
                                            </div>
                                        </div>

                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-3">
                                                        <label>T/S PORT</label>
                                                    </div>
                                                    <div class="col-md-9">
                                                        <select class="form-control my-select" disabled id="ddlTSPort" ng-model="ddlTSPort" ng-options="item.PortName for item in PortAllvalues track by item.ID">
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-3">
                                                        <label>T/S AGENT</label>
                                                    </div>
                                                    <div class="col-md-9">
                                                        <select class="form-control my-select" disabled id="ddlTranshipmentAgent" ng-model="ddlTranshipmentAgent" ng-options="item.AgencyName for item in TranshimentMasterAllvalues track by item.ID">
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="col-md-6">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <fieldset>
                                                    <legend>TRANSHIPMENT(NEW)</legend>
                                                </fieldset>
                                            </div>
                                        </div>

                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-3">
                                                        <label>T/S PORT</label>
                                                    </div>
                                                    <div class="col-md-9">
                                                        <select class="form-control my-select" id="ddlTSPortNew" ng-model="ddlTSPortNew" ng-options="item.PortName for item in PortAllvalues track by item.ID">
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-3">
                                                        <label>T/S AGENT</label>
                                                    </div>
                                                    <div class="col-md-9">
                                                        <select class="form-control my-select" id="ddlTranshipmentAgentNew" ng-model="ddlTranshipmentAgentNew" ng-options="item.AgencyName for item in TranshimentMasterAllvaluesNew track by item.ID">
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="row">
                                    <div class="col-md-12 padlr0">
                                        <div class="col-md-12 pickupdiv padlr0">
                                            <div class="col-md-12">
                                                <h5 class="cardtitle">Container Details</h5>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="material-datatables" style="overflow-y:scroll;height:200px;">

                                                    <table class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">
                                                        <thead>
                                                            <tr>
                                                                <th>Correction Type</th>
                                                                <th>Container No</th>
                                                                <th>Size</th>
                                                                <th>Seal Number</th>
                                                                <th>No.Of Package</th>
                                                                <th>Pkg Type</th>
                                                                <th>Gross.Wt</th>
                                                                <th>Net.Wt</th>
                                                                <th>VGM</th>
                                                                <th>CBM</th>
                                                            </tr>
                                                        </thead>

                                                        <tbody>
                                                            <tr ng-repeat="i in CntrBolDtls ">
                                                                <td>Old</td>
                                                                <td>{{i.CntrNo}}</td>
                                                                <td>{{i.Size}}</td>
                                                                <td>{{i.SealNo}}</td>
                                                                <td>{{i.NoOfPkg}}</td>
                                                                <td>{{i.PakgType}}</td>
                                                                <td>{{i.GrsWt}}</td>
                                                                <td>{{i.NtWt}}</td>
                                                                <td>{{i.VGM}}</td>
                                                                <td>{{i.CBM}}</td>
                                                            </tr>


                                                        </tbody>
                                                    </table>

                                                </div>
                                            </div>

                                            <div class="col-md-12">
                                                <div class="material-datatables" style="overflow-y:scroll;height:200px;">

                                                    <table class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">
                                                        <thead>
                                                            <tr>
                                                                <th>Correction Type</th>
                                                                <th>Container No</th>
                                                                <th>Size</th>
                                                                <th>Seal Number</th>
                                                                <th>No.Of Package</th>
                                                                <th>Pkg Type</th>
                                                                <th>Gross.Wt</th>
                                                                <th>Net.Wt</th>
                                                                <th>VGM</th>
                                                                <th>CBM</th>
                                                            </tr>
                                                        </thead>

                                                        <tbody>
                                                            <tr ng-repeat="gR in DynamicGridContainer">
                                                                <td>New</td>

                                                                <td>{{gR.CntrNo}}</td>
                                                                <td>{{gR.Size}}</td>

                                                                <td><input id="txtSealNo" autocomplete="off" ng-model="gR.SealNo" class="form-control" /></td>
                                                                <td><input id="txtNoOfPkg" ng-model="gR.NoOfPkg" autocomplete="off" onkeypress="return numericvalidation();" class="form-control" /></td>
                                                                <td><select style="width:60px;" class="form-control" id="ddlPakgType" ng-model="gR.PakgType" options="{ allowClear: true }" ng-options="item.CargoName for item in CargoMasterAllvalues track by item.ID"></select></td>
                                                                <td><input id="txtGrsWt" onkeypress="return numericvalidation();" autocomplete="off" ng-model="gR.GrsWt" class="form-control" /></td>
                                                                <td><input id="txtNtWt" onkeypress="return numericvalidation();" autocomplete="off" ng-model="gR.NtWt" class="form-control" /></td>
                                                                <td><input id="txtVGM" onkeypress="return numericvalidation();" autocomplete="off" ng-model="gR.VGM" class="form-control" /></td>
                                                                <td><input id="txtCBM" onkeypress="return numericvalidation();" autocomplete="off" ng-model="gR.CBM" class="form-control" /></td>
                                                                <td style="display:none;"><input type="hidden" id="HDCntrID" class="form-control" ng-model="gRow.CntrID" /></td>

                                                            </tr>


                                                        </tbody>
                                                    </table>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>



                    </div>
                </div>

            </div>
        </div>

    </div>
</div>
<script>
    $(document).ready(function () {
        // Initialise the wizard
        demo.initMaterialWizard();
        setTimeout(function () {
            $('.card.card-wizard').addClass('active');
        }, 600);
    });
</script>
<script>
    $(document).ready(function () {
        // initialise Datetimepicker and Sliders
        $('.datepicker').datetimepicker({
            format: 'DD/MM/YYYY',

        });
    });
</script>