@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.full.min.js"></script>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.9/angular.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/danialfarid-angular-file-upload/12.2.13/ng-file-upload.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.13.5/xlsx.full.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.13.5/jszip.js"></script>

<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" />

<style>
    /* .table > tbody > tr > td
    {
        width:100%;
    }
        .table > tbody > tr > td .material-datatables select.form-control
        {
            width:100px!important;
        }*/
    element.style {
    }

    .table > tbody > tr > td {
        font-size: 12px !important;
    }

    .select2-container--default.select2-container--open.select2-container--above .select2-selection--single, .select2-container--default.select2-container--open.select2-container--above .select2-selection--multiple {
        border-top-left-radius: 0;
        border-top-right-radius: 0;
    }

    .select2-container--default .select2-selection--single {
        background-color: #fff;
        border: 1px solid #aaa;
        border-radius: 4px;
    }

    .select2-container .select2-selection--single {
        box-sizing: border-box;
        cursor: pointer;
        display: block;
        height: 28px;
        user-select: none;
        -webkit-user-select: none;
    }

    .btnuser {
        float: right;
        font-size: 14px;
        padding: 3px 7px;
    }

    .table.ratetable > tbody > tr > td, .table.ratetable > tbody > tr > th, .table.ratetable > tfoot > tr > td, .table.ratetable > tfoot > tr > th, .table.ratetable > thead > tr > td, .table.ratetable > thead > tr > th {
        padding: 6px 4px;
        font-size: 13px;
    }

    @@media(max-width:1280px) {
        .bookingimg {
            width: 635px !important;
        }

        .pol {
            /*padding-left:147px!important;*/
            margin-left: -9px !important;
        }

        .pod {
            /* padding-left:242px!important;*/
            margin-left: -13px !important;
        }
    }
</style>
<script type="text/javascript">
   /// var LayoutApp = angular.module('MyApp', ['ngFileUpload'])

    LayoutApp.controller('MyController', function ($scope, $http, $timeout) {

        $("#overlay").show();
        $(document).ready(function () {
            $('.my-select').select2({

                placeholder: "--Select--",
                allowClear: true,
                width: '100%'
            });
        });



        $scope.IsVisible = false;
        $scope.isDisabledBooking = true;
        $scope.isDisabledRRNo = true;
        $scope.isDisabledParty = true;
        $scope.isDisabledPOL = true;
        $scope.isDisabledShipmentType = true;
        $scope.isDisabledServiceType = true;
        $scope.isDisabledSalesPerson = true;
        $scope.isDisabledVesVoy = true;
        $scope.isDisabledVol = true;
        $scope.isDisabledBLType = true;
        $scope.isDisabledMotherBL = true;
        $scope.isDisabledFreeDays = true;
        $scope.ConfirmPartydisable = false;

        $scope.RemoveBookingPartyShow = true;
        $scope.ddlStatusSearch = { ID: 4 };

        $scope.HDArrayIndex = "";

        $scope.TypeofUnit = [
            { 'name': '--select--', 'ID': 0 },
            { 'name': 'KGS', 'ID': 1 },
            { 'name': 'MT', 'ID': 2 }

        ];


        $scope.NofoOrgineValues = [
            { 'name': '--select--', 'ID': 0 },
            { 'name': '1', 'ID': 1 },
            { 'name': '2', 'ID': 2 },
            { 'name': '3', 'ID': 3 }
        ];

        $scope.CargoReleaseStatus = [
            { 'name': '--select--', 'ID': 0 },
            { 'name': 'Pending', 'ID': 1 },
            { 'name': 'Approval', 'ID': 2 },

        ];

        $scope.RRStatusValueAll = [

            { 'Status': 'PENDING', 'ID': 1 },
            { 'Status': 'REJECTED', 'ID': 2 },
            { 'Status': 'RE-QUOTE', 'ID': 3 },
            { 'Status': 'APPROVED', 'ID': 4 }
        ];

        $scope.ModuleAllvalues = null;
        $scope.fillModuleValues = function () {
            var Datavalue = {};
            Datavalue.ID = "16"; //GeneralMaster Table seqNo
            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/ModuleValues/',
                data: JSON.stringify(Datavalue)
            }).then(function (result) {
                $timeout(function () {
                    $scope.ModuleAllvalues = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillModuleValues();

        $scope.BlTypesAllvalues = null;
        $scope.fillBLTypesValues = function () {
            var Datavalue = {};
            Datavalue.ID = "17"; //GeneralMaster Table seqNo
            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/ModuleValues/',
                data: JSON.stringify(Datavalue)
            }).then(function (result) {
                $timeout(function () {
                    $scope.BlTypesAllvalues = result.data;
                    $scope.ddlBLType = { ID: result.data[0].ID };



                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillBLTypesValues();

        $scope.FreightAllvalues = null;
        $scope.fillFreightAllvalues = function () {
            var Datavalue = {};
            Datavalue.ID = "9"; //GeneralMaster Table seqNo
            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/ModuleValues/',
                data: JSON.stringify(Datavalue)
            }).then(function (result) {
                $timeout(function () {
                    $scope.FreightAllvalues = result.data;
                    //$scope.ddlFreight = { ID: result.data[0].ID };

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillFreightAllvalues();

        $scope.BusinessTypesvalues = null;
        $scope.fillBusinessTypesvalues = function () {

            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/BusinessTypes/',
                data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.BusinessTypesvalues = result.data;
                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        }
        $scope.fillBusinessTypesvalues();


        $scope.BookingPartyAllvalues = null;
        $scope.fillBookingPartyValues = function () {

            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/CustomerMaster/',
                data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.BookingPartyAllvalues = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillBookingPartyValues();

        $scope.CustomerMasterAllvalues = null;
        $scope.fillCustomerMasterValues = function () {

            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/CustomerMaster/',
                data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.CustomerMasterAllvalues = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillCustomerMasterValues();

        $scope.AgencyMasterAllvalues = null;
        $scope.fillAgencyMasterValues = function () {

            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/AgencyMaster/',
                data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.AgencyMasterAllvalues = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillAgencyMasterValues();

        $scope.CargoMasterAllvalues = null;
        $scope.fillCargoMasterValues = function () {

            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/CargoTypesMaster/',
                data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.CargoMasterAllvalues = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillCargoMasterValues();

        $scope.CntrNoValues = null;
        $scope.fileCntrNovalues = function () {

            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/CntrNoValues/',
                data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.CntrNoValues = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fileCntrNovalues();


        $scope.voyageTypes = null;
        $scope.fillVoygaeTypes = function (bkgid) {
            var Datavalue = {};
            Datavalue.ID = bkgid; //GeneralMaster Table seqNo
            $http({
                method: 'POST',
                url: '/api/DocumentApi/ModuleValues/',
                data: JSON.stringify(Datavalue)
            }).then(function (result) {
                $timeout(function () {
                    $scope.voyageTypes = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
       // $scope.fillVoygaeTypes();

        $scope.LegInformation = null;
        $scope.fillLegInformation = function () {
            var Datavalue = {};
            Datavalue.ID = "26"; //GeneralMaster Table seqNo
            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/ModuleValues/',
                data: JSON.stringify(Datavalue)
            }).then(function (result) {
                $timeout(function () {
                    $scope.LegInformation = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillLegInformation();

        $scope.VesselNameAllvalues = null;
        $scope.fillVesselNameValues = function () {
            var Datavalue = {};
            Datavalue.AgencyID = localStorage.getItem("AgencyID");
            $http({
                method: 'POST',
               // url: '/api/Home/VesVoyMasterByAgency/',
                url: '/api/Home/VesVoyWithOutAgenctMaster/',
                data: JSON.stringify(Datavalue),
            }).then(function (result) {
                $timeout(function () {
                    $scope.VesselNameAllvalues = result.data;
                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillVesselNameValues();

        $scope.PortAllvalues = null;
        $scope.fillPortsValues = function () {
            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/PortValues/',
                data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.PortAllvalues = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillPortsValues();

        $scope.CityAllvalues = null;
        $scope.fillCityValues = function () {
            $http({
                method: 'POST',
                url: '/api/Home/cityBind/',
                data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.CityAllvalues = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillCityValues();

        $scope.BookingSearchAllVeiw = null;
        $scope.BookingSearch = function () {
            $('#overlay').fadeIn().delay(100).fadeOut();
            var BussData = {}


            BussData.POO = $("#ddlPlaceOfOriginSearch").val();
            BussData.FPOD = $("#ddlPortOfDestinationSearch").val();
            BussData.RatesheetNo = $("#ddlRRNoSearch").val();
            BussData.BookingParty = $("#ddlbookingParty").val();
            BussData.POL = $("#ddlPortOfLoadingSearch").val();
            BussData.POD = $("#ddlPortOfDischargeSearch").val();
            BussData.ShipmentTypes = $("#ddlShipmenTypeSearch").val();
            BussData.AgentID = $("#ddlAgencySearch").val();
            BussData.ShipperID = $("#ddlShipper").val();
            BussData.RSStatus = $("#ddlStatusSearch").val();
            BussData.LogInAgentID = localStorage.getItem("AgencyID");
            $http({
                method: 'POST',
                url: '/api/DocumentApi/MRGExistingMasterRecord/',
                data: JSON.stringify(BussData)
            }).then(function (result) {
                $timeout(function () {
                    $scope.BookingSearchAllVeiw = result.data;


                    $scope.totalItems = $scope.BookingSearchAllVeiw.length;
                    $scope.currentPage = 1;
                    $scope.numPerPage = 10;
                    $scope.paginate = function (value) {
                        var begin, end, index;
                        begin = ($scope.currentPage - 1) * $scope.numPerPage;
                        end = begin + $scope.numPerPage;
                        index = $scope.BookingSearchAllVeiw.indexOf(value);
                        return (begin <= index && index < end);
                    };


                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        }
        $scope.DynamicGridCustomer = [{ BCID: "", PartyTypeID: "", PartyType: "", PartyID: "", PartyName: "", Address: "" }];
        $scope.DynamicGridCustomer.splice(0, 1);

        $scope.BookingPartyRowAdd = function (DynamicGridCustomer) {
            var validation = "";


            var ddlPartyType = $('#ddlPartyType').val();
            if (ddlPartyType == "?" || ddlPartyType == null) {
                validation += "<span style='color:red;'>*</span> <span>Please Select Party Type</span></br>"
            }

            var ddlPartyName = $('#ddlPartyName').val();
            if (ddlPartyName == "?" || ddlPartyName == null) {
                validation += "<span style='color:red;'>*</span> <span>Please Select Party Name</span></br>"
            }

            if (validation != "") {
                ShowPopup(validation);
                return false;
            }

            var TIDValue;
            TIDValue = ($scope.BCID == "") ? 0 : $scope.BCID;
            var val = {
                'BCID': TIDValue,
                'PartyTypeID': $("#ddlPartyType").val(),
                'PartyType': $("#ddlPartyType option:selected").text(),
                'PartyID': $("#ddlPartyName").val(),
                'PartyName': $("#ddlPartyName option:selected").text(),
                'Address': $("#txtAddress").val()


            };


            if ($scope.HDArrayIndex != null && $scope.HDArrayIndex.length != 0) {
                $scope.DynamicGridCustomer[$scope.HDArrayIndex] = val;
            } else {
                $scope.DynamicGridCustomer.push(val);
            }
            $("#ddlPartyType").val(null).trigger("change");
            $("#ddlPartyName").val(null).trigger("change");
            $scope.txtAddress = "";
            $scope.HDArrayIndex = "";
            $scope.BCID = 0;
        }

        $scope.SelectvaluesBookingParty = function (DynamicGrid, index) {
            $scope.HDArrayIndex = index;
            $scope.BCID = $scope.DynamicGridCustomer[index].BCID;
            $('#ddlPartyType').select2().val($scope.DynamicGridCustomer[index].PartyTypeID);
            $('#ddlPartyName').select2().val($scope.DynamicGridCustomer[index].PartyID);
            $scope.txtAddress = $scope.DynamicGridCustomer[index].Address;
            $('#ddlPartyType').select2().val($scope.DynamicGridCustomer[index].PartyTypeID);
            $('#ddlPartyName').select2().val($scope.DynamicGridCustomer[index].PartyID);
        }

        $scope.CheckCustomerAddress = function (val) {

            var Datavalue = {};
            Datavalue.ID = val.PartyName.ID;
            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/CustomerAddress/',
                data: JSON.stringify(Datavalue)
            }).then(function (result) {
                $timeout(function () {
                    val.Address = result.data[0].CustomerAddress;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });

        }

        $("#ddlPartyName").change(function () {

            var Datavalue = {};
            Datavalue.ID = $("#ddlPartyName").val();
            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/CustomerAddress/',
                data: JSON.stringify(Datavalue)
            }).then(function (result) {
                $timeout(function () {

                    $scope.txtAddress = result.data[0].CustomerAddress;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });

        });

        $scope.CheckCustomerAddress = function (val) {

            var Datavalue = {};
            Datavalue.ID = val.PartyName.ID;
            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/CustomerAddress/',
                data: JSON.stringify(Datavalue)
            }).then(function (result) {
                $timeout(function () {
                    val.Address = result.data[0].CustomerAddress;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });

        }

        $scope.DynamicGridContainer = [{ BCNID: "", ContainerNo: "", Size: "", ISOCode: "", SealNo: "", NoOfPkg: "", PakgType: "", GrsWt: "", NtWt: "", VGM: "", CBM: "", GrsWtType: "", NtWtType: "", HSCode: "", Cargo: ""}]
        $scope.ContainerRowAdd = function (val, i) {
            if (val[i].ContainerNo.ID == "") {
                swal("Please enter ContainerNo");
                return;
            }

            $scope.DynamicGridContainer.push({
                'BCNID': "",
                'ContainerNo': "",
                'Size': "",
                'ISOCode': "",
                'SealNo': "",
                'NoOfPkg': "",
                'PakgType': "",
                'GrsWt': "",
                'NtWt': "",
                'VGM': "",
                'CBM': "",
                'GrsWtType': "",
                'NtWtType': "",
                'HSCode': "",
                'Cargo': ""
            });
        }
        $scope.SelectContainer = function (val) {

            var Datavalue = {};
            Datavalue.CntrID = val.ContainerNo.ID;
            $http({
                method: 'POST',
                url: '/api/DocumentApi/BOLCntrNoSelectViewRecord/',
                data: JSON.stringify(Datavalue)
            }).then(function (result) {
                $timeout(function () {
                    val.ISOCode = result.data[0].ISOCode;
                    val.Size = result.data[0].Size;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });

        }


        $scope.DynamicGridVesselVoyage = [{ VID: "", VoyageTypes: "", LegInformation: "", VesVoy: "", LoadPort: "", NextPort: "", ETA: "", ETD: "" }]
        $scope.VoyageRowAdd = function (val, i) {
            if (val[i].VesVoy.ID == "") {
                swal("Please enter VeslVoyage");
                return;
            }

            $scope.DynamicGridVesselVoyage.push({
                'VID': "",
                'VoyageTypes': "",
                'LegInformation': "",
                'VesVoy': "",
                'LoadPort': "",
                'NextPort': "",
                'ETA': "",
                'ETD': ""
            });
        }

        $scope.SelectVesselVoyage = function (val) {

            var Datavalue = {};
            Datavalue.VesVoyID = val.VesVoy.ID;
            $http({
                method: 'POST',
                url: '/api/DocumentApi/BOLVesselVoyage/',
                data: JSON.stringify(Datavalue)
            }).then(function (result) {
                $timeout(function () {

                    val.LoadPort = { ID: result.data[0].CurPortID };
                    val.NextPort = { ID: result.data[0].NextPortID };
                    val.ETA = result.data[0].ETA;
                    val.ETD = result.data[0].ETD;

                    //val.Size = result.data[0].Size;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });

        }

        $scope.SaveRecord = function (data, datav, datavX) {
            var validation = "";
            var txtBookingNo = $('#txtBookingNo').val();
            if (txtBookingNo == "") {
                validation += "<span style='color:red;'>*</span> <span>Please Select Booking No</span></br>"
            }

            var ddlnoofOriginal = $('#ddlnoofOriginal').val();
            if (ddlnoofOriginal == "?") {
                validation += "<span style='color:red;'>*</span> <span>Please Select No.Of Original</span></br>"
            }

            var ddlSurrender = $('#ddlSurrender').val();
            if (ddlSurrender == "?") {
                validation += "<span style='color:red;'>*</span> <span>Please Select  Surrendar Status</span></br>"
            }

            var txtMarks = $('#txtMarks').val();
            if (txtMarks == "") {
                validation += "<span style='color:red;'>*</span> <span>Please Enter Marks & Number</span></br>"
            }
            var txtMarks = $('#txtCargoDesc').val();
            if (txtMarks == "") {
                validation += "<span style='color:red;'>*</span> <span>Please Enter Cargo Description</span></br>"
            }

            var ddlBLType = $('#ddlBLType').val();
            if (ddlBLType == "?") {
                validation += "<span style='color:red;'>*</span> <span>Please Select BL Type</span></br>"
            }

            //var txtFreeDays = $('#txtFreeDays').val();
            //if (txtFreeDays == "") {
            //    validation += "<span style='color:red;'>*</span> <span>Please Enter FreeDays</span></br>"
            //}

            //var ddlFreight = $('#ddlFreight').val();
            //if (ddlFreight == "?") {
            //    validation += "<span style='color:red;'>*</span> <span>Please Select Freight Payment Centre</span></br>"
            //}

            var validation1
            var Shipperv = "";
            var Consignev = "";
            var Notify1 = "";
            angular.forEach(data, function (value, key) {
                validation1 = "";

                if (data[key].PartyTypeID != 1 && data[key].PartyTypeID != 2 && data[key].PartyTypeID != 3 && data[key].PartyTypeID != 12) {

                }
                else {
                    if (data[key].PartyTypeID == 1) {
                        Shipperv = "True";
                    }

                    if (data[key].PartyTypeID == 2) {
                        Consignev = "True";
                    }

                    if (data[key].PartyTypeID == 3) {
                        Notify1 = "True";
                    }

                    if (Shipperv != "True")
                        validation1 += "<span style='color:red;'>*</span> <span>Please select Party Shipper</span></br>"
                    if (Consignev != "True")
                        validation1 += "<span style='color:red;'>*</span> <span>Please select Party Consignee</span></br>"
                    if (Notify1 != "True")
                        validation1 += "<span style='color:red;'>*</span> <span>Please select Party Notify</span></br>"

                }


            });

            validation += validation1;
            var CntrNov = "";
            var NoOfPkgv = "";
            var PakageTypev = "";
            var GrsWtv = "";


            angular.forEach(datav, function (value, key)
            {
                CntrNov = datav[key].ContainerNo;
                NoOfPkgv = datav[key].NoOfPkg;
                PakageTypev = datav[key].PakgType;
                GrsWtv = datav[key].GrsWt;
                HSCode = datav[key].HSCode;
                Cargo = datav[key].Cargo;

                if (CntrNov == "") {
                    validation += "<span style='color:red;'>*</span> <span>Please Enter Container No</span></br>"
                }
                if (NoOfPkgv == "") {
                    validation += "<span style='color:red;'>*</span> <span>Please Enter NoofPkg</span></br>"
                }
                if (PakageTypev == "") {
                    validation += "<span style='color:red;'>*</span> <span>Please select PakgTypes</span></br>"
                }

                if (GrsWtv == "") {
                    validation += "<span style='color:red;'>*</span> <span>Please Enter GrsWt</span></br>"
                }
                if (localStorage.getItem("AgencyID") == 3) {
                    if (HSCode == "") {
                        validation += "<span style='color:red;'>*</span> <span>Please Enter HSCode</span></br>"
                    }
                    if (Cargo == "") {
                        validation += "<span style='color:red;'>*</span> <span>Please Enter Cargo</span></br>"
                    }
                }
               
            });

            if (validation != "") {
                ShowPopup(validation);
                return false;
            }


            $('#overlay').show();

            var BussData = {}
            var Items = []
            var Itemsv = []
            var ItemsVX = []

            if ($scope.RegId == "")
                BussData.ID = 0;
            else
                BussData.ID = $scope.RegId;

            BussData.BLNumber = $scope.txtBookingNo;
            BussData.BkgID = $scope.BkgId;

            if ($("#ddlPOO").val() != "?")
                BussData.POOID = $("#ddlPOO").val();
            else
                BussData.POOID = 0;

            BussData.POLID = $("#ddlPOL").val();

            if ($("#ddlPOD").val() != "?")
                BussData.PODID = $("#ddlPOD").val();
            else
                BussData.PODID = 0;
            if ($("#ddlFPOD").val() != "?")
                BussData.FPODID = $("#ddlFPOD").val();
            else
                BussData.FPODID = 0;



            //BussData.BookingNo = $("#ddlBookingNo option:selected").text();
            BussData.NoofOriginal = $("#ddlnoofOriginal").val();
            BussData.SurrenderStatus = $("#ddlSurrender").val();
            BussData.MarkNo = $scope.txtMarks;
            BussData.CagoDescription = $scope.txtCargoDesc;
            BussData.BLTypes = $("#ddlBLType").val();
            if ($scope.txtFreeDays != "")
                BussData.FreeDays = $scope.txtFreeDays;
            else
                BussData.FreeDays = 0;


            if ($("#ddlFreight").val() != "?")
                BussData.FreightPaymentID = $("#ddlFreight").val();
            else
                BussData.FreightPaymentID = 0;

            BussData.FreightPayment = $("#ddlFreight option:selected").text();
            BussData.DesAgentID = $("#ddlAgent").val();
            BussData.MotherBL = $scope.txtMotherBLNo;
            BussData.AgentId = localStorage.getItem("AgencyID");
            BussData.VesVoyID = $scope.HDVesVoyID;
            BussData.CommodityTypeID = $scope.HDCommodityTypeID;
            BussData.VesVoy = $scope.txtVesVoy;
            BussData.BkgPartyID = $scope.HDBkgParty;
            BussData.SessionFinYear = "2023";
            BussData.AgentCode = localStorage.getItem("DocumentSuffix");
            BussData.Status = "1";
            BussData.UserID = localStorage.getItem("UserID");

            angular.forEach(data, function (value, key) {
                Items.push('Insert:' + data[key].BCID, data[key].PartyTypeID, data[key].PartyID, data[key].PartyType, data[key].PartyName, "Address:" + data[key].Address);

            });

            BussData.Items = Items.toString();

            var NetwetS = 0;
            var VGMS = 0;
            var CBMS = 0;
            var NetwetType = 0;
            angular.forEach(datav, function (value, key)
            {
                if (datav[key].NtWt == "")
                    NetwetS = 0;
                else
                    NetwetS = datav[key].NtWt;

                if (datav[key].NtWtType.ID == "")
                    NetwetType = 0;
                else
                    NetwetType = datav[key].NtWtType.ID;

                if (datav[key].VGM == "")
                    VGMS = 0;
                else
                    VGMS = datav[key].VGM;

                if (datav[key].CBM == "")
                    CBMS = 0;
                else
                    CBMS = datav[key].CBM;

                Itemsv.push('Insert:' + datav[key].BCNID, datav[key].ContainerNo.CntrNo, datav[key].ContainerNo.ID, datav[key].Size,
                    datav[key].ISOCode, datav[key].SealNo, datav[key].NoOfPkg, datav[key].PakgType.ID, datav[key].PakgType.CargoName, datav[key].GrsWt,
                    NetwetS, VGMS, CBMS, datav[key].GrsWtType.ID, NetwetType, datav[key].Cargo, 'HSCode:' + datav[key].HSCode);

            });
            BussData.ItemsCntr = Itemsv.toString();


            angular.forEach(datavX, function (value, key) {

                ItemsVX.push('Insert:' + datavX[key].VID, datavX[key].VoyageTypes.ID, datavX[key].LegInformation.ID, datavX[key].VesVoy.ID, datavX[key].LoadPort.ID, datavX[key].NextPort.ID, datavX[key].ETA, datavX[key].ETD);
            });
            BussData.ItemsVS = ItemsVX.toString();

            $http({
                method: 'POST',
                url: '/api/DocumentApi/BOLInsert',
                data: JSON.stringify(BussData),

            }).then(function (result) {
                $timeout(function () {
                    if (result.data.length > 0)
                    {
                        $scope.RegId = result.data[0].ID;
                        $scope.Enable();
                        ShowPopup(result.data[0].Message);
                        $('#overlay').hide();
                        var url = "/Document/BOLView";
                        setTimeout(function () { window.location.href = url; }, 2000);
                    }
                    else {

                        ShowPopup(result.data[0].Message);
                        $('#overlay').hide();
                    }

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {

                ShowPopup('There has been an error: ' + result);
            });


        }
        $(document).ready(function () {

            var queryString = new Array();
            if (window.location.search.split('?').length > 1) {
                var params = window.location.search.split('?')[1].split('&');
                for (var i = 0; i < params.length; i++) {
                    var key = params[i].split('=')[0];
                    var value = decodeURIComponent(params[i].split('=')[1]);
                    queryString[key] = value;
                }
            }
            $scope.fillVoygaeTypes(queryString["BkgPassID"]);
            if (queryString["BOLRegID"] != 0 && queryString["BkgPassID"] != null)
            {

                $scope.RegId = queryString["BOLRegID"].toString();
                $scope.BkgId = queryString["BkgPassID"].toString();
                $scope.FilBOLExsitingMaster(queryString["BOLRegID"].toString());
                $scope.FilBOLCustomerExistingDetails(queryString["BOLRegID"].toString());
                // $scope.FilBOLCntrExistingDetails(queryString["BOLRegID"].toString());
                $scope.FilBOLCntrExistingDetails(queryString["BkgPassID"].toString(), queryString["BOLRegID"].toString());
                $scope.FilBOLVesselVoyageExistingDetails(queryString["BkgPassID"].toString());

                document.getElementById("btnuploadExcel").disabled = true;
                document.getElementById("btnuploadExcel").style.cursor = 'not-allowed';

            }
            else {

                $scope.BkgId = queryString["BkgPassID"].toString();
                $scope.FilBkgExistingDetails(queryString["BkgPassID"].toString());
                $scope.FilBOLCntrExistingDetails(queryString["BkgPassID"].toString(), "0");
                $scope.FilBOLVesselVoyageExistingDetails(queryString["BkgPassID"].toString());
                document.getElementById("btnuploadExcel").disabled = false;
                document.getElementById("btnuploadExcel").style.cursor = 'allowed';

            }

        });

        $scope.FilBOLExsitingMaster = function (BOLRegID) {


            $("#overlay").show();
            var Datavalue = {};
            Datavalue.ID = BOLRegID;
            $http({
                method: 'POST',
                url: '/api/DocumentApi/BOLExistingViewRecord',
                data: JSON.stringify(Datavalue),

            }).then(function (result) {
                $timeout(function () {
                    if (result.data.length > 0) {
                        $scope.BLLockStatus = result.data[0].BLLockStatus;
                        $scope.BLStatus = result.data[0].Status;
                        $scope.RegId = result.data[0].ID;
                        $scope.txtBookingNo = result.data[0].BLNumber;
                        $scope.txtRRNo = result.data[0].RRNo;
                        $scope.txtBkgParty = result.data[0].BkgParty;
                        //$scope.txtPOO = result.data[0].POO;
                        //$scope.txtPOL = result.data[0].POL;
                        //$scope.txtPOD = result.data[0].POD;
                        //$scope.txtFPOD = result.data[0].FPOD;
                        $scope.ddlPOO = { ID: result.data[0].POOID };
                        $scope.ddlPOL = { ID: result.data[0].POLID };
                        $scope.ddlPOD = { ID: result.data[0].PODID };
                        $scope.ddlFPOD = { ID: result.data[0].FPODID };
                        $scope.txtShipmentType = result.data[0].ShipmentType;
                        $scope.txtServiceType = result.data[0].ServiceType;
                        $scope.txtSalesPerson = result.data[0].SalesPerson;
                        $scope.txtVesVoy = result.data[0].VesVoy;
                        $scope.txtVol = result.data[0].CntrCount;
                        $scope.ddlnoofOriginal = { ID: result.data[0].NoofOriginal };
                        $scope.ddlSurrender = { ID: result.data[0].SurrenderStatus };
                        $scope.txtMarks = result.data[0].MarkNo;
                        $scope.txtCargoDesc = result.data[0].CagoDescription;
                        $scope.ddlBLType = { ID: result.data[0].BLTypes };
                        $scope.txtFreeDays = result.data[0].FreeDays;
                        $scope.ddlFreight = { ID: result.data[0].FreightPaymentID };
                        $scope.ddlAgent = { ID: result.data[0].DesAgentID };
                        $scope.txtMotherBLNo = result.data[0].MotherBL;
                        $scope.txtResion = result.data[0].ReasonDescription;
                        $scope.ddlCargoReaselStatus = { ID: result.data[0].CargoReleaseStatus };
                        $scope.HDVesVoyID = result.data[0].VesVoyID;
                        $scope.HDCommodityTypeID = result.data[0].CommodityTypeID;
                        $scope.HDBkgParty = result.data[0].BkgPartyID;
                        $scope.ConfirmStatus = result.data[0].Status;



                        if (result.data[0].Status == "CONFIRMED")
                        {
                            $scope.Disable();
                        }
                        else
                        {
                            $scope.Enable();
                        }

                        if (result.data[0].intStatus == 0) {
                            document.getElementById("btnSave").disabled = false;
                            document.getElementById("btnSave").style.cursor = 'allowed';
                            document.getElementById("btnCancelled").disabled = true;
                            document.getElementById("btnCancelled").style.cursor = 'not-allowed';
                            document.getElementById("btnConfirm").disabled = true;
                            document.getElementById("btnConfirm").style.cursor = 'not-allowed';

                        }

                        if (result.data[0].CargoReleaseStatus != "") {
                            $scope.CargoRelStatus = "PENDING"
                        }
                        else {
                            $scope.CargoRelStatus = "APPROVAL"
                        }


                        $("input[name=shipment][value=" + result.data[0].ShipmentTypeID + "]").attr('checked', 'checked');

                    }

                    $("#overlay").hide();

                });
            }, function (result) {

                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            });
        }
        $scope.FilBOLCustomerExistingDetails = function (BOLRegID) {
            $("#overlay").show();
            var Datavalue = {};
            Datavalue.ID = BOLRegID;

            $http({
                method: 'POST',
                url: '/api/DocumentApi/BOLCustomerExistingViewRecord',
                data: JSON.stringify(Datavalue),

            }).then(function (result) {
                $timeout(function ()
                {
                    if (result.data.length > 0) {

                        $scope.DynamicGridCustomer = result.data;
                    }


                    $("#overlay").hide();
                });
            }, function (result) {

                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            });
        }
        $scope.FilBOLCntrExistingDetails = function (BOLRegID,BLIDv) {
            $("#overlay").show();
            var Datavalue = {};
            Datavalue.BkgID = BOLRegID;
            Datavalue.BLID = BLIDv;

            $http({
                method: 'POST',
                url: '/api/DocumentApi/BOLCntrExistingViewRecord',
                data: JSON.stringify(Datavalue),

            }).then(function (result) {

                $timeout(function () {
                    if (result.data.length > 0) {
                        if (result.data[0].CntrType != "") {
                            $scope.DynamicGridContainer.splice(0, 1);
                        }

                        angular.forEach(result.data, function (value, key) {
                            $scope.DynamicGridContainer.push({
                                'BCNID': result.data[key].BCNID,
                                'ContainerNo': { ID: result.data[key].CntrID },
                                'Size': result.data[key].Size,
                                'ISOCode': result.data[key].ISOCode,
                                'SealNo': result.data[key].SealNo,
                                'NoOfPkg': result.data[key].NoOfPkg,
                                'PakgType': { ID: result.data[key].PakgType },
                                'GrsWt': result.data[key].GrsWt,
                                'NtWt': result.data[key].NtWt,
                                'VGM': result.data[key].VGM,
                                'CBM': result.data[key].CBM,
                                'GrsWtType': { ID: result.data[key].GrsWtType },
                                'NtWtType': { ID: result.data[key].NtWtType },
                                'HSCode': result.data[key].HSCode,
                                'Cargo': result.data[key].Cargo,
                            });

                        });
                    }
                    else {


                    }
                    $("#overlay").hide();
                });
            }, function (result) {

                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            });
        }

        $scope.FilBOLVesselVoyageExistingDetails = function (BOLRegID) {
            $("#overlay").show();
            var Datavalue = {};
            Datavalue.BkgId = BOLRegID;

            $http({
                method: 'POST',

                url: '/api/DocumentApi/BkgVoyageDtlsExistingViewRecord',
                data: JSON.stringify(Datavalue),

            }).then(function (result) {
                $timeout(function () {
                    if (result.data.length > 0) {
                        if (result.data[0].VoyageTypes != "") {
                            $scope.DynamicGridVesselVoyage.splice(0, 1);
                        }

                        angular.forEach(result.data, function (value, key) {
                            $scope.DynamicGridVesselVoyage.push({
                                'VoyageTypes': { ID: result.data[key].VoyageTypes },
                                'LegInformation': { ID: result.data[key].LegInformation },
                                'VesVoy': { ID: result.data[key].VesVoyID },
                                'LoadPort': { ID: result.data[key].CurPortID },
                                'NextPort': { ID: result.data[key].NextPortID },
                                'ETA': result.data[key].ETA,
                                'ETD': result.data[key].ETD,
                                'VID': result.data[key].VID

                            });

                        });
                        $("#overlay").hide();
                    }
                    else {
                        $("#overlay").hide();
                    }
                });
            }, function (result) {

                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            });
        }

        $scope.FilBkgExistingDetails = function (BkgID) {
            $("#overlay").show();
            var BussData = {}
            BussData.BkgID = BkgID;
            $http({
                method: 'POST',
                url: '/api/DocumentApi/BOLBookingSelectViewRecord/',
                data: JSON.stringify(BussData),
            }).then(function (result) {
                $timeout(function () {
                    if (result.data.length > 0) {
                        $scope.BLLockStatus = "UNLOCK";
                        $scope.BLStatus = result.data[0].Status;
                        $scope.txtBookingNo = result.data[0].BLNumber;
                        $scope.txtRRNo = result.data[0].RRNo;
                        $scope.txtBkgParty = result.data[0].BkgParty;
                        $scope.ddlPOO = { ID: result.data[0].POOID };
                        $scope.ddlPOL = { ID: result.data[0].POLID };
                        $scope.ddlPOD = { ID: result.data[0].PODID };
                        $scope.ddlFPOD = { ID: result.data[0].FPOD };
                        $scope.txtShipmentType = result.data[0].ShipmentType;
                        $scope.txtServiceType = result.data[0].ServiceType;
                        $scope.txtSalesPerson = result.data[0].SalesPerson;
                        $scope.txtVesVoy = result.data[0].VesVoy;
                        $scope.txtVol = result.data[0].CntrCount;
                        $scope.txtMotherBLNo = result.data[0].BLNumber;
                        $scope.ddlAgent = { ID: result.data[0].DesAgentID };
                        $scope.ddlnoofOriginal = { ID: 3 };
                        $scope.ddlSurrender = { ID: 37 };
                        $scope.txtFreeDays = result.data[0].FreeDays;
                        $scope.HDVesVoyID = result.data[0].VesVoyID;
                        $scope.HDCommodityTypeID = result.data[0].CommodityTypeID;
                        $scope.HDBkgParty = result.data[0].BkgPartyID;
                        $scope.ddlFreight = { ID: result.data[0].FreightPaymentID };

                        $scope.DynamicGridCustomer.length = 0;


                        $scope.DynamicGridCustomer.push({

                            'BCID': "",
                            'PartyTypeID': 1,
                            'PartyType': "Shipper",
                            'PartyID': result.data[0].Shipper,
                            'PartyName': result.data[0].ShipperName,
                            'Address': result.data[0].Address

                        });
                        //$scope.ddlPartyType = { ID: 1 };
                        //$scope.ddlPartyName = { ID: result.data[0].Shipper };
                        //$scope.txtAddress = result.data[0].Address;

                        $scope.CargoRelStatus = "APPROVAL"

                        document.getElementById("btnSave").disabled = false;
                        document.getElementById("btnSave").style.cursor = 'allowed';
                        document.getElementById("btnCancelled").disabled = true;
                        document.getElementById("btnCancelled").style.cursor = 'not-allowed';
                        document.getElementById("btnConfirm").disabled = true;
                        document.getElementById("btnConfirm").style.cursor = 'not-allowed';
                    }
                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });

            ///VesselVoyage

            $http({
                method: 'POST',
                url: '/api/DocumentApi/BkgBOLVesselVoyage/',
                data: JSON.stringify(BussData),
            }).then(function (result)
            {
                if (result.data.length > 0) {
                    $timeout(function () {
                        if (result.data[0].CurPortID != "") {
                            $scope.DynamicGridVesselVoyage.splice(0, 1);
                        }

                        angular.forEach(result.data, function (value, key) {
                            $scope.DynamicGridVesselVoyage.push({
                                'VoyageTypes': { ID: 77 },
                                'LegInformation': { ID: 74 },
                                'VesVoy': { ID: result.data[key].VesVoyID },
                                'LoadPort': { ID: result.data[key].CurPortID },
                                'NextPort': { ID: result.data[key].NextPortID },
                                'ETA': result.data[key].ETA,
                                'ETD': result.data[key].ETD,

                            });

                        });

                    });
                }
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });

            $("#overlay").hide();
        }
        $scope.OpenBLReleasePage = function () {
            if (typeof $scope.RegId != 'undefined') {
                BLId = $scope.RegId;
                var url = "/Document/BLRelease?BOLRegID=" + encodeURIComponent(BLId) + "&BkgPassID=" + $scope.BkgId;
                window.location.href = url;
                //localStorage.setItem("GeoLocation", GeoLocation);
            }
            else {

                var validation = "";
                var txtBookingNo = $('#txtBookingNo').val();
                if (txtBookingNo == "") {
                    validation += "<span style='color:red;'>*</span> <span>Please Select Booking No</span></br>"
                }

                var ddlnoofOriginal = $('#ddlnoofOriginal').val();
                if (ddlnoofOriginal == "?") {
                    validation += "<span style='color:red;'>*</span> <span>Please Select No.Of Original</span></br>"
                }

                var ddlSurrender = $('#ddlSurrender').val();
                if (ddlSurrender == "?") {
                    validation += "<span style='color:red;'>*</span> <span>Please Select  Surrendar Status</span></br>"
                }

                var txtMarks = $('#txtMarks').val();
                if (txtMarks == "") {
                    validation += "<span style='color:red;'>*</span> <span>Please Enter Marks & Number</span></br>"
                }
                var txtMarks = $('#txtCargoDesc').val();
                if (txtMarks == "") {
                    validation += "<span style='color:red;'>*</span> <span>Please Enter Cargo Description</span></br>"
                }

                var ddlBLType = $('#ddlBLType').val();
                if (ddlBLType == "?") {
                    validation += "<span style='color:red;'>*</span> <span>Please Select BL Type</span></br>"
                }

                var txtFreeDays = $('#txtFreeDays').val();
                if (txtFreeDays == "") {
                    validation += "<span style='color:red;'>*</span> <span>Please Enter FreeDays</span></br>"
                }

                var ddlFreight = $('#ddlFreight').val();
                if (ddlFreight == "?") {
                    validation += "<span style='color:red;'>*</span> <span>Please Select Freight Payment Centre</span></br>"
                }

                var validation1
                var Shipperv = "";
                var Consignev = "";
                var Notify1 = "";
                angular.forEach($scope.DynamicGridCustomer, function (value, key) {
                    validation1 = "";

                    if ($scope.DynamicGridCustomer[key].PartyType.ID != 1 && $scope.DynamicGridCustomer[key].PartyType.ID != 2 && $scope.DynamicGridCustomer[key].PartyType.ID != 12) {

                    }
                    else {
                        if ($scope.DynamicGridCustomer[key].PartyType.ID == 1) {
                            Shipperv = "True";
                        }

                        if ($scope.DynamicGridCustomer[key].PartyType.ID == 2) {
                            Consignev = "True";
                        }

                        if ($scope.DynamicGridCustomer[key].PartyType.ID == 12) {
                            Notify1 = "True";
                        }

                        if (Shipperv != "True")
                            validation1 += "<span style='color:red;'>*</span> <span>Please select Party Shipper</span></br>"
                        if (Consignev != "True")
                            validation1 += "<span style='color:red;'>*</span> <span>Please select Party Consignee</span></br>"
                        if (Notify1 != "True")
                            validation1 += "<span style='color:red;'>*</span> <span>Please select Party Notify</span></br>"

                    }


                });

                validation += validation1;
                var CntrNov = "";
                var NoOfPkgv = "";
                var PakageTypev = "";
                var GrsWtv = "";


                angular.forEach($scope.DynamicGridContainer, function (value, key) {
                    CntrNov = $scope.DynamicGridContainer[key].ContainerNo;
                    NoOfPkgv = $scope.DynamicGridContainer[key].NoOfPkg;
                    PakageTypev = $scope.DynamicGridContainer[key].PakgType;
                    GrsWtv = $scope.DynamicGridContainer[key].GrsWt;
                    if (CntrNov == "") {
                        validation += "<span style='color:red;'>*</span> <span>Please Enter Container No</span></br>"
                    }
                    if (NoOfPkgv == "") {
                        validation += "<span style='color:red;'>*</span> <span>Please Enter NoofPkg</span></br>"
                    }
                    if (PakageTypev == "") {
                        validation += "<span style='color:red;'>*</span> <span>Please select PakgTypes</span></br>"
                    }

                    if (GrsWtv == "") {
                        validation += "<span style='color:red;'>*</span> <span>Please Enter GrsWt</span></br>"
                    }

                });

                if (validation != "") {
                    ShowPopup(validation);
                    return false;
                }


                //$('#overlay').show();
            }
        }

        $scope.ExportDETPage = function () {
            if (typeof $scope.RegId != 'undefined') {
                BLId = $scope.RegId;
                var url = "/Document/ExpDet?BOLRegID=" + encodeURIComponent(BLId) + "&BkgPassID=" + $scope.BkgId;
                window.location.href = url;
            }
            else {

                ShowPopup("Please Generate BOL");
            }
        }

        $scope.ExportTariffPage = function () {
            if (typeof $scope.RegId != 'undefined') {
                BLId = $scope.RegId;
                var url = "/Document/ExpTariffView?BOLRegID=" + encodeURIComponent(BLId) + "&BkgPassID=" + $scope.BkgId;
                window.location.href = url;
            }
            else {

                ShowPopup("Please Generate BOL");
            }
        }



        $scope.PartBLOnclick = function () {
            if ($scope.ConfirmStatus != "CONFIRMED") {
                ShowPopup("Mother BL is in Draft status kindly confirm");
                return;
            }


            if ($('#ddlBLType').val() == "40") {
                $scope.IsVisible = true;
                $scope.RegId = 0;
                $scope.ddlBLType = { ID: 42 };
                $scope.txtBookingNo = "";
                $scope.isDisabledBooking = false;
                document.getElementById("txtBookingNo").style.backgroundColor = "transparent";
                $scope.isDisabledBooking = false;
                document.getElementById("txtBookingNo").style.backgroundColor = "transparent";
                $scope.ControlMaindisable = false;
                document.getElementById("btnSave").disabled = false;
                document.getElementById("btnSave").style.cursor = 'pointer';
                document.getElementById("btnCancelled").disabled = false;
                document.getElementById("btnCancelled").style.cursor = 'pointer';
                document.getElementById("btnConfirm").disabled = false;
                document.getElementById("btnConfirm").style.cursor = 'pointer';
                ShowPopup("PartBL Opened");
            }
            else {
                ShowPopup("Only Mother BL should be Part BL");
            }
        }

        $scope.HouseBLOnclick = function () {
            if ($scope.ConfirmStatus != "CONFIRMED") {
                ShowPopup("Mother BL is in Draft status kindly confirm");
                return;
            }


            if ($('#ddlBLType').val() == "40") {
                $scope.IsVisible = true;
                $scope.RegId = 0;
                $scope.ddlBLType = { ID: 43 };
                $scope.txtBookingNo = "";
                $scope.isDisabledBooking = false;
                document.getElementById("txtBookingNo").style.backgroundColor = "transparent";
                $scope.ControlMaindisable = false;
                document.getElementById("btnSave").disabled = false;
                document.getElementById("btnSave").style.cursor = 'pointer';
                document.getElementById("btnCancelled").disabled = false;
                document.getElementById("btnCancelled").style.cursor = 'pointer';
                document.getElementById("btnConfirm").disabled = true;
                document.getElementById("btnConfirm").style.cursor = 'not-allowed';
                ShowPopup("HouseBL Opened");
            }
            else {
                ShowPopup("Only Mother BL should be House BL");
            }

        }

        $scope.SwitchOnclick = function () {
            if ($scope.ConfirmStatus != "CONFIRMED") {
                ShowPopup("Mother BL is in Draft status kindly confirm");
                return;
            }

            if ($('#ddlBLType').val() == "40") {
                $scope.IsVisible = true;
                $scope.RegId = 0;
                $scope.ddlBLType = { ID: 41 };
                $scope.txtBookingNo = "";
                $scope.isDisabledBooking = false;
                $scope.isDisabledPOL = false;
                $scope.isDisabledParty = false;
                $scope.isDisabledBooking = false;
                document.getElementById("txtBookingNo").style.backgroundColor = "transparent";
                document.getElementById("btnSave").disabled = false;
                document.getElementById("btnSave").style.cursor = 'pointer';
                document.getElementById("btnCancelled").disabled = false;
                document.getElementById("btnCancelled").style.cursor = 'pointer';
                document.getElementById("btnConfirm").disabled = true;
                document.getElementById("btnConfirm").style.cursor = 'not-allowed';
                ShowPopup("SwitchBL Opened");
            }
            else {
                ShowPopup("Only Mother BL should be House SwitchBL");
            }
        }

        $scope.RRonclick = function () {

            if ($scope.txtRRNo != "UNLINKED" && $scope.txtRRNo != "")
            {
                ShowPopup("Already RR Linked");
                return false;
            }
            $('#demoModal').modal('show');
            $scope.fillRRNumbervalues();
            $scope.fillShipmentTypeValues();

        }

        $scope.ExemptionOnclick = function () {

            $('#ModalExemption').modal('show');
            $scope.ExBLNumber = $scope.txtBookingNo;
            $scope.ExBkgParty = $scope.txtBkgParty;
            $scope.ExPOL = $("#ddlPOL option:selected").text();
            $scope.ExPOD = $("#ddlPOD option:selected").text();
            $scope.ExSales = $scope.txtSalesPerson;
        }

        $scope.CargoReleaseOnclick = function () {
            if (typeof $scope.RegId != 'undefined') {

                $('#ModalCargoRelease').modal('show');
                $scope.CargoReleaseBLNumber = $scope.txtBookingNo;
                $scope.CargoReleasePOL = $("#ddlPOL option:selected").text();
                $scope.CargoReleasePOD = $("#ddlPOD option:selected").text();
            }
            else {

                ShowPopup("Please Generate BOL");
            }


        }


        $scope.RRNumbervalues = null;
        $scope.fillRRNumbervalues = function () {
            var BussData = {};
            BussData.AgencyID = localStorage.getItem("AgencyID");
            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/RRMaster/',
                data: JSON.stringify(BussData),
            }).then(function (result) {
                $timeout(function () {
                    $scope.RRNumbervalues = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };

        $scope.ShipmentTypeAllvalues = null;
        $scope.fillShipmentTypeValues = function () {
            var Datavalue = {};
            Datavalue.ID = "1"; //GeneralMaster Table seqNo
            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/ModuleValues/',
                data: JSON.stringify(Datavalue)
            }).then(function (result) {
                $timeout(function () {
                    $scope.ShipmentTypeAllvalues = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };



        $scope.ChekBoxRRate = function (RRIDv) {

            var BussData = {}
            BussData.BkgID = $scope.BkgId;
            BussData.RRID = RRIDv;
            $http({
                method: 'POST',
                url: '/api/DocumentApi/BOLRRNumberUpdate/',
                data: JSON.stringify(BussData),
            }).then(function (result) {
                $timeout(function () {

                    $scope.txtRRNo = result.data[0].RRNo;
                    $scope.ddlFreight = { ID: result.data[0].FreightPaymentID };
                    $scope.txtFreeDays = result.data[0].FreeDays;

                    $('#demoModal').modal('hide');
                    //ShowPopup("Linked RRNo: " + result.data[0].RRNo + " Successfully");
                    ShowPopup(result.data[0].Message);


                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });

        }


        $scope.btnConfim = function () {

            if ($scope.txtRRNo == "" || $scope.txtRRNo == "UNLINKED")
            {
                ShowPopup("RR is not Linked");
                return false;
            }

            if (typeof $scope.RegId != 'undefined')
            {
                var BussData = {}
                BussData.BLID = $scope.RegId;
                BussData.BkgID = $scope.BkgId;
                BussData.status = 2;
                BussData.AgentId = localStorage.getItem("AgencyID");
                BussData.UserID = localStorage.getItem("UserID");

                $http({
                    method: 'POST',
                    url: '/api/DocumentApi/BOLStatusUpdate/',
                    data: JSON.stringify(BussData),
                }).then(function (result) {
                    $timeout(function ()
                    {

                        if (result.data[0].Alert == "2") {
                            $scope.ConfirmStatus = "CONFIRMED";
                            $scope.BLStatus = "CONFIRMED";
                            $scope.Disable();
                        }
                        if (result.data[0].Alert == "3") {
                            $scope.ConfirmStatus = "CANCELLED";
                            $scope.BLStatus = "CANCELLED";

                        }
                        if (result.data[0].Alert == "1") {
                            $scope.ConfirmStatus = "DRAFT";
                            $scope.BLStatus = "DRAFT";
                        }
                        ShowPopup(result.data[0].Message);

                    });
                }, function (result) {
                    if (result.status == 500) {
                        ShowPopup("Sorry no internet connectivity Application Error.");
                    }
                    else if (result.status == 404) {
                        ShowPopup("Sorry no internet connectivity page not found.");
                    }
                    if (result.status > 0) {
                        var errorMsg = result.status + ': ' + result.data;
                        ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                    }
                }).catch(function (result) {
                    ShowPopup('There has been an error: ' + result);
                });
            }
            else {
                ShowPopup("Please Save the BL and Enter Confirm");
               }
        }

        $scope.Disable = function () {

            $scope.ControlMaindisable = true;
            $scope.HDCustomerDisplayHid = true;
            document.getElementById("btnSave").disabled = true;
            document.getElementById("btnSave").style.cursor = 'not-allowed';
            document.getElementById("btnCancelled").disabled = true;
            document.getElementById("btnCancelled").style.cursor = 'not-allowed';
            document.getElementById("btnConfirm").disabled = true;
            document.getElementById("btnConfirm").style.cursor = 'not-allowed';
            $scope.RemoveBookingPartyShow = true;
            $scope.ConfirmPartydisable = true;
        }

        $scope.Enable = function () {
            $scope.ControlMaindisable = false;
            $scope.HDCustomerDisplayHid = false;

            document.getElementById("btnSave").disabled = false;
            document.getElementById("btnSave").style.cursor = 'pointer';
            document.getElementById("btnCancelled").disabled = false;
            document.getElementById("btnCancelled").style.cursor = 'pointer';
            document.getElementById("btnConfirm").disabled = false;
            document.getElementById("btnConfirm").style.cursor = 'pointer';
            $scope.ConfirmPartydisable = false;

        }

        $scope.btnsubmitExemption = function () {
            var validation = "";
            var shipment = $("input[name='shipment']:checked").val()
            if (typeof shipment == "undefined") {
                validation += "<span style='color:red;'>*</span> <span>Please Select Shipment</span></br>"
            }

            var txtResion = $('#txtResion').val();
            if (txtResion.length == 0) {
                validation += "<span style='color:red;'>*</span> <span>Please Select Resion</span></br>"
            }

            if (validation != "") {
                ShowPopup(validation);
                return false;
            }
            $('#overlay').show();

            var BussData = {}

            BussData.BkgID = $scope.BkgId;
            BussData.ShipmentType = $("input[name='shipment']:checked").val();
            BussData.Remarks = $scope.txtResion;


            $http({
                method: 'POST',
                url: '/api/DocumentApi/BOLExemptionUpdate',
                data: JSON.stringify(BussData),

            }).then(function (result) {
                $timeout(function () {
                    if (result.data.length > 0) {

                        ShowPopup("BOL Exemption Updated");
                        $('#overlay').hide();
                    }
                    else {

                        ShowPopup("Error Not saved");
                    }
                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {

                ShowPopup('There has been an error: ' + result);
            });
        }


        $scope.CargoRelaseStatusSave = function () {

            $('#overlay').show();

            var BussData = {}

            BussData.BkgID = $scope.BkgId;
            BussData.CargoReleaseStatus = $("#ddlCargoReaselStatus").val();
            $http({
                method: 'POST',
                url: '/api/DocumentApi/BOLCargoReleaseUpdate',
                data: JSON.stringify(BussData),

            }).then(function (result) {
                $timeout(function () {
                    if (result.data.length > 0) {

                        ShowPopup("BOL Cargo Release Updated");
                        $('#overlay').hide();
                    }
                    else {

                        ShowPopup("Error Not saved");
                    }
                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {

                ShowPopup('There has been an error: ' + result);
            });
        }


        $scope.voyageLockingOnclick = function () {

            if ($scope.BLLockStatus == "LOCKED") {

                $('#overlay').show();
                var BussData = {}
                BussData.BLID = $scope.RegId;
                BussData.BLLockStatus = 0;
                $http({
                    method: 'POST',
                    url: '/api/DocumentApi/BLUnlock',
                    data: JSON.stringify(BussData),

                }).then(function (result) {
                    $timeout(function () {
                        if (result.data.length > 0) {

                            ShowPopup("BOL Unlocked");
                            $('#overlay').hide();
                        }
                        else {

                            ShowPopup("Error Not saved");
                        }
                    });
                }, function (result) {
                    if (result.status == 500) {
                        ShowPopup("Sorry no internet connectivity Application Error.");
                    }
                    else if (result.status == 404) {
                        ShowPopup("Sorry no internet connectivity page not found.");
                    }
                    if (result.status > 0) {
                        var errorMsg = result.status + ': ' + result.data;
                        ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                    }
                }).catch(function (result) {

                    ShowPopup('There has been an error: ' + result);
                });
            }
            else {
                ShowPopup('BL NOT LOCKED');
            }

        }

        $scope.EditControl = function () {

            $scope.HDCustomerDisplayHid = false;
        }


        $scope.UnlinkRRonclick = function () {


            if (localStorage.getItem("UserID") != "1" && localStorage.getItem("UserID") != "3" && localStorage.getItem("UserID") != "11" && localStorage.getItem("UserID") != "2" && localStorage.getItem("UserID") != "27" && localStorage.getItem("UserID") != "23") {
                ShowPopup("Access denied please contact administrator ");
                return;
            }


            $('#overlay').show();
            var BussData = {}
            BussData.BkgID = $scope.BkgId;
            BussData.BLID = $scope.RegId;
            BussData.BLLockStatus = 0;
            $http({
                method: 'POST',
                url: '/api/DocumentApi/RRUNLink',
                data: JSON.stringify(BussData),

            }).then(function (result) {
                $timeout(function ()
                {
                    if (result.data.length > 0)
                    {

                        ShowPopup(result.data[0]["BLLockStatus"]);
                        $scope.txtRRNo = "UNLINKED";
                        $('#overlay').hide();
                    }
                    else
                    {

                        ShowPopup("Error Not saved");
                    }
                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {

                ShowPopup('There has been an error: ' + result);
            });

            ShowPopup("Unlink RR");
            return false;

        }

        $scope.RemoveBookingParty = function (DynamicGridCustomer, index, BCID) {

            console.log(DynamicGridCustomer);
            var BussData = {}
            BussData.ID = BCID;
            $scope.DynamicGridCustomer.splice(index, 1);
            $http({
                method: 'POST',
                url: '/api/DocumentApi/BOLCusPartyDelete/',
                data: JSON.stringify(BussData),
            }).then(function (result) {
                $timeout(function () {
                    if (result.data.length > 0) {
                        $scope.DynamicGridCustomer.splice(index, BCID);
                        $scope.FilBOLCustomerExistingDetails($scope.RegId);
                        ShowPopup(result.data[0].Message);
                    }
                });
            });
        }


        $scope.btnOnclickCancelled = function () {

            if (typeof $scope.RegId != 'undefined') {
                var BussData = {}
                BussData.BLID = $scope.RegId;
                BussData.BkgID = $scope.BkgId;
                BussData.status = 3;
                BussData.AgentId = localStorage.getItem("AgencyID");
                BussData.UserID = localStorage.getItem("UserID");

                $http({
                    method: 'POST',
                    url: '/api/DocumentApi/BOLStatusUpdate/',
                    data: JSON.stringify(BussData),
                }).then(function (result) {
                    $timeout(function ()
                    {
                        if (result.data[0].Alert == "2") {
                            $scope.ConfirmStatus = "CONFIRMED";
                            $scope.BLStatus = "CONFIRMED";
                            $scope.Disable();
                        }
                        if (result.data[0].Alert == "3") {
                            $scope.ConfirmStatus = "CANCELLED";
                            $scope.BLStatus = "CANCELLED";

                        }
                        if (result.data[0].Alert == "1") {
                            $scope.ConfirmStatus = "DRAFT";
                            $scope.BLStatus = "DRAFT";
                        }
                        ShowPopup(result.data[0].Message);

                    });
                }, function (result) {
                    if (result.status == 500) {
                        ShowPopup("Sorry no internet connectivity Application Error.");
                    }
                    else if (result.status == 404) {
                        ShowPopup("Sorry no internet connectivity page not found.");
                    }
                    if (result.status > 0) {
                        var errorMsg = result.status + ': ' + result.data;
                        ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                    }
                }).catch(function (result) {
                    ShowPopup('There has been an error: ' + result);
                });
            }
            else {
                ShowPopup("Please Save the BL and Enter Confirm");

            }

        }


        $scope.btnOnclickResote = function () {
            var validation = "";

            if (localStorage.getItem("UserID") != "1" && localStorage.getItem("UserID") != "14" && localStorage.getItem("UserID") != "23" && localStorage.getItem("UserID") != "5" && localStorage.getItem("UserID") != "21" && localStorage.getItem("UserID") != "27") {
                validation += "<span style='color:red;'>*</span> <span>Access Denied,Please Contact Admin</span></br>"
            }

            if (validation != "") {
                ShowPopup(validation);
                return false;
            }
            if (typeof $scope.RegId != 'undefined')
            {
                var BussData = {}
                BussData.BLID = $scope.RegId;
                BussData.BkgID = $scope.BkgId;
                BussData.status = 1;
                BussData.AgentId = localStorage.getItem("AgencyID");
                BussData.UserID = localStorage.getItem("UserID");

                $http({
                    method: 'POST',
                    url: '/api/DocumentApi/BOLStatusUpdate/',
                    data: JSON.stringify(BussData),
                }).then(function (result) {
                    $timeout(function ()
                    {

                        if (result.data[0].Alert == "2")
                        {
                            $scope.ConfirmStatus = "CONFIRMED";
                            $scope.BLStatus = "CONFIRMED";
                            $scope.Disable();
                        }
                        if (result.data[0].Alert == "3") {
                            $scope.ConfirmStatus = "CANCELLED";
                            $scope.BLStatus = "CANCELLED";

                        }
                        if (result.data[0].Alert == "1")
                        {
                            $scope.ConfirmStatus = "DRAFT";
                            $scope.BLStatus = "DRAFT";
                        }
                        ShowPopup(result.data[0].Message);

                    });
                }, function (result) {
                    if (result.status == 500) {
                        ShowPopup("Sorry no internet connectivity Application Error.");
                    }
                    else if (result.status == 404) {
                        ShowPopup("Sorry no internet connectivity page not found.");
                    }
                    if (result.status > 0) {
                        var errorMsg = result.status + ': ' + result.data;
                        ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                    }
                }).catch(function (result) {
                    ShowPopup('There has been an error: ' + result);
                });
            }
            else {
                ShowPopup("Please Save the BL and Enter Confirm");

            }

        }


        $scope.OnClickPartyAdd = function ()
        {
            $('#ModalPartName').modal('show');
            $scope.fillCountry();
            $scope.fillLocState();

        }

        $scope.Country = null;
        $scope.fillCountry = function () {

            $http({
                method: 'POST',
                url: '/api/Home/countryBind/',
                data: {}
            }).then(function (result) {
                $timeout(function () {

                    $scope.Country = result.data;

                });
            });
        };
        $scope.fillCountry();

        $("#ddlCountry").change(function () {
            $scope.City = null;
            var Datavalue = {};

            Datavalue.CountryID = $("#ddlCountry").val();
            $http({
                method: 'POST',
                url: '/api/Home/BindCities/',
                data: JSON.stringify(Datavalue),
                // data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.LocCity = result.data;
                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        });


        $scope.LocState = null;
        $scope.fillLocState = function () {
            $http({
                method: 'POST',
                url: '/api/Home/stateBind/',
                data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.LocState = result.data;
                });
            });
        };
        $scope.fillLocState();

        $scope.btnCustomerPartSave = function () {

            var validation = "";
            var txtCustomerName = $('#txtCustomerName').val();
            if (txtCustomerName.length == 0) {
                validation += "<span style='color:red;'>*</span> <span>Please Enter Party Name</span></br>"

            }
            var ddlCusPartyTypes = $('#ddlCusPartyTypes').val();
            if (ddlCusPartyTypes == "?") {

                validation += "<span style='color:red;'>*</span> <span>Please Select Party Type</span></br>"
            }
            var ddlCountry = $('#ddlCountry').val();
            if (ddlCountry == "?") {
                validation += "<span style='color:red;'>*</span> <span>Please Select Country</span></br>"
            }
            var ddlLocCity = $('#ddlLocCity').val();
            if (ddlLocCity == "?") {
                validation += "<span style='color:red;'>*</span> <span>Please Select City</span></br>"
            }
            var ddlLocState = $('#ddlLocState').val();
            if (ddlLocState == "?") {
                validation += "<span style='color:red;'>*</span> <span>Please Select State</span></br>"
            }
            var txtLocAddress = $('#txtLocAddress').val();
            if (txtLocAddress.length == 0) {
                validation += "<span style='color:red;'>*</span> <span>Please Enter Address</span></br>"
            }

            var txtLocGSTIN = $('#txtLocGSTIN').val();
            if (txtLocGSTIN.length == 0) {
                validation += "<span style='color:red;'>*</span> <span>Please Enter GSTIN</span></br>"
            }

            if (validation != "") {
                ShowPopup(validation);
                return false;
            }
            var BussData = {}
            var Items = [];
            BussData.CustomerName = $scope.txtCustomerName;
            BussData.BusinessType = $('#ddlCusPartyTypes').val();
            BussData.CountryID = $('#ddlCountry').val();
            BussData.GSTIN = $scope.GSTIN;

            var intCID = 0;
            var intStateID = $('#ddlLocState').val();
            var strState = $("#ddlLocState option:selected").text();
            var intCity = $('#ddlLocCity').val();
            var strCity = $("#ddlLocCity option:selected").text();
            var strTelNO = $scope.TelNo;
            var strFax = "";
            var strEmailID = $scope.EmailID;
            var strGSTIN = $scope.GSTIN;
            var StrPanNo = $scope.PanNo;
            var StrAddress = $scope.Address;
            Items.push('Insert:' + intCID, strCity, intCity, strCity, intStateID, strState, strTelNO, strFax, strEmailID, strGSTIN, 1, 'ACTIVE', StrPanNo, "TANNo", 'Address:' + StrAddress);
            BussData.Itemsv1 = Items.toString();
            $http({
                method: 'POST',
                url: "/api/PartyApi/BOLCustomer",
                data: JSON.stringify(BussData),

            }).then(function (result) {
                $timeout(function () {
                    if (result.data.length > 0)
                    {
                        if (result.data[0].AlertTypeV != "") {

                            ShowPopup(result.data[0].AlertTypeV);
                        }
                        else {
                            ShowPopup("Customer Master Saved Successfully");
                        }
                    }


                });
            });

        }

        $scope.btnSurrencderBL = function()
        {

            if (typeof $scope.RegId != 'undefined') {
                var BussData = {}
                BussData.BLID = $scope.RegId;
                BussData.BkgID = $scope.BkgId;
                BussData.SurrenderStatus = 38;
                BussData.BLSurrender = $('#ddlSurrender').val();

                $http({
                    method: 'POST',
                    url: '/api/DocumentApi/BOLSurrenderUpdate/',
                    data: JSON.stringify(BussData),
                }).then(function (result)
                {
                    if (result.data[0].Alert == "2") {
                        ShowAlert(result.data[0].Amount);
                    }
                    else {
                        ShowPopup(result.data[0].Message);
                    }

                }, function (result) {
                    if (result.status == 500) {
                        ShowPopup("Sorry no internet connectivity Application Error.");
                    }
                    else if (result.status == 404) {
                        ShowPopup("Sorry no internet connectivity page not found.");
                    }
                    if (result.status > 0) {
                        var errorMsg = result.status + ': ' + result.data;
                        ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                    }
                }).catch(function (result) {
                    ShowPopup('There has been an error: ' + result);
                });
            }
            else {
                ShowPopup("Please Save the BL and Enter Confirm");

            }


        }

        function ShowAlert(message)
        {
            swal.fire({
                title: "SURRENDER CHARGES  " + message + "  WILL BE APPLICABLE PER BL",
                text: "",
                icon: 'success',
                showCancelButton: true,
                showConfirmButton: true,
                confirmButtonText: 'Proceed!',
                cancelButtonText: "Rejected!",
            }).then((result) => {
                if (result.value == true) {

                    var BussData = {}
                    BussData.BLID = $scope.RegId;
                    BussData.SurrenderStatus = 38;
                    $('#ddlSurrender').val(38).trigger("change");


                    $http({
                        method: 'POST',
                        url: '/api/DocumentApi/BOLSurrenderValuesUpdate/',
                        data: JSON.stringify(BussData),
                    }).then(function (result) {
                        $('#ddlSurrender').val(38).trigger("change");
                        swal.fire("Proceed!", result.data[0].Message, "success");
                    });

                }
                else {
                    swal.fire("Reject!", "Surrender Charges Rejected!", "warning");

                }
            });
        }

        $scope.btnSeawayBL = function () {

                var BussData = {}
                BussData.BLID = $scope.RegId;
                BussData.SurrenderStatus = 39;
               // $scope.ddlSurrender = { ID: 39 };
                $('#ddlSurrender').val(39).trigger("change");
                $http({
                    method: 'POST',
                    url: '/api/DocumentApi/BOLSurrenderValuesUpdate/',
                    data: JSON.stringify(BussData),
                }).then(function (result) {
                    ShowPopup("Seaway Charges are successfully updated");
                }, function (result) {
                    if (result.status == 500) {
                        ShowPopup("Sorry no internet connectivity Application Error.");
                    }
                    else if (result.status == 404) {
                        ShowPopup("Sorry no internet connectivity page not found.");
                    }
                    if (result.status > 0) {
                        var errorMsg = result.status + ': ' + result.data;
                        ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                    }
                }).catch(function (result) {
                    ShowPopup('There has been an error: ' + result);
                });
        }


        $scope.btnDowloadExcel = function ()
        {
            var BLID = 0;
            if (typeof $scope.RegId == 'undefined')
                BLID = 0;
            else
                BLID = $scope.RegId;

            window.location.href = '@Url.Action("BOLCntrDownloadAttachment", "Sales")?BkgID=' + $scope.BkgId + "&BLID=" + BLID;
        }




        $scope.btnuploadExcel = function ()
        {
            $('#btnuploadExcelShow').modal('show');
        }

        $scope.SelectFile = function (file)
        {
            $scope.SelectedFile = file;
        };
        $scope.Upload = function () {

            var regex = /^([a-zA-Z0-9\s_\\.\-:])+(.xls|.xlsx)$/;

            /* if (regex.test($scope.SelectedFile.name.toLowerCase())) {*/
            if (typeof (FileReader) != "undefined") {
                var reader = new FileReader();
                //For Browsers other than IE.
                if (reader.readAsBinaryString) {
                    reader.onload = function (e) {
                        $scope.ProcessExcel(e.target.result);
                    };
                    reader.readAsBinaryString($scope.SelectedFile);
                } else {
                    //For IE Browser.
                    reader.onload = function (e) {
                        var data = "";
                        var bytes = new Uint8Array(e.target.result);
                        for (var i = 0; i < bytes.byteLength; i++) {
                            data += String.fromCharCode(bytes[i]);
                        }
                        $scope.ProcessExcel(data);
                    };
                    reader.readAsArrayBuffer($scope.SelectedFile);
                }
            } else {
                ShowPopup("This browser does not support HTML5.");
            }
            //} else {
            //    ShowPopup("Please upload a valid Excel file.");
            //}
        };

        $scope.ProcessExcel = function (data) {
            $scope.DynamicGridContainer.length = 0;
            //Read the Excel File data.
            var workbook = XLSX.read(data, {
                type: 'binary'
            });

            //Fetch the name of First Sheet.
            var firstSheet = workbook.SheetNames[0];

            //Read all rows from First Sheet into an JSON array.
            var dataEx = XLSX.utils.sheet_to_row_object_array(workbook.Sheets[firstSheet]);
            //this.dsExcel = (XLSX.utils.sheet_to_json(ws, { header: 1 }));
            //let dataarray = this.dsExcel.slice(1);
            console.log(dataEx);

            var Itemsv = [];
            angular.forEach(dataEx, function (value, key) {
                Itemsv.push('Insert:' + dataEx[key].CONTAINERNO, dataEx[key].SIZE, dataEx[key].ISOCODE, dataEx[key].SEALNUMBER, dataEx[key].NOOFPACKAGE,
                    dataEx[key].PKGTYPE, dataEx[key].GROSSWT, dataEx[key].GW_UOM, dataEx[key].NETWT, dataEx[key].NW_UOM, dataEx[key].VGM, dataEx[key].CBM)
            });

            console.log(Itemsv.toString());

            var Datavalue = {};
            Datavalue.ItemsCntr = Itemsv.toString();

            $http({
                method: 'POST',
                url: '/api/DocumentApi/BOLExcelCntrsUpload',
                data: JSON.stringify(Datavalue),

            }).then(function (result) {

                $timeout(function () {
                    var err = "";
                    if (result.data.length > 0) {
                        //if (result.data[0].SealNo != "") {
                        //   $scope.DynamicGridContainer.splice(0, 1);
                        //}

                        angular.forEach(result.data, function (value, key) {
                            $scope.DynamicGridContainer.push({
                                'BCNID': 0,
                                'ContainerNo': { ID: result.data[key].CntrID },
                                'Size': result.data[key].Size,
                                'ISOCode': result.data[key].ISOCode,
                                'SealNo': result.data[key].SealNo,
                                'NoOfPkg': result.data[key].NoOfPkg,
                                'PakgType': { ID: result.data[key].PakgType },
                                'GrsWt': result.data[key].GrsWt,
                                'NtWt': result.data[key].NtWt,
                                'VGM': result.data[key].VGM,
                                'CBM': result.data[key].CBM,
                                'GrsWtType': { ID: result.data[key].GrsWtType },
                                'NtWtType': { ID: result.data[key].NtWtType },
                                //'HSCode': result.data[key].HSCode,
                                //'Cargo': result.data[key].Cargo,
                            });

                        });
                        $('#btnuploadExcelShow').modal('hide');
                        ShowPopup("Uploaded Successfully")
                    }

                    $("#overlay").hide();
                });
            }, function (result) {

                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            });

        };



        $scope.btnDowloadPartyExcel = function () {

            window.location.href = '@Url.Action("BOLPartyDownloadAttachment", "Sales")?BkgID=' + $scope.BkgId;
        }


        $scope.btnuploadPartyExcel = function () {
            $('#btnuploadCustomerExcelShow').modal('show');
        }

        $scope.SelectCustomerFile = function (file) {
            $scope.SelectedCustomerFile = file;
        };

        $scope.CustomerUpload = function () {

            var regex = /^([a-zA-Z0-9\s_\\.\-:])+(.xls|.xlsx)$/;

            
            if (typeof (FileReader) != "undefined") {
                var reader = new FileReader();
                //For Browsers other than IE.
                if (reader.readAsBinaryString) {
                    reader.onload = function (e) {
                        $scope.ProcessCustomerExcel(e.target.result);
                    };
                    reader.readAsBinaryString($scope.SelectedCustomerFile);
                } else {
                    //For IE Browser.
                    reader.onload = function (e) {
                        var data = "";
                        var bytes = new Uint8Array(e.target.result);
                        for (var i = 0; i < bytes.byteLength; i++) {
                            data += String.fromCharCode(bytes[i]);
                        }
                        $scope.ProcessCustomerExcel(data);
                    };
                    reader.readAsArrayBuffer($scope.SelectedCustomerFile);
                }
            } else {
                ShowPopup("This browser does not support HTML5.");
            }
            //} else {
            //    ShowPopup("Please upload a valid Excel file.");
            //}
        };



        $scope.ProcessCustomerExcel = function (data) {
            $scope.DynamicGridCustomer.length = 0;
           
            //Read the Excel File data.
            var workbook = XLSX.read(data, {
                type: 'binary'
            });

            //Fetch the name of First Sheet.
            var firstSheet = workbook.SheetNames[0];

            //Read all rows from First Sheet into an JSON array.
            var rowData = XLSX.utils.sheet_to_row_object_array(workbook.Sheets[firstSheet]);
            var firstThreeRows = rowData.slice(0, 4);
             var dataEx = firstThreeRows;
            var ItemsCus = [];


            if (dataEx[3].PartyType.toString() == 'Notify1' && typeof dataEx[3].PartyName == "undefined") {
              
                var rowDatav = XLSX.utils.sheet_to_row_object_array(workbook.Sheets[firstSheet]);
                var firstThreeRowsv = rowDatav.slice(0, 3);
                var dataExv = firstThreeRowsv;
                angular.forEach(dataExv, function (value, key) {
                    ItemsCus.push('Insert:' + dataExv[key].PartyType, dataExv[key].PartyName,);

                });
            }
            else {
              
                var rowDatav1 = XLSX.utils.sheet_to_row_object_array(workbook.Sheets[firstSheet]);
                var firstThreeRowsv1 = rowDatav1.slice(0, 4);
                var dataExv1 = firstThreeRowsv1;
                console.log(dataExv1);
                angular.forEach(dataExv1, function (value, key) {
                    ItemsCus.push('Insert:' + dataExv1[key].PartyType, dataExv1[key].PartyName,);

               });
            }

            var marksnos = XLSX.utils.sheet_to_row_object_array(workbook.Sheets[firstSheet]);
            var cargodesc = XLSX.utils.sheet_to_row_object_array(workbook.Sheets[firstSheet]);
         
            var Datavalue = {};
            Datavalue.ItemsCus = ItemsCus.toString();

          

            $http({
                method: 'POST',
                url: '/api/DocumentApi/BOLExcelCustomerUpload',
                data: JSON.stringify(Datavalue),

            }).then(function (result) {

                $timeout(function () {
                    var err = "";
                    if (result.data.length > 0) {
                       
                        $scope.DynamicGridCustomer = result.data;
                     
                        
                        $('#txtMarks').val(marksnos[5].PartyName);
                        $('#txtCargoDesc').val(cargodesc[7].PartyName);
                     
                        $('#btnuploadCustomerExcelShow').modal('hide');
                        ShowPopup("Uploaded Successfully")
                    }

                    $("#overlay").hide();
                });
            }, function (result) {

                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            });

        };


        $scope.OpenBLViewDocument = function () {
            if (typeof $scope.RegId != 'undefined') {
                BLId = $scope.RegId;
                var url = "/Online/ViewBLDocument?BOLRegID=" + encodeURIComponent(BLId) + "&BkgPassID=" + $scope.BkgId;
                window.location.href = url;

            }

        }

        $scope.OnlineBLUNLock = function () {

            swal.fire({
                title: "CUSTOMER PORTAL HAS BEEN UNLOCKED",
                text: "",
                icon: 'success',
                showCancelButton: true,
                showConfirmButton: true,
                confirmButtonText: 'Proceed!',
                cancelButtonText: "Rejected!",
            }).then((result) => {
                if (result.value == true) {

                    var BussData = {}
                    BussData.BLID = $scope.RegId;
                    $http({
                        method: 'POST',
                        url: '/api/DocumentApi/OnlineBLUnlock/',
                        data: JSON.stringify(BussData),
                    }).then(function (result) {
                        swal.fire("Proceed!", result.data[0].Message, "success");
                    });

                }
                else {
                    swal.fire("Reject!", "Surrender Charges Rejected!", "warning");

                }
            });
        }



    });

    function numericvalidation() {
        var key = event.keyCode; if ((key >= 48) && (key <= 58) || (key == 46))
            return true;
        else
            return false;
    }

    function ShowPopup(message) {
        swal(message);
    };




</script>
<style>
    /* .select2-container {
        width: 250px !important;
    }*/

    .btndrop {
        padding: 12px 20px;
        width: 137px;
    }

    .dropdown-toggle:after {
        margin-left: 2.255em !important;
    }

    .exp.modal-dialog .modal-header .modal-title {
        line-height: 0.5;
        padding-bottom: 12px;
        color: #fff;
    }

    .exp.modal.modal-dialog .modal-body {
        padding: 10px 24px 16px;
    }

    .exp.modal-dialog .modal-body .form-group {
        margin: 0px 0 0 !important;
        padding-bottom: 0 !important;
    }

    .exp.modal-dialog .modal-body input[type=radio].impradio {
        margin-left: 11px;
    }

    .exp.modal-dialog .modal-body label {
        color: #3e3d3d !important;
        font-weight: bold !important;
        margin-bottom: 0;
        padding-bottom: 0;
    }

    .cargo.modal-dialog .modal-header .modal-title {
        line-height: 0.5;
        padding-bottom: 12px;
        color: #fff !important;
    }

    .cargo.modal-dialog .modal-header .modal-title {
        color: #fff !important;
    }
</style>
<div ng-app="MyApp" ng-controller="MyController">

    <div id="overlay" style="display:none;">
        <div class="loadcontainer">
            <div class="spinner"></div>
            <p>Loading Please Wait</p>
        </div>
    </div>

    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12 backbtn" style="text-align:right;">
                <a href="/Document/BOLView" ng-click="back();" class="btn btn-fill btnback btn-success btn-round btntop">
                    <i class="material-icons">reply</i> Back

                </a>
                @*<button type="submit" ng-click="EditControl();" class="btn btn-fill btn-warning btn-round btntop">
                        <i class="material-icons">edit</i>

                    </button>*@
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="card ">
                    <div class="card-header card-header-primary card-header-text">
                        <div class="card-text">
                            <h4 class="card-title">Bill Of Lading</h4>
                        </div>
                    </div>

                    <div class="card-body ">

                        <div class="row">
                            <div class="col-md-10"></div>
                            <div class="col-md-2 pull-right">

                                <div class="dropdown">
                                    <a class="btn btn-success btndrop dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        BL OPTIONS
                                    </a>

                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                        <a class="dropdown-item" href="#" ng-click="RRonclick();" id="btnFetchRR"><i class="fa fa-user"></i> <span style="padding-left:20px;">FETCH RR</span></a>
                                        <a class="dropdown-item" href="#" ng-click="UnlinkRRonclick();" id="btnFetchRR"><i class="fa fa-user"></i> <span style="padding-left:20px;">UNLINK RR</span></a>
                                        <a class="dropdown-item" href="#" id="btnHoueBL" ng-click="HouseBLOnclick();"><i class="fa fa-bookmark" style="color: #0585b5;"></i> <span style="padding-left:20px;">HOUSE BL</span></a>
                                        <a class="dropdown-item" href="#" id="btnPartBL" ng-click="PartBLOnclick();"><i class="fa fa-bookmark" style="color: #f3a921;"></i> <span style="padding-left:20px;">PART BL</span></a>
                                        <a class="dropdown-item" href="#" id="btnSwitch" ng-click="SwitchOnclick();"><i class="fa fa-bookmark" style="color: #e91e63;"></i> <span style="padding-left:20px;">SWITCH BL</span></a>

                                        <a class="dropdown-item" href="#" id="btnviewTariff" ng-click="ExportTariffPage();"><i class="fa fa-bookmark" style="color: #e91e63;"></i> <span style="padding-left:20px;">VIEW TARIFF</span></a>
                                        <a class="dropdown-item" href="#" id="btnExpDET" ng-click="ExportDETPage();"><i class="fa fa-bookmark" style="color: #e91e63;"></i> <span style="padding-left:20px;">EXPORT DET/DMM</span></a>

                                        <a class="dropdown-item" href="#" id="btnBLRelease" ng-click="OpenBLReleasePage();"><i class="fa fa-ship"></i> <span style="padding-left:20px;">BL RELEASE</span></a>
                                        <a class="dropdown-item" href="#" id="btnExemtion" ng-click="ExemptionOnclick();"><i class="fa fa-asterisk"></i> <span style="padding-left:20px;">BL EXEMPTION</span></a>
                                        <a class="dropdown-item" href="#" ng-click="CargoReleaseOnclick();"><i class="fa fa-thumbs-o-up" aria-hidden="true"></i>  <span style="padding-left:20px;">CARGO RELEASE-POD</span></a>
                                        <a class="dropdown-item" href="#" ng-click="voyageLockingOnclick();"><i class="fa fa-key" aria-hidden="true"></i>  <span style="padding-left:20px;">VOYAGE UNLOCKING</span></a>
                                        <a class="dropdown-item" href="#" ng-click="btnOnclickResote();"><i class="fa fa-key" aria-hidden="true"></i>  <span style="padding-left:20px;">RESTORE CANCEL</span></a>

                                        <a class="dropdown-item" href="#" ng-click="btnSurrencderBL();"><i class="fa fa-key" aria-hidden="true"></i>  <span style="padding-left:20px;">SURRENDAR BL</span></a>

                                        <a class="dropdown-item" href="#" ng-click="OpenBLViewDocument();"><i class="fa fa-key" aria-hidden="true"></i>  <span style="padding-left:20px;">VIEW DOCUMENT</span></a>
                                        <a class="dropdown-item" href="#" ng-click="OnlineBLUNLock();"><i class="fa fa-key" aria-hidden="true"></i>  <span style="padding-left:20px;">ONLINE UN LOCK</span></a>
                                        @*<a class="dropdown-item" href="#" ng-click="btnSeawayBL();"><i class="fa fa-key" aria-hidden="true"></i>  <span style="padding-left:20px;">SEAWAY BL</span></a>*@

                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="row" style="margin-top:15px;border-bottom: 2px solid #7d7a7a;padding-top: 15px;border-top: 2px solid #7d7a7a;">
                            @*<div class="col-md-4">
                    <h5 style="color:#000000;font-weight: 500; font-size:13px;">Shipment Status<span style="border:1px solid #e23756; margin-left:15px; padding: 3px 30px; font-weight:bold;color:#e91e63;">SOB PENDING</span></h5>
                </div>*@
                            <div class="col-md-4" style="text-align:left;"><h5 style="color:#000000;font-weight: 500;font-size:13px;">CARGO RELEASE-POD <span ng-bind="CargoRelStatus" style="border:1px solid #e23756;margin-left:15px;font-weight:bold;padding: 3px 30px;color:#e91e63;"></span></h5></div>
                            <div class="col-md-4" style="text-align:right;"><h5 style="color:#000000;font-weight: 500;font-size:13px;">BL Status<span ng-bind="BLStatus" style="border:1px solid #e23756;margin-left:15px;font-weight:bold;padding: 3px 30px;color:#e91e63;"></span></h5></div>
                            <div class="col-md-4" style="text-align:right;"><h5 style="color:#000000;font-weight: 500;font-size:13px;">BL Lock Status<span ng-bind="BLLockStatus" style="border:1px solid #e23756;margin-left:15px;font-weight:bold;padding: 3px 30px;color:#e91e63;"></span></h5></div>
                        </div>

                        <div class="row">

                            <!-- Modal -->
                            <div class="modal fade" id="demoModal"  role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                            <h4 class="modal-title" id="myModalLabel">Booking Search</h4>
                                        </div>
                                        <div class="modal-body">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="card ">
                                                        <div class="card-header card-header-primary card-header-text">
                                                            <div class="card-text">
                                                                <h4 class="card-title">Fetch RR</h4>
                                                            </div>
                                                        </div>
                                                        <div class="card-body" style="padding: .9375rem 15px;">
                                                            <div class="row" style="background-color:aliceblue;">
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <div class="row">
                                                                            <div class="col-md-12">
                                                                                <label>Booking/RR Number</label>
                                                                                <select id="ddlRRNoSearch" class="form-control my-select" ng-model="ddlRNoSearch" options="{ allowClear: true }" ng-options="item.RatesheetNo for item in RRNumbervalues track by item.ID"></select>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <div class="row">
                                                                            <div class="col-md-12">
                                                                                <label>Port Of Loading</label>
                                                                                <select id="ddlPortOfLoadingSearch" class="form-control my-select" ng-model="ddlPortOfLoadingSearch" options="{ allowClear: true }" ng-options="item.PortName for item in PortAllvalues track by item.ID"></select>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <div class="row">
                                                                            <div class="col-md-12">
                                                                                <label>Port Of Discharge</label>
                                                                                <select id="ddlPortOfDischargeSearch" class="form-control my-select" ng-model="ddlPortOfDischargeSearch" options="{ allowClear: true }" ng-options="item.PortName for item in PortAllvalues track by item.ID"></select>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <div class="row">
                                                                            <div class="col-md-12">
                                                                                <label>Booking Party</label>
                                                                                <select class="form-control my-select" id="ddlbookingParty" ng-model="ddlbookingParty" ng-options="item.CustomerName for item in CustomerMasterAllvalues track by item.ID">
                                                                                </select>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <div class="row">
                                                                            <div class="col-md-12">
                                                                                <label>Shipment Type</label>
                                                                                <select id="ddlShipmenTypeSearch" class="form-control my-select" ng-model="ddlShipmenTypeSearch" options="{ allowClear: true }" ng-options="item.GeneralName for item in ShipmentTypeAllvalues track by item.ID"></select>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <div class="row">
                                                                            <div class="col-md-12">
                                                                                <label>Agency</label>
                                                                                <select id="ddlAgencySearch" class="form-control my-select" ng-model="ddlAgencySearch" options="{ allowClear: true }" ng-options="item.AgencyName for item in AgencyMasterAllvalues track by item.ID"></select>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <div class="row">
                                                                            <div class="col-md-12">
                                                                                <label>Status</label>
                                                                                <select id="ddlStatusSearch" class="form-control my-select" disabled ng-model="ddlStatusSearch" ng-options="item.Status for item in RRStatusValueAll track by item.ID"></select>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                </div>

                                                                <div class="col-md-3">
                                                                    <div class="form-group">
                                                                        <div class="row">
                                                                            <div class="col-md-12">
                                                                                <label>Shipper</label>
                                                                                <select class="form-control my-select" id="ddlShipper" ng-model="ddlShipper" ng-options="item.CustomerName for item in CustomerMasterAllvalues track by item.ID">
                                                                                </select>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-12" style="text-align:right;">
                                                                    <button type="submit" ng-click="BookingSearch();" class="btn btn-fill btn-rose">
                                                                        <i class="material-icons">search</i>
                                                                        Search
                                                                    </button>
                                                                    <button type="submit" ng-click="ClearRecords();" class="btn btn-fill btn-danger">Clear</button>
                                                                </div>
                                                            </div>

                                                            <div class="row" ng-repeat="i in BookingSearchAllVeiw">
                                                                <div class="col-md-12" style="border: 1px dashed #ccc; border-radius:15px;padding:15px; margin-top:17px; margin-bottom:0px;">
                                                                    <div class="row">
                                                                        <div class="col-md-2" style="text-align:center;border-right: 1px solid #ccc;">
                                                                            <div class="row">
                                                                                <div class="col-md-12" style="margin-top:31px; margin-bottom:15px;">
                                                                                    <h4 style="color:#16079c!important;font-size:15px;font-weight:bold;">{{i.RatesheetNo}}</h4>
                                                                                </div>
                                                                                <div class="col-md-8 offset-2" style="background-color:#cccccc4a; text-align:center;padding: 4px;border-radius: 5px;">
                                                                                    <h5 style="color:#808080; font-size:12px; margin-bottom:0;">Expiry Date</h5>
                                                                                    <p style="color:red;font-size:11px;margin-top:0;margin-bottom:0;">{{i.ValidTill}}</p>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-8" style="border-right:1px solid #ccc;">
                                                                            <h5 style="font-weight: bold;color: #16079c; font-size:15px;"><span>CUSTOMER</span> <span style="padding-left:50px;">:</span> <span style="padding-left:50px;">{{i.BookingParty}}</span></h5>
                                                                            <img src="~/assets/img/bookingimg1.jpg" class="img-responsive bookingimg" style="width:660px;" />
                                                                            <div class="col-md-12 padlr0" style="margin-top:-20px;">
                                                                                <span style="font-size:12px;color: #989696;">{{i.POO}}</span> <span style="padding-left: 224px; font-size: 14px; color: #032584;" class="pol">{{i.POL}}</span> <span class="pod" style="padding-left: 144px; font-size: 14px; color: #032584;">{{i.POD}}</span> <span style="margin-left:63px;font-size:12px;color: #989696;">{{i.FPOD}}</span>
                                                                                @*<span style="font-size:12px;"></span> <span style="margin-left:105px;font-size:12px;">MYPKG</span> <span style="margin-left:72px;font-size:12px;">CNTAO</span> <span style="margin-left:63px;font-size:12px;"></span>*@
                                                                            </div>
                                                                            <div class="col-md-12 padlr0" style="margin-top:8px;">
                                                                                <h5 style="font-weight: bold;font-size:17px;margin-bottom:0;"><span style="color:#16079c;">Shipper:</span><span style="color:#e40874;padding-left:8px;">{{i.Shipper}}</span></h5>
                                                                            </div>
                                                                        </div>


                                                                        <div class="col-md-2">
                                                                            <div class="col-md-12 padlr0">
                                                                                <h5 style="font-weight: bold;color: #16079c; font-size:17px; text-align:center;" class="ng-binding">Flagging</h5>
                                                                            </div>
                                                                            <div class="col-md-12 padlr0" style="margin-top:35px; text-align:center;">

                                                                                <input type="checkbox" ng-click="ChekBoxRRate(i.ID);" />
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div id="notFoundDiv" ng-show="(BookingSearchAllVeiw|filter:BookingParty).length==0" style="color: red; font-weight: bold">No Records Found</div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>

                            <!-- Modal 2-->

                            <div class="modal fade" id="ModalExemption" style="width:500px;margin:0 auto;" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                <div class="modal-dialog exp">
                                    <div class="modal-content">
                                        <div class="modal-header" style="background-color: #057ba7;">
                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                            <h4 class="modal-title" id="myModalLabel">Exemption</h4>
                                        </div>


                                        <div class="modal-body">
                                            <div class="row">

                                                <div class="col-md-12" style="border-bottom: 1px dashed #ccc; margin-bottom:3px;">
                                                    <div class="form-group">
                                                        <div class="row">
                                                            <div class="col-md-4">
                                                                <label>Booking/BL</label>
                                                            </div>
                                                            <div class="col-md-1">:</div>
                                                            <div class="col-md-5">
                                                                <label ng-bind="ExBLNumber"></label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-md-12" style="border-bottom: 1px dashed #ccc; margin-bottom:3px;">
                                                    <div class="form-group">
                                                        <div class="row">
                                                            <div class="col-md-4">
                                                                <label>Booking Party</label>
                                                            </div>
                                                            <div class="col-md-1">:</div>
                                                            <div class="col-md-5">
                                                                <label ng-bind="ExBkgParty"></label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-md-12" style="border-bottom: 1px dashed #ccc; margin-bottom:3px;">
                                                    <div class="form-group">
                                                        <div class="row">
                                                            <div class="col-md-4">
                                                                <label>POL</label>
                                                            </div>
                                                            <div class="col-md-1">:</div>
                                                            <div class="col-md-5">
                                                                <label ng-bind="ExPOL"></label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-12" style="border-bottom: 1px dashed #ccc; margin-bottom:3px;">
                                                    <div class="form-group">
                                                        <div class="row">
                                                            <div class="col-md-4">
                                                                <label>POD</label>
                                                            </div>
                                                            <div class="col-md-1">:</div>
                                                            <div class="col-md-5">
                                                                <label ng-bind="ExPOD"></label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-12" style="border-bottom: 1px dashed #ccc; margin-bottom:3px;">
                                                    <div class="form-group">
                                                        <div class="row">
                                                            <div class="col-md-4">
                                                                <label>Sales</label>
                                                            </div>
                                                            <div class="col-md-1">:</div>
                                                            <div class="col-md-5">
                                                                <label ng-bind="ExSales"></label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-12" style="border-bottom: 1px dashed #ccc; margin-bottom:3px;">
                                                    <div class="form-group">
                                                        <div class="row">
                                                            <div class="col-md-4">
                                                                <label>Shipment Type</label>
                                                            </div>
                                                            <div class="col-md-1">:</div>
                                                            <div class="col-md-5">
                                                                <div id='type'>
                                                                    <input type='radio' id='radio_1' name='shipment' value='1' /> Export

                                                                </div>
                                                                @*<input type="radio" ng-model="shipment" value="1" id="ddlshipment" name="shipment" />
                                                    <label class="rad">EXPORT</label>

                                                    <input type="radio" ng-model="shipment" value="2" id="ddlshipment1" name="shipment" class="impradio" />
                                                    <label class="rad">IMPORT</label>*@
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-12" style="border-bottom: 1px dashed #ccc; margin-bottom:3px;">
                                                    <div class="form-group">
                                                        <div class="row">
                                                            <div class="col-md-12 padlr0">
                                                                <textarea id="txtResion" autocomplete="off" rows="5" placeholder="Reason Metion Here" ng-model="txtResion" class="form-control"></textarea>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-md-12" style="text-align:center;">
                                                    <button type="submit" id="btnExsubmit" ng-click="btnsubmitExemption();" class="btn btn-success">
                                                        <i class="material-icons">save</i>
                                                        Submit
                                                    </button>

                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="modal fade cargo" id="ModalCargoRelease" style="width:850px!important; margin:0 auto;" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header" style="background-color: #057ba7;padding: 3px 24px 0;">
                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                            <h4 class="modal-title" id="myModalLabel" style="color:#fff;">Cargo Release - POD</h4>
                                        </div>
                                        <div class="modal-body">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <div class="row">
                                                            <div class="col-md-4">
                                                                <label>BL Number</label>

                                                            </div>
                                                            <div class="col-md-1">
                                                                :
                                                            </div>
                                                            <div class="col-md-7">
                                                                <label ng-bind="CargoReleaseBLNumber"></label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">

                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <div class="row">
                                                            <div class="col-md-4">
                                                                <label>Port Of Loading</label>
                                                            </div>
                                                            <div class="col-md-1">:</div>
                                                            <div class="col-md-7">
                                                                <label ng-bind="CargoReleasePOL"></label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <div class="row">
                                                            <div class="col-md-4">
                                                                <label>Port Of Discharge</label>
                                                            </div>
                                                            <div class="col-md-1">:</div>
                                                            <div class="col-md-7">
                                                                <label ng-bind="CargoReleasePOD"></label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <div class="row">
                                                            <div class="col-md-4">
                                                                <label>Cargo Release Status</label>

                                                            </div>
                                                            <div class="col-md-1">
                                                                :
                                                            </div>
                                                            <div class="col-md-7">
                                                                <select id="ddlCargoReaselStatus" class="form-control my-select" ng-model="ddlCargoReaselStatus" options="{ allowClear: true }" ng-options="item.name for item in CargoReleaseStatus track by item.ID"></select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12" style="text-align:right;">
                                                    <button type="submit" ng-click="CargoRelaseStatusSave();" class="btn btn-fill btn-success">
                                                        <i class="material-icons">save</i>
                                                        Save
                                                    </button>
                                                </div>
                                            </div>

                                        </div>

                                    </div>
                                </div>
                            </div>

                        </div>

                        <div class="col-md-12">
                            <div class="row">
                                <div class="col-md-12 padlr0">
                                    <div class="col-md-12">
                                        <div class="row">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label>Booking/BL No</label>
                                                            <input type="text" autocomplete="off" id="txtBookingNo" ng-disabled="isDisabledBooking" ng-model="txtBookingNo" class="form-control" style="background-color:#eee;" />
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label>RR Number</label>
                                                            <input type="text" autocomplete="off" id="txtRRNo" ng-disabled="isDisabledRRNo" ng-model="txtRRNo" class="form-control" style="background-color:#eee;" />
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label>Booking Party</label>
                                                            <input type="text" autocomplete="off" id="txtBkgParty" ng-disabled="isDisabledParty" ng-model="txtBkgParty" class="form-control" style="background-color:#eee;" />
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="col-md-12">
                                        <div class="row">
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label>POO</label>

                                                            <select id="ddlPOO" class="form-control my-select" ng-disabled="ControlMaindisable" ng-model="ddlPOO" options="{ allowClear: true }" ng-options="item.CityName for item in CityAllvalues track by item.ID"></select>

                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label>POL</label>
                                                            <select id="ddlPOL" class="form-control my-select" ng-disabled="isDisabledPOL" ng-model="ddlPOL" options="{ allowClear: true }" ng-options="item.PortName for item in PortAllvalues track by item.ID" style="background-color:#eee;"></select>

                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label>POD</label>
                                                            <select id="ddlPOD" class="form-control my-select" ng-disabled="ControlMaindisable" ng-model="ddlPOD" options="{ allowClear: true }" ng-options="item.PortName for item in PortAllvalues track by item.ID"></select>

                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label>FPOD</label>
                                                            <select id="ddlFPOD" class="form-control my-select" ng-disabled="ControlMaindisable" ng-model="ddlFPOD" options="{ allowClear: true }" ng-options="item.CityName for item in CityAllvalues track by item.ID"></select>

                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-12" style="text-align:right;">

                                        <button type="button" id="btnuploadExcel_1" rel="tooltip" ng-click="btnuploadPartyExcel();" class="btn btn-info btn-round" data-original-title="" title="">
                                            <i class="material-icons">upload</i>
                                            upload
                                        </button>

                                        <a style="color: forestgreen; text-align: right;" href="~/DownloadFile/BLPartyDetails_Upload.xlsx">Template</a>

                                    </div>


                                    <div class="col-md-12">
                                        <div class="material-datatables">

                                            <table id="myTablevalues" class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">
                                                <thead>
                                                    <tr>
                                                        <th>S.No</th>
                                                        <th style="width:25%;">Party Type</th>
                                                        <th style="width:25%;">
                                                            Party Name
                                                            <span>
                                                                <button type="button" rel="tooltip" ng-click="OnClickPartyAdd();" class="btn btn-danger btn-round btnuser" data-original-title="" title="">
                                                                    <i class="fa fa-user"></i>
                                                                </button>
                                                            </span>
                                                        </th>
                                                        <th>Address</th>

                                                        <th class="disabled-sorting text-right">Action</th>
                                                    </tr>
                                                </thead>

                                                <tbody>
                                                    <tr>

                                                        <td>

                                                            <input type="hidden" id="HDIDv" class="form-control" ng-model="BCID" />
                                                            <input type="hidden" id="HDArrayIndex" class="form-control" ng-model="HDArrayIndex" />
                                                        </td>
                                                        <td><select id="ddlPartyType" append-to-body="true" ng-disabled="HDCustomerDisplayHid" ng-model="ddlPartyType" class="form-control my-select ddl" options="{ allowClear: true }" ng-options="item.BusinessTypes for item in BusinessTypesvalues track by item.ID"></select></td>
                                                        <td><select ng-disabled="HDCustomerDisplayHid" id="ddlPartyName" ng-model="ddlPartyName" se style="width:100%;" class="form-control my-select ddl" tabindex="-1" options="{ allowClear: true }" ng-options="item.CustomerName for item in BookingPartyAllvalues track by item.ID"></select></td>
                                                        <td><textarea id="txtAddress" ng-bind="txtAddress" ng-disabled="HDCustomerDisplayHid" ng-model="txtAddress" class="form-control" rows="2"></textarea></td>
                                                        @*<td style="display:none;"><input type="hidden" id="HDBCID" class="form-control" ng-model="gRow.BCID" /></td>*@
                                                        <td class="td-actions text-right">
                                                            <button type="button" rel="tooltip" ng-disabled="ConfirmPartydisable" ng-click="BookingPartyRowAdd(DynamicGridCustomer)" class="btn btn-primary btn-round" data-original-title="" title="">
                                                                <i class="material-icons">add</i>
                                                            </button>

                                                        </td>
                                                    </tr>
                                                    <tr ng-repeat="gRow in DynamicGridCustomer">
                                                        <td>{{$index+1}}</td>
                                                        <td>{{gRow.PartyType}}</td>
                                                        <td>{{gRow.PartyName}}</td>
                                                        <td>{{gRow.Address}}</td>
                                                        <td td-actions text-right style="height: 75px;width:80px;">

                                                            <button type="button" style="padding:5px;" rel="tooltip" ng-disabled="ConfirmPartydisable" ng-click="SelectvaluesBookingParty(DynamicGridCustomer,$index)" class="btn btn-success btn-round" data-original-title="" title="">
                                                                <i class="material-icons">edit</i>
                                                            </button>
                                                            <button type="button" style="padding:5px;" rel="tooltip" ng-disabled="ConfirmPartydisable" ng-click="RemoveBookingParty(DynamicGridCustomer,$index,gRow.BCID)" class="btn btn-danger btn-round" data-original-title="" title="">
                                                                <i class="material-icons">delete</i>
                                                            </button>


                                                        </td>

                                                    </tr>

                                                </tbody>
                                            </table>

                                        </div>
                                    </div>


                                    <div class="col-md-12">
                                        <div class="row">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label>Shipment Type</label>
                                                            <input id="txtShipmentType" ng-disabled="isDisabledShipmentType" ng-model="txtShipmentType" class="form-control" style="background-color:#eee;" />
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label>Service Type</label>
                                                            <input type="text" id="txtServiceType" ng-disabled="isDisabledServiceType" ng-model="txtServiceType" class="form-control" style="background-color:#eee;" />
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label>Sales Person</label>
                                                            <input id="txtSalesPerson" ng-disabled="isDisabledSalesPerson" ng-model="txtSalesPerson" class="form-control" style="background-color:#eee;" />
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="row">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label>Designation Agent</label>
                                                            <select class="form-control my-select" id="ddlAgent" ng-disabled="ControlMaindisable" ng-model="ddlAgent" ng-options="item.AgencyName for item in AgencyMasterAllvalues track by item.ID">
                                                            </select>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label>No.Of Original</label>
                                                            <select type="text" autocomplete="off" ng-disabled="ControlMaindisable" id="ddlnoofOriginal" ng-model="ddlnoofOriginal" class="form-control my-select" options="{ allowClear: true }" ng-options="item.name for item in NofoOrgineValues track by item.ID"></select>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label>Surrendar Status</label>
                                                            <select class="form-control my-select" ng-disabled="ControlMaindisable" id="ddlSurrender" ng-model="ddlSurrender" options="{ allowClear: true }" ng-options="item.GeneralName for item in ModuleAllvalues track by item.ID"></select>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label>Marks & Number</label>
                                                            <textarea id="txtMarks" ng-model="txtMarks" ng-disabled="ControlMaindisable" class="form-control" rows="6"></textarea>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label>Cargo Description</label>
                                                            <textarea id="txtCargoDesc" ng-model="txtCargoDesc" ng-disabled="ControlMaindisable" class="form-control" rows="6"></textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="row">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label>Vessel & Voyage</label>
                                                            <input type="text" id="txtVesVoy" ng-model="txtVesVoy" ng-disabled="isDisabledVesVoy" class="form-control" />
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label>Volume</label>
                                                            <input type="text" id="txtVol" ng-model="txtVol" ng-disabled="isDisabledVol" class="form-control" />
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label>BL Type</label>
                                                            <select class="form-control" id="ddlBLType" ng-disabled="isDisabledBLType" ng-model="ddlBLType" options="{ allowClear: true }" ng-options="item.GeneralName for item in BlTypesAllvalues track by item.ID"></select>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <label>Mother BL Number</label>
                                                                <input type="text" id="txtMotherBLNo" ng-disabled="isDisabledMotherBL" ng-model="txtMotherBLNo" class="form-control" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <label>Free Days</label>
                                                                <input type="text" id="txtFreeDays" ng-disabled="isDisabledFreeDays" ng-model="txtFreeDays" class="form-control" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <label>Freight Payment Centre</label>
                                                                @*<select class="form-control my-select" id="ddlFreight"  ng-disabled="ControlMaindisable" ng-model="ddlFreight" options="{ allowClear: true }" ng-options="item.GeneralName for item in FreightAllvalues track by item.ID"></select>*@
                                                                <select class="form-control my-select" id="ddlFreight" disabled ng-model="ddlFreight" options="{ allowClear: true }" ng-options="item.GeneralName for item in FreightAllvalues track by item.ID"></select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12" style="text-align:right;">

                                        <button type="button" id="btnuploadExcel" rel="tooltip" ng-click="btnuploadExcel();" class="btn btn-primary btn-round" data-original-title="" title="">
                                            <i class="material-icons">upload</i>
                                            upload
                                        </button>

                                        <button type="button" id="btnDowloadExcel" rel="tooltip" ng-click="btnDowloadExcel();" class="btn btn-primary btn-round" data-original-title="" title="">
                                            <i class="material-icons">download</i>
                                            download
                                        </button>

                                    </div>
                                    <div class="col-md-12">
                                        <div class="material-datatables">
                                            <table class="table table-striped table-no-bordered table-hover table-responsive" cellspacing="0" width="100%" style="width:100%">
                                                <thead>
                                                    <tr>
                                                        <th>S.No</th>
                                                        <th>Container No <span style="color:white; font-size:20px;">*</span><span style="color:red; font-size:10px; position:absolute;">*</span></th>
                                                        <th>Size <span style="color:white; font-size:20px;">*</span></th>
                                                        <th>ISO Code <span style="color:white; font-size:20px;">*</span></th>
                                                        <th>Seal Number <span style="color:white; font-size:20px;">*</span></th>
                                                        <th>No.Of.Package <span style="color:white; font-size:20px;">*</span></th>
                                                        <th>Pkg Type <span style="color:white; font-size:20px;">*</span></th>
                                                        <th colspan="2">Gross.Wt <span style="color:white; font-size:20px;">*</span></th>
                                                        <th colspan="2">Net.Wt</th>
                                                        <th>VGM</th>
                                                        <th>CBM</th>
                                                        <th>HS Code</th>
                                                        <th>Cargo Name</th>
                                                        <th class="disabled-sorting text-right">Action</th>
                                                    </tr>
                                                </thead>

                                                <tbody>
                                                    <tr ng-repeat="gR in DynamicGridContainer">
                                                        <td>{{$index+1}}</td>
                                                        <td><select style="width:100px;" class="form-control" disabled ng-change="SelectContainer(gR)" id="ddlContainerNo" ng-model="gR.ContainerNo" options="{ allowClear: true }" ng-options="item.CntrNo for item in CntrNoValues track by item.ID"></select></td>
                                                        <td><input id="txtSize" ng-model="gR.Size" disabled class="form-control" /></td>
                                                        <td><input id="txtISOCode" ng-model="gR.ISOCode" disabled class="form-control" /></td>
                                                        <td><input id="txtSealNo" autocomplete="off" ng-model="gR.SealNo" class="form-control" /></td>
                                                        <td><input id="txtNoOfPkg" ng-model="gR.NoOfPkg" autocomplete="off" onkeypress="return numericvalidation();" class="form-control" /></td>
                                                        <td><select style="width:120px;" class="form-control" id="ddlPakgType" ng-model="gR.PakgType" options="{ allowClear: true }" ng-options="item.CargoName for item in CargoMasterAllvalues track by item.ID"></select></td>
                                                        <td>
                                                            <input id="txtGrsWt" onkeypress="return numericvalidation();" autocomplete="off" ng-model="gR.GrsWt" class="form-control" style="width:47px;" />
                                                        </td>
                                                        <td>
                                                            <select class="form-control" id="ddlGrsWtType" ng-model="gR.GrsWtType" options="{ allowClear: true }" ng-options="item.name for item in TypeofUnit track by item.ID" style="width:47px;"></select>
                                                        </td>

                                                        <td>
                                                            <input id="txtNtWt" onkeypress="return numericvalidation();" autocomplete="off" ng-model="gR.NtWt" class="form-control" style="width:47px;" />
                                                        </td>
                                                        <td>
                                                            <select class="form-control" id="ddlNtWtType" ng-model="gR.NtWtType" options="{ allowClear: true }" ng-options="item.name for item in TypeofUnit track by item.ID" style="width:47px;"></select>
                                                        </td>
                                                        <td><input id="txtVGM" onkeypress="return numericvalidation();" autocomplete="off" ng-model="gR.VGM" class="form-control" /></td>
                                                        <td><input id="txtCBM" onkeypress="return numericvalidation();" autocomplete="off" ng-model="gR.CBM" class="form-control" /></td>
                                                        <td><input id="txtHSCode" style="width:150px;"  ng-model="gR.HSCode" autocomplete="off"  class="form-control" /></td>
                                                        <td><input id="txtCargo" style="width:150px;"  ng-model="gR.Cargo" autocomplete="off"  class="form-control" /></td>
                                                        <td style="display:none;"><input type="hidden" id="HDBCNID" class="form-control" ng-model="gRow.BCNID" /></td>
                                                        <td class="td-actions text-right">
                                                            <button type="button" id="BtnAddCntr" ng-show="IsVisible" rel="tooltip" ng-if="$last" ng-click="ContainerRowAdd(DynamicGridContainer,$index)" class="btn btn-primary btn-round" data-original-title="" title="">
                                                                <i class="material-icons">add</i>
                                                            </button>
                                                            <button type="button" rel="tooltip" ng-if="!$last" ng-show="IsVisible" ng-click="RemoveContainer(DynamicGridContainer,$index)" class="btn btn-danger btn-round" data-original-title="" title="">
                                                                <i class="material-icons">delete</i>
                                                            </button>
                                                        </td>
                                                    </tr>

                                                </tbody>
                                            </table>

                                        </div>
                                    </div>

                                    <div class="col-md-12">
                                        <div class="material-datatables">
                                            <table class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">
                                                <thead>
                                                    <tr>
                                                        <th>S.No</th>
                                                        <th>Voyage Types</th>
                                                        <th>Leg Information</th>
                                                        <th>Vessel/Voyage</th>
                                                        <th>Load Port</th>
                                                        <th>ETD</th>
                                                        @*<th>Next Port</th>*@
                                                        <th>.</th>
                                                        <th>ETA</th>

                                                        <th class="disabled-sorting text-right">Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr ng-repeat="gRow in DynamicGridVesselVoyage">
                                                        <td>{{$index+1}}</td>
                                                        <td><select style="width:100px;" class="form-control" ng-disabled="ControlMaindisable" id="ddlVoyageTypes" ng-model="gRow.VoyageTypes" options="{ allowClear: true }" ng-options="item.GeneralName for item in voyageTypes track by item.ID"></select></td>
                                                        <td><select class="form-control" ng-disabled="ControlMaindisable" id="ddlLeginformation" ng-model="gRow.LegInformation" options="{ allowClear: true }" ng-options="item.GeneralName for item in LegInformation track by item.ID"></select></td>
                                                        <td><select id="ddlVesVoy" ng-disabled="ControlMaindisable" ng-model="gRow.VesVoy" ng-change="SelectVesselVoyage(gRow)" class="form-control" ng-options="item.VesVoy for item in VesselNameAllvalues track by item.ID"></select></td>
                                                        <td><select id="ddlLoadPort" ng-disabled="ControlMaindisable" class="form-control" ng-model="gRow.LoadPort" options="{ allowClear: true }" ng-options="item.PortName for item in PortAllvalues track by item.ID"></select></td>
                                                        <td>
                                                            <input id="txtETD" ng-disabled="ControlMaindisable" type="text" class="form-control" ng-model="gRow.ETD" />
                                                            <input id="txtVID" ng-disabled="ControlMaindisable" type="hidden" class="form-control" ng-model="gRow.VID" />

                                                        </td>
                                                        <td><select id="ddlNextPort" ng-show="false" ng-disabled="ControlMaindisable" class="form-control" ng-model="gRow.NextPort" options="{ allowClear: true }" ng-options="item.PortName for item in PortAllvalues track by item.ID"></select></td>
                                                        <td>
                                                            <input id="txtETA" ng-disabled="ControlMaindisable" type="text" class="form-control" ng-model="gRow.ETA" />
                                                        </td>


                                                        <td class="td-actions text-right">
                                                            <button type="button" id="BtnAddVoy" rel="tooltip" ng-hide="true" ng-if="$last" ng-click="VoyageRowAdd(DynamicGridVesselVoyage,$index)" class="btn btn-primary btn-round" data-original-title="" title="">
                                                                <i class="material-icons">add</i>
                                                            </button>
                                                            <button type="button" rel="tooltip" ng-if="!$last" ng-hide="true" ng-click="RemoveVoyage(DynamicGridVesselVoyage,$index)" class="btn btn-danger btn-round" data-original-title="" title="">
                                                                <i class="material-icons">delete</i>
                                                            </button>
                                                        </td>
                                            </table>
                                        </div>
                                    </div>


                                    <div class="col-md-12" style="text-align:right;">
                                        <button type="submit" id="btnConfirm" ng-click="btnConfim();" class="btn btn-fill btn-info btntop">
                                            <i class="material-icons">add</i>
                                            Confirm
                                        </button>
                                        <button type="submit" id="btnCancelled" ng-click="btnOnclickCancelled();" class="btn btn-fill btn-danger btntop">
                                            <i class="material-icons">delete</i>
                                            Cancelled
                                        </button>

                                        <button type="submit" id="btnSave" ng-click="SaveRecord(DynamicGridCustomer,DynamicGridContainer,DynamicGridVesselVoyage);" class="btn btn-fill btn-success">
                                            <i class="material-icons">save</i>
                                            Save
                                        </button>
                                        <input type="hidden" id="RegId" ng-model="RegId" />
                                        <input type="hidden" id="BkgId" ng-model="BkgId" />
                                        <input type="hidden" id="HDVesVoyID" ng-model="HDVesVoyID" />
                                        <input type="hidden" id="HDCommodityTypeID" ng-model="HDCommodityTypeID" />
                                        <input type="hidden" id="HDBkgParty" ng-model="HDBkgParty" />
                                        <input type="hidden" id="ConfirmStatus" ng-model="ConfirmStatus" />

                                    </div>
                                </div>

                            </div>
                        </div>




                    </div>




                    <div class="modal fade" id="ModalPartName" style="margin:0 auto;" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-dialog exp">
                            <div class="modal-content">

                                <div class="modal-body">
                                    <div class="row">
                                        <div class="col-md-12" style="text-align:center;">
                                            <div class="card-header card-header-primary card-header-text" style=" margin-bottom: 20px;">
                                                <div class="card-text">
                                                    <h1 class="card-title">Party Details</h1>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-12" style="border-bottom: 1px dashed #ccc; margin-bottom:3px;">
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-4">
                                                        <label>PartName</label>
                                                        <input type="text" autocomplete="off" id="txtCustomerName" ng-model="txtCustomerName" class="form-control">
                                                    </div>

                                                    <div class="col-md-4">
                                                        <label>Country</label>
                                                        <select id="ddlCountry" class="form-control my-select" ng-model="ddlCountry" ng-options="item.CountryName for item in Country track by item.ID"></select>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label>Party Types</label>
                                                        <select id="ddlCusPartyTypes" class="form-control my-select" ng-model="CusPartyTypes" ng-options="item.BusinessTypes for item in BusinessTypesvalues track by item.ID"></select>
                                                    </div>

                                                    <div class="col-md-4">
                                                        <label>City</label>
                                                        <select id="ddlLocCity" ng-model="City" class="form-control my-select" ng-options="item.CityName for item in LocCity track by item.ID"></select>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label>State</label>
                                                        <select id="ddlLocState" ng-model="State" class="form-control my-select" ng-options="item.StateName for item in LocState track by item.ID">
                                                        </select>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label>Tel</label>
                                                        <input type="text" id="txtTel" autocomplete="off" ng-model="TelNo" class="form-control" />
                                                    </div>

                                                    <div class="col-md-12 padlr0">
                                                        <label>Address</label>
                                                        <textarea class="form-control" autocomplete="off" ng-model="Address" id="txtLocAddress" rows="3" style="height:80px!important;"></textarea>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label>Email ID</label>
                                                        <input type="text" id="txtEmailID" autocomplete="off" ng-model="EmailID" class="form-control" />
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label>GSTIN</label>
                                                        <input type="text" id="txtLocGSTIN" autocomplete="off" ng-model="GSTIN" class="form-control" />
                                                    </div>

                                                    <div class="col-md-4">
                                                        <label>Pan No</label>
                                                        <input type="text" id="txtPanNo" autocomplete="off" ng-model="PanNo" class="form-control" />
                                                    </div>
                                                </div>

                                            </div>
                                        </div>



                                        <div class="col-md-12" style="text-align:center;">
                                            <button type="submit" id="btnPartSave" ng-click="btnCustomerPartSave();" class="btn btn-success">
                                                <i class="material-icons">save</i>
                                                Submit
                                            </button>

                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>


                    <div class="modal fade" id="btnuploadExcelShow" style="margin:0 auto;" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

                        <div class="modal-dialog" style="width:500px !important">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                    <h4 class="modal-title" style="color:red" id="myModalLabel">Container Uploading</h4>
                                </div>
                                <div class="modal-body">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="card ">
                                                @*<div class="card-header card-header-primary card-header-text">
                                        <div class="card-text">
                                            <h4 class="card-title">Attached file</h4>
                                        </div>
                                    </div>*@
                                                <div class="input-group" style="margin-top:15px;">
                                                    @*<span class="input-group-addon"><a href="#" class="btn btn-rose btn-fill btn-round">Add Attachment</a></span>*@
                                                    @*<input class="btn btn-primary" type="file" style='position:absolute;z-index:2;top:0;left:0;filter: alpha(opacity=0);-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)"; opacity:0;background-color:transparent;color:transparent;' name="file_source" size="40" onchange="handleFile(this)">*@

                                                    <input type="file" ngf-select="SelectFile($file)" />
                                                    <input type="button" class="btn btn-primary" value="Upload" ng-click="Upload()" />
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>



                    <div class="modal fade" id="btnuploadCustomerExcelShow" style="margin:0 auto;" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

                        <div class="modal-dialog" style="width:500px !important">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                    <h4 class="modal-title" style="color:red" id="myModalLabel">Customer Uploading</h4>
                                </div>
                                <div class="modal-body">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="card ">
                                                @*<div class="card-header card-header-primary card-header-text">
                                        <div class="card-text">
                                            <h4 class="card-title">Attached file</h4>
                                        </div>
                                    </div>*@
                                                <div class="input-group" style="margin-top:15px;">
                                                    @*<span class="input-group-addon"><a href="#" class="btn btn-rose btn-fill btn-round">Add Attachment</a></span>*@
                                                    @*<input class="btn btn-primary" type="file" style='position:absolute;z-index:2;top:0;left:0;filter: alpha(opacity=0);-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)"; opacity:0;background-color:transparent;color:transparent;' name="file_source" size="40" onchange="handleFile(this)">*@

                                                    <input type="file" ngf-select="SelectCustomerFile($file)" />
                                                    <input type="button" class="btn btn-primary" value="Upload" ng-click="CustomerUpload()" />
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>


                    @*<table id="tblCustomers" cellpadding="0" cellspacing="0" ng-show="IsVisible">
            <tr>
                <th>Customer Id</th>
                <th>Name</th>
                <th>Country</th>
            </tr>
            <tbody ng-repeat="m in Customers">
                <tr>
                    <td>{{m.Id}}</td>
                    <td>{{m.Name}}</td>
                    <td>{{m.Country}}</td>
                </tr>
            </tbody>
        </table>*@
                </div>

            </div>








        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        // initialise Datetimepicker and Sliders
        md.initFormExtendedDatetimepickers();
        if ($('.slider').length != 0) {
            md.initSliders();
        }
    });
</script>