@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>

<script type="text/javascript">

    LayoutApp.controller('MyController', function ($scope, $http, $timeout) {

        $("#overlay").show();

        $(document).ready(function () {

            $('.my-select').select2({
                placeholder: "--Select--", allowClear: true, width: '100%'
            });

        });

        $scope.TransitValues = [
            { 'name': '--select--', 'ID': 0 },
            { 'name': 'RAIL', 'ID': 94 },
            { 'name': 'ROAD', 'ID': 93 }
        ];

        $scope.CntrTypesvalues = null;
        $scope.fillCntrTypeValues = function () {
            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/CntrTypeValues/',
                data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.CntrTypesvalues = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillCntrTypeValues();

        $scope.PortAllvalues = null;
        $scope.fillPortsValues = function () {
            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/PortValues/',
                data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.PortAllvalues = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillPortsValues();

        $scope.GeoLocationList = null;
        $scope.fillGeoLocationList = function () {
            $http({
                method: 'POST',
                url: '/api/Home/GeoLocationsMaster/',
                data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.GeoLocationList = result.data;

                });
            }, function (result) {

                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected. Please reconnect and try again.");
                }
            });

        };
        $scope.fillGeoLocationList();

        $(document).ready(function () {

            var queryString = new Array();
            if (window.location.search.split('?').length > 1) {
                var params = window.location.search.split('?')[1].split('&');
                for (var i = 0; i < params.length; i++) {
                    var key = params[i].split('=')[0];
                    var value = decodeURIComponent(params[i].split('=')[1]);
                    queryString[key] = value;
                }
            }
            if (queryString["BkgConfim"] != null) {
                $scope.HDConfirm = queryString["BkgConfim"].toString();

            }
            if (queryString["BkgRegID"] != null) {

                $scope.RegId = queryString["BkgRegID"].toString();
                $scope.ContainerReleaseOrderValue(queryString["BkgRegID"].toString());
                $scope.fileBookingdtls(queryString["BkgRegID"].toString());
                $scope.fileBookingCntrTypes(queryString["BkgRegID"].toString());
                $scope.ExistCntrBooking(queryString["BkgRegID"].toString());

            }
        });

        $scope.fileBookingdtls = function (BkgID) {

            var BussData = {};
            BussData.BkgID = BkgID;

            $http({
                method: 'POST',
                url: '/api/CntrPickupApi/Bookingdtls/',
                data: JSON.stringify(BussData),
            }).then(function (result) {
                $timeout(function () {

                    $scope.BookingNo = result.data[0].BookingNo;
                    $scope.VesselVoyage = result.data[0].VesVoy;
                    $scope.BkgParty = result.data[0].BkgParty;
                    $scope.HDCustomerID = result.data[0].CustomerID;
                    $scope.HDVoyID = result.data[0].VesVoyID;
                    $scope.HDPOLID = result.data[0].POOID;
                    $scope.HDBkgStatus = result.data[0].BkgStatus;
                    if (result.data[0].POOID == 0) {
                        document.getElementById("btnICDFullFC").disabled = true;
                        document.getElementById("btnICDFullFC").style.cursor = 'not-allowed';
                        document.getElementById("btnTransitFI").disabled = true;
                        document.getElementById("btnTransitFI").style.cursor = 'not-allowed';
                        document.getElementById("btnFLICD").disabled = true;
                        document.getElementById("btnFLICD").style.cursor = 'not-allowed';
                        document.getElementById("btnICDPL").disabled = true;
                        document.getElementById("btnICDPL").style.cursor = 'not-allowed';

                    }
                    else {


                    }



                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };


        $scope.BookingCntrTypesValues = null;
        $scope.fileBookingCntrTypes = function (BkgID) {

            var BussData = {};
            BussData.BkgID = BkgID;

            $http({
                method: 'POST',
                url: '/api/CntrPickupApi/BookingCntrTypes/',
                data: JSON.stringify(BussData),
            }).then(function (result) {
                $timeout(function () {

                    $scope.BookingCntrTypesValues = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };

        $scope.CntrNoPickup = function () {

            var CountType = 0;
            angular.forEach($scope.BookingCntrTypesValues, function (value, key) {
                CountType += parseFloat($scope.BookingCntrTypesValues[key].Qty);
            })

            var CntrCount = $scope.FillExstingCntrBookingValues.length;


            if (CountType <= CntrCount) {

                $('#Pickup').modal('hide');
                ShowPopup("Booking Container Quota exceeded");
                return;
            }


            $('#Pickup').modal('show');
            var CntrTypes = "";

            angular.forEach($scope.BookingCntrTypesValues, function (value, key) {
                CntrTypes += $scope.BookingCntrTypesValues[key].TypeID + ","
            })
            CntrTypes = CntrTypes.substring(0, CntrTypes.length - 1);
            $("#overlay").show();
            var BussData = {};
            BussData.CntrTypes = CntrTypes;
            BussData.LocationID = localStorage.getItem("GeoLocationID");
            BussData.CountryID = localStorage.getItem("CountryID");
            $http({
                method: 'POST',
                url: '/api/CntrPickupApi/BookingCntrPickup/',
                data: JSON.stringify(BussData),
            }).then(function (result) {
                $timeout(function () {

                    $scope.fillCntrNoPickup = result.data;
                    $scope.ExistCntrBooking($scope.RegId);
                    $("#overlay").hide();

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });

        }

        $scope.CntrMovmentRecord = function (gdata) {

            var validation = "";
            var PickupDate = $('#txtPickupDate').val();
            if (PickupDate.length == "") {
                validation += "<span style='color:red;'>*</span> <span>Please select PickupDate </span></br>"
            }

            var ddlAgency = $('#ddlAgency').val();
            if (ddlAgency == "?") {

                validation += "<span style='color:red;'>*</span> <span>Please Select Against CRO</span></br>"
            }

            var GivenDate = $('#txtPickupDate').val();
            var CurrentDate = new Date();
            GivenDate = new Date(GivenDate);
            var SelectedDate = moment.utc(GivenDate).local().format('YYYY-MM-DD');
            var CurrentDateV = moment.utc(CurrentDate).local().format('YYYY-MM-DD');

            if (SelectedDate > CurrentDateV) {
                validation += "<span style='color:red;'>*</span> <span>Date of Movement should not be greater than CurrentDate.</span></br>"
            }


            var date1;
            angular.forEach(gdata, function (value, key) {

                if (gdata[key].IsTrue == 1) {
                    date1 = gdata[key].DtMovement;
                }

            });

            var Local1 = moment.utc(date1).local().format('MMM DD YYYY h:mm A');
            var local = moment.utc(GivenDate).local().format('MMM DD YYYY h:mm A');

          
            if (Date.parse(Local1) >= Date.parse(local)) {

                validation += "<span style='color:red;'>*</span> <span>Date of Movement should be greater than previous movement Date</span></br>"
            }

            //const dateSelect = moment.utc(GivenDate).local().format('YYYY-MM-DD');
            //const dateMvPrev = moment.utc(date1).local().format('YYYY-MM-DD');
            //const dateSelect1 = new Date(dateSelect);
            //const dateMvPrev1 = new Date(dateMvPrev);
            //const diffTime = Math.abs(dateSelect1 - dateMvPrev1);
            //const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

            ////if (localStorage.getItem("UserID") != "1" && localStorage.getItem("UserID") != "3" && localStorage.getItem("UserID") != "11" && localStorage.getItem("UserID") != "12" && localStorage.getItem("UserID") != "13") {
            ////    if (diffDays > 5) {
            ////        validation += "<span style='color:red;'>*</span> <span>Please Contact EQC Team For the Movement Updation</span></br>"
            ////    }
            ////}

            const dateSelect1 = new Date(CurrentDateV);
            const dateMvPrev1 = new Date(SelectedDate);
            const diffTime = Math.abs(dateSelect1 - dateMvPrev1);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            const diffdaysV = diffDays - 1;
            //if (localStorage.getItem("UserID") != "1" && localStorage.getItem("UserID") != "3" && localStorage.getItem("UserID") != "11" && localStorage.getItem("UserID") != "12" && localStorage.getItem("UserID") != "13") {
            //    if (diffDays >= 6) {
            //        validation += "<span style='color:red;'>*</span> <span>Current Date of Movement exceeds 5 days limits, Please contact EQC team</span></br>"
            //    }
            //}
            if (validation != "") {
                ShowPopup(validation);
                return false;
            }


            $("#overlay").show();
            var BussData = {};
            var Items = [];
            BussData.BkgID = $scope.RegId;
            BussData.VoyID = $scope.HDVoyID;
            BussData.PickupDate = $('#txtPickupDate').val();
            BussData.AgentName = $("#ddlAgency option:selected").text();
            BussData.AgentID = $('#ddlAgency').val();
            BussData.AgencyID = localStorage.getItem("AgencyID");
            BussData.VoyageID = $scope.HDVoyID;
            BussData.CustomerID = $scope.HDCustomerID;
            BussData.UserID = localStorage.getItem("UserID");
            angular.forEach(gdata, function (value, key) {
                if (gdata[key].IsTrue == 1) {
                    Items.push('Insert:' + gdata[key].ID, gdata[key].CntrNo, gdata[key].TypeID, gdata[key].DepotID, gdata[key].CntrDepo,
                        gdata[key].StatusCode, gdata[key].CurrentPortID, gdata[key].Location);
                }
            });
            BussData.Items = Items.toString();




            $http({
                method: 'POST',
                url: '/api/CntrPickupApi/InsertCntrPickupMaster/',
                data: JSON.stringify(BussData),

            }).then(function (result) {
                $timeout(function () {
                    $("#overlay").hide();
                    ShowPopup("Container Pickup Successfully");
                    $scope.ExistCntrBooking($scope.RegId);
                    $('#Pickup').modal('hide');
                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {

                ShowPopup('There has been an error: ' + result);
            });


        }


        $scope.ExistCntrBooking = function (BkgID) {

            var BussData = {};
            BussData.BkgID = BkgID;
            $http({
                method: 'POST',
                url: '/api/CntrPickupApi/ExtPickcntrBookingMaster/',
                data: JSON.stringify(BussData),
            }).then(function (result) {
                $timeout(function () {

                    $scope.FillExstingCntrBookingValues = result.data;
                    $("#overlay").hide();
                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });

        }


        $scope.OnclickCntrUnPick = function (gdata) {

            if ($scope.HDBkgStatus == "2") {
                ShowPopup("Booking alredy Confirmed so unpick is not Possible");
                return;
            }

            var FBDate = $scope.FillExstingCntrBookingValues[0].FBDate;
            var FLDate = $scope.FillExstingCntrBookingValues[0].FLDate;

            if (FBDate != "" || FLDate != "") {
                ShowPopup("Sail Cntr is updated till FL/FV so unpick is not Possible");
                return;
            }

            var BussData = {};
            var Items = [];
            BussData.BkgID = $scope.RegId;
            BussData.VesVoyID = $scope.HDVoyID;
            BussData.AgentID = $("#ddlAgency").val();

            angular.forEach(gdata, function (value, key) {
                if (gdata[key].IsTrue == 1) {
                    Items.push('Delete:' + gdata[key].ID);
                }
            });
            BussData.Items = Items.toString();


            $http({
                method: 'POST',
                url: '/api/CntrPickupApi/FileDeleteCntrPickupdtls/',
                data: JSON.stringify(BussData),
            }).then(function (result) {
                $timeout(function () {
                    $scope.ExistCntrBooking($scope.RegId);
                    ShowPopup("Container Un-pickup Successfully");
                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });

        }

        $scope.OnclickBack = function () {

            if ($scope.HDConfirm == "1")
                window.location.href = "/Document/Booking?BkgRegID=" + $scope.RegId;
            else
                window.location.href = "/Document/ContainerPickupSearch";
        }

        $scope.ContainerReleaseOrderList = null;
        $scope.ContainerReleaseOrderValue = function (BkgID) {

            var BussData = {};
            BussData.BkgID = BkgID;
            $http({
                method: 'POST',
                url: '/api/CntrPickupApi/BkgCROReleaseOrderNo/',
                data: JSON.stringify(BussData),
            }).then(function (result) {
                $timeout(function () {

                    $scope.ContainerReleaseOrderList = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });

        }

        $scope.CntrNoPickupSearch = function () {
            var CntrTypes = "";

            angular.forEach($scope.BookingCntrTypesValues, function (value, key) {
                CntrTypes += $scope.BookingCntrTypesValues[key].TypeID + ","
            })
            CntrTypes = CntrTypes.substring(0, CntrTypes.length - 1);
            $("#overlay").show();

            var BussData = {};
            BussData.ID = "1";
            BussData.CntrNo = $scope.txtConainer;
            BussData.TypeID = $("#ddlCntrTypes").val();
            BussData.CntrTypes = CntrTypes;
            BussData.LocationID = localStorage.getItem("GeoLocationID");
            BussData.CountryID = localStorage.getItem("CountryID");
            $http({
                method: 'POST',
                url: '/api/CntrPickupApi/BookingCntrPickupSearch/',
                data: JSON.stringify(BussData),
            }).then(function (result) {
                $timeout(function () {

                    $scope.fillCntrNoPickup = result.data;
                    $scope.ExistCntrBooking($scope.RegId);


                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });

        }

        $scope.CntrNoCountValidation = function (item) {
            var Size20 = 0;
            var Size40 = 0;
            angular.forEach($scope.BookingCntrTypesValues, function (value, key) {

                if ($scope.BookingCntrTypesValues[key].Size = "20GP") {
                    Size20 += Number($scope.BookingCntrTypesValues[key].Qty);
                }
                else if ($scope.BookingCntrTypesValues[key].Size = "40GP") {
                    Size40 += Number($scope.BookingCntrTypesValues[key].Qty);
                }
            });

            var CntrNos = 0;
            var Rowint = 1;
            angular.forEach(item, function (value, key) {
                if (item[key].Size == "20GP") {
                    if (item[key].IsTrue == 1) {
                        Rowint++;
                        if (Size20 >= Rowint) {
                        }
                        else {
                            item[key].IsTrue = "0";
                        }
                    }

                }
            })
        }

        $scope.PortUpdateGI = function (gDate) {

            var DataVal = {};
            var CntrNo = "";
            var ItemsV = "";
            var date1;
            var currentdate;
            angular.forEach(gDate, function (value, key) {

                if (gDate[key].IsTrue == 1) {
                    ItemsV = gDate[key].ID;
                    date1 = gDate[key].MSDateF;
                    currentdate = gDate[key].CurrentDate;
                }
                else {
                    CntrNo += gDate[key].CntrNo + ",";
                }
            });


            var validation = "";
            var ddlLocationFL = $('#ddlLocationFL').val();
            if (ddlLocationFL == "?" || ddlLocationFL == null) {
                validation += "<span style='color:red;'>*</span> <span>Please select Location</span></br>"
            }

            var PickupDate = $('#txtPortInDate').val();
            if (PickupDate.length == "") {
                validation += "<span style='color:red;'>*</span> <span>Please select PortIn Date </span></br>"
            }

            if (CntrNo != "") {
                validation += "<span style='color:red;'>*</span> <span>Please select CntrNo( " + CntrNo + " )</span></br>"
            }
          
            var Local1 = moment.utc(date1).local().format('MMM DD YYYY h:mm A');
            var local = moment.utc(PickupDate).local().format('MMM DD YYYY h:mm A');

            if (Date.parse(Local1) >= Date.parse(local)) {

                validation += "<span style='color:red;'>*</span> <span>Date of Movement should be greater than previous movement Date</span></br>"
            }
            //if (Date.parse(local) >= Date.parse(getdate)) {
            //    validation += "<span style='color:red;'>*</span> <span>Date of Movement should not be greater than CurrentDate.</span></br>"
            //}

            var GivenDate = $('#txtPortInDate').val();
            var CurrentDate = new Date();
            GivenDate = new Date(GivenDate);
            var SelectedDate = moment.utc(GivenDate).local().format('YYYY-MM-DD');
            var CurrentDateV = moment.utc(CurrentDate).local().format('YYYY-MM-DD');

            if (SelectedDate > CurrentDateV) {
                validation += "<span style='color:red;'>*</span> <span>Date of Movement should not be greater than CurrentDate.</span></br>"
            }

            //const dateSelect = moment.utc(GivenDate).local().format('YYYY-MM-DD');
            //const dateMvPrev = moment.utc(date1).local().format('YYYY-MM-DD');
            //const dateSelect1 = new Date(dateSelect);
            //const dateMvPrev1 = new Date(dateMvPrev);
            //const diffTime = Math.abs(dateSelect1 - dateMvPrev1);
            //const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
 
            //if (localStorage.getItem("UserID") != "1" && localStorage.getItem("UserID") != "3" && localStorage.getItem("UserID") != "11" && localStorage.getItem("UserID") != "12" && localStorage.getItem("UserID") != "13") {
            //    if (diffDays > 5) {
            //        validation += "<span style='color:red;'>*</span> <span>Please Contact EQC Team For the Movement Updation</span></br>"
            //    }
            //}
            const dateSelect1 = new Date(CurrentDateV);
            const dateMvPrev1 = new Date(SelectedDate);
            const diffTime = Math.abs(dateSelect1 - dateMvPrev1);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            const diffdaysV = diffDays - 1;
            if (localStorage.getItem("UserID") != "1" && localStorage.getItem("UserID") != "3" && localStorage.getItem("UserID") != "11" && localStorage.getItem("UserID") != "12" && localStorage.getItem("UserID") != "13") {
                if (diffDays >= 6) {
                    validation += "<span style='color:red;'>*</span> <span>Current Date of Movement exceeds 5 days limits, Please contact EQC team</span></br>"
                }
            }
            if (validation != "") {
                ShowPopup(validation);
                return false;
            }
            
            var BussData = {};
            var Items = [];
            BussData.BkgID = $scope.RegId;
            BussData.VoyID = $scope.HDVoyID;
            BussData.PickupDate = $('#txtPortInDate').val();
            BussData.LocationID = $('#ddlLocationFL').val();
            BussData.AgentName = $("#ddlAgency option:selected").text();
            BussData.AgentID = localStorage.getItem("AgencyID");
            BussData.VoyageID = $scope.HDVoyID;
            BussData.CustomerID = $scope.HDCustomerID;
            BussData.UserID = localStorage.getItem("UserID");
            angular.forEach(gDate, function (value, key) {

                if (gDate[key].IsTrue == 1) {
                    Items.push('Insert:' + gDate[key].ID, gDate[key].LocationID, gDate[key].CurrentDepotID);
                }
            });

            BussData.Items = Items.toString();

            $http({
                method: 'POST',
                url: '/api/CntrPickupApi/InsertCntrPortInMaster/',
                data: JSON.stringify(BussData),

            }).then(function (result) {
                $timeout(function () {

                    ShowPopup("Container PortIn Successfully");
                    $scope.ExistCntrBooking($scope.RegId);
                    $('#Portin').modal('hide');
                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {

                ShowPopup('There has been an error: ' + result);
            });

        }


        $scope.RoadtoPortupdate = function (gDate) {

            var validation = "";
            var ddlLocationFI = $('#ddlLocationFI').val();
            if (ddlLocationFI == "?" || ddlLocationFI == null) {
                validation += "<span style='color:red;'>*</span> <span>Please select Location</span></br>"
            }

            var ddlTransit = $('#ddlTransit').val();
            if (ddlTransit == "?" || ddlTransit == null) {
                validation += "<span style='color:red;'>*</span> <span>Please select Transit</span></br>"
            }

            var PickupDate = $('#txtRoadtoPortDate').val();
            if (PickupDate.length == "") {
                validation += "<span style='color:red;'>*</span> <span>Please select Road to Port Date </span></br>"
            }

            var CntrNo = "";
            var date1;
            angular.forEach(gDate, function (value, key) {

                if (gDate[key].IsTrue == 1) {
                    ItemsV = gDate[key].ID;
                    date1 = gDate[key].MSDateF;
                }
                else {
                    CntrNo += gDate[key].CntrNo + ",";
                }
            });

            if (CntrNo != "") {
                validation += "<span style='color:red;'>*</span> <span>Please select CntrNo( " + CntrNo + " )</span></br>"
            }
            var Local1 = moment.utc(date1).local().format('MMM DD YYYY h:mm A');
            var local = moment.utc(PickupDate).local().format('MMM DD YYYY h:mm A');

            if (Date.parse(Local1) >= Date.parse(local)) {

                validation += "<span style='color:red;'>*</span> <span>Date of Movement should be greater than previous movement Date</span></br>"
            }
            var GivenDate = $('#txtRoadtoPortDate').val();
            var CurrentDate = new Date();
            GivenDate = new Date(GivenDate);
            var SelectedDate = moment.utc(GivenDate).local().format('YYYY-MM-DD');
            var CurrentDateV = moment.utc(CurrentDate).local().format('YYYY-MM-DD');

            if (SelectedDate > CurrentDateV) {
                validation += "<span style='color:red;'>*</span> <span>Date of Movement should not be greater than CurrentDate.</span></br>"
            }
            //const dateSelect = moment.utc(GivenDate).local().format('YYYY-MM-DD');
            //const dateMvPrev = moment.utc(date1).local().format('YYYY-MM-DD');
            //const dateSelect1 = new Date(dateSelect);
            //const dateMvPrev1 = new Date(dateMvPrev);
            //const diffTime = Math.abs(dateSelect1 - dateMvPrev1);
            //const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

            //if (localStorage.getItem("UserID") != "1" && localStorage.getItem("UserID") != "3" && localStorage.getItem("UserID") != "11" && localStorage.getItem("UserID") != "12" && localStorage.getItem("UserID") != "13") {
            //    if (diffDays > 5) {
            //        validation += "<span style='color:red;'>*</span> <span>Please Contact EQC Team For the Movement Updation</span></br>"
            //    }
            //}
            const dateSelect1 = new Date(CurrentDateV);
            const dateMvPrev1 = new Date(SelectedDate);
            const diffTime = Math.abs(dateSelect1 - dateMvPrev1);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            const diffdaysV = diffDays - 1;
            if (localStorage.getItem("UserID") != "1" && localStorage.getItem("UserID") != "3" && localStorage.getItem("UserID") != "11" && localStorage.getItem("UserID") != "12" && localStorage.getItem("UserID") != "13") {
                if (diffDays >= 6) {
                    validation += "<span style='color:red;'>*</span> <span>Current Date of Movement exceeds 5 days limits, Please contact EQC team</span></br>"
                }
            }
            if (validation != "") {
                ShowPopup(validation);
                return false;
            }

            var BussData = {};
            var Items = [];
            BussData.BkgID = $scope.RegId;
            BussData.VoyID = $scope.HDVoyID;
            BussData.PickupDate = $('#txtRoadtoPortDate').val();
            BussData.LocationID = $('#ddlLocationFI').val();
            BussData.ModeOfTransportID = $('#ddlTransit').val();
            BussData.AgentName = $("#ddlAgency option:selected").text();
            BussData.AgentID = localStorage.getItem("AgencyID");
            BussData.VoyageID = $scope.HDVoyID;
            BussData.CustomerID = $scope.HDCustomerID;
            BussData.UserID = localStorage.getItem("UserID");
            angular.forEach(gDate, function (value, key) {
                if (gDate[key].IsTrue == 1) {
                    Items.push('Insert:' + gDate[key].ID, gDate[key].LocationID, gDate[key].CurrentDepotID);
                }
            });
            BussData.Items = Items.toString();

            $http({
                method: 'POST',
                url: '/api/CntrPickupApi/InsertCntrRoadToPortMaster/',
                data: JSON.stringify(BussData),

            }).then(function (result) {
                $timeout(function () {

                    ShowPopup("Container Port to Port Successfully");
                    $scope.ExistCntrBooking($scope.RegId);
                    $('#Portin').modal('hide');
                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {

                ShowPopup('There has been an error: ' + result);
            });

        }


        $scope.RailtoPortupdate = function (gDate) {

            var validation = "";
            var ddlLocationFC = $('#ddlLocationFC').val();
            if (ddlLocationFC == "?" || ddlLocationFC == null) {
                validation += "<span style='color:red;'>*</span> <span>Please select Location</span></br>"
            }


            var PickupDate = $('#txtRailtoPortDate').val();
            if (PickupDate.length == "") {
                validation += "<span style='color:red;'>*</span> <span>Please select PortIn Date </span></br>"
            }
            var CntrNo = "";
            var date1;
            angular.forEach(gDate, function (value, key) {

                if (gDate[key].IsTrue == 1) {
                    ItemsV = gDate[key].ID;
                    date1 = gDate[key].MSDateF;
                }
                else {
                    CntrNo += gDate[key].CntrNo + ",";
                }
            });

            if (CntrNo != "") {
                validation += "<span style='color:red;'>*</span> <span>Please select CntrNo( " + CntrNo + " )</span></br>"
            }
            var Local1 = moment.utc(date1).local().format('MMM DD YYYY h:mm A');
            var local = moment.utc(PickupDate).local().format('MMM DD YYYY h:mm A');

            if (Date.parse(Local1) >= Date.parse(local)) {

                validation += "<span style='color:red;'>*</span> <span>Date of Movement should be greater than previous movement Date</span></br>"
            }
            var GivenDate = $('#txtRailtoPortDate').val();
            var CurrentDate = new Date();
            GivenDate = new Date(GivenDate);
            var SelectedDate = moment.utc(GivenDate).local().format('YYYY-MM-DD');
            var CurrentDateV = moment.utc(CurrentDate).local().format('YYYY-MM-DD');

            if (SelectedDate > CurrentDateV) {
                validation += "<span style='color:red;'>*</span> <span>Date of Movement should not be greater than CurrentDate.</span></br>"
            }

            //const dateSelect = moment.utc(GivenDate).local().format('YYYY-MM-DD');
            //const dateMvPrev = moment.utc(date1).local().format('YYYY-MM-DD');
            //const dateSelect1 = new Date(dateSelect);
            //const dateMvPrev1 = new Date(dateMvPrev);
            //const diffTime = Math.abs(dateSelect1 - dateMvPrev1);
            //const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

            //if (localStorage.getItem("UserID") != "1" && localStorage.getItem("UserID") != "3" && localStorage.getItem("UserID") != "11" && localStorage.getItem("UserID") != "12" && localStorage.getItem("UserID") != "13") {
            //    if (diffDays > 5) {
            //        validation += "<span style='color:red;'>*</span> <span>Please Contact EQC Team For the Movement Updation</span></br>"
            //    }
            //}
            const dateSelect1 = new Date(CurrentDateV);
            const dateMvPrev1 = new Date(SelectedDate);
            const diffTime = Math.abs(dateSelect1 - dateMvPrev1);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            const diffdaysV = diffDays - 1;

            if (localStorage.getItem("UserID") != "1" && localStorage.getItem("UserID") != "3" && localStorage.getItem("UserID") != "11" && localStorage.getItem("UserID") != "12" && localStorage.getItem("UserID") != "13") {
                if (diffDays >= 6) {
                    validation += "<span style='color:red;'>*</span> <span>Current Date of Movement exceeds 5 days limits, Please contact EQC team</span></br>"
                }
            }
            if (validation != "") {
                ShowPopup(validation);
                return false;
            }

            var BussData = {};
            var Items = [];
            BussData.BkgID = $scope.RegId;
            BussData.VoyID = $scope.HDVoyID;
            BussData.PickupDate = $('#txtRailtoPortDate').val();
            BussData.LocationID = $('#ddlLocationFC').val();
            BussData.AgentName = $("#ddlAgency option:selected").text();;
            BussData.AgentID = localStorage.getItem("AgencyID");
            BussData.CustomerID = $scope.HDCustomerID;
            BussData.UserID = localStorage.getItem("UserID");
            BussData.VoyageID = $scope.HDVoyID;
            angular.forEach(gDate, function (value, key) {
                if (gDate[key].IsTrue == 1) {
                    Items.push('Insert:' + gDate[key].ID, gDate[key].LocationID, gDate[key].CurrentDepotID);
                }
            });
            BussData.Items = Items.toString();

            $http({
                method: 'POST',
                url: '/api/CntrPickupApi/InsertCntrRailToPortMaster/',
                data: JSON.stringify(BussData),

            }).then(function (result) {
                $timeout(function () {

                    ShowPopup("Container Rail to Port Successfully");
                    $scope.ExistCntrBooking($scope.RegId);
                    $('#Portin').modal('hide');
                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {

                ShowPopup('There has been an error: ' + result);
            });

        }


        $scope.FLICDUpdate = function (gDate) {

            var validation = "";
            var ddlLocationFLICD = $('#ddlLocationFLICD').val();
            if (ddlLocationFLICD == "?" || ddlLocationFLICD == null) {
                validation += "<span style='color:red;'>*</span> <span>Please select Location</span></br>"
            }


            var PickupDate = $('#txtFLICDDate').val();
            if (PickupDate.length == "") {
                validation += "<span style='color:red;'>*</span> <span>Please select FLICD Date </span></br>"
            }
            var CntrNo = "";
            var date1;
            angular.forEach(gDate, function (value, key) {

                if (gDate[key].IsTrue == 1) {
                    ItemsV = gDate[key].ID;
                    date1 = gDate[key].MSDateF;
                }
                else {
                    CntrNo += gDate[key].CntrNo + ",";
                }
            });

            if (CntrNo != "") {
                validation += "<span style='color:red;'>*</span> <span>Please select CntrNo( " + CntrNo + " )</span></br>"
            }
            var Local1 = moment.utc(date1).local().format('MMM DD YYYY h:mm A');
            var local = moment.utc(PickupDate).local().format('MMM DD YYYY h:mm A');
            if (Date.parse(Local1) >= Date.parse(local)) {

                validation += "<span style='color:red;'>*</span> <span>Date of Movement should be greater than previous movement Date</span></br>"
            }
            var GivenDate = $('#txtFLICDDate').val();
            var CurrentDate = new Date();
            GivenDate = new Date(GivenDate);
            var SelectedDate = moment.utc(GivenDate).local().format('YYYY-MM-DD');
            var CurrentDateV = moment.utc(CurrentDate).local().format('YYYY-MM-DD');

            if (SelectedDate > CurrentDateV) {
                validation += "<span style='color:red;'>*</span> <span>Date of Movement should not be greater than CurrentDate.</span></br>"
            }

            //const dateSelect = moment.utc(GivenDate).local().format('YYYY-MM-DD');
            //const dateMvPrev = moment.utc(date1).local().format('YYYY-MM-DD');
            //const dateSelect1 = new Date(dateSelect);
            //const dateMvPrev1 = new Date(dateMvPrev);
            //const diffTime = Math.abs(dateSelect1 - dateMvPrev1);
            //const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

            //if (localStorage.getItem("UserID") != "1" && localStorage.getItem("UserID") != "3" && localStorage.getItem("UserID") != "11" && localStorage.getItem("UserID") != "12" && localStorage.getItem("UserID") != "13") {
            //    if (diffDays > 5) {
            //        validation += "<span style='color:red;'>*</span> <span>Please Contact EQC Team For the Movement Updation</span></br>"
            //    }
            //}
            const dateSelect1 = new Date(CurrentDateV);
            const dateMvPrev1 = new Date(SelectedDate);
            const diffTime = Math.abs(dateSelect1 - dateMvPrev1);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            const diffdaysV = diffDays - 1;

            if (localStorage.getItem("UserID") != "1" && localStorage.getItem("UserID") != "3" && localStorage.getItem("UserID") != "11" && localStorage.getItem("UserID") != "12" && localStorage.getItem("UserID") != "13") {
                if (diffDays >= 6) {
                    validation += "<span style='color:red;'>*</span> <span>Current Date of Movement exceeds 5 days limits, Please contact EQC team</span></br>"
                }
            }
            if (validation != "") {
                ShowPopup(validation);
                return false;
            }

            var BussData = {};
            var Items = [];
            BussData.BkgID = $scope.RegId;
            BussData.VoyID = $scope.HDVoyID;
            BussData.PickupDate = $('#txtFLICDDate').val();
            BussData.LocationID = $('#ddlLocationFLICD').val();
            BussData.AgentName = $("#ddlAgency option:selected").text();;
            BussData.AgentID = localStorage.getItem("AgencyID");
            BussData.CustomerID = $scope.HDCustomerID;
            BussData.UserID = localStorage.getItem("UserID");
            BussData.VoyageID = $scope.HDVoyID;
            angular.forEach(gDate, function (value, key) {
                if (gDate[key].IsTrue == 1) {
                    Items.push('Insert:' + gDate[key].ID, gDate[key].LocationID, gDate[key].CurrentDepotID);
                }
            });
            BussData.Items = Items.toString();

            $http({
                method: 'POST',
                url: '/api/CntrPickupApi/InsertFLICDMovement/',
                data: JSON.stringify(BussData),

            }).then(function (result) {
                $timeout(function () {

                    ShowPopup("Laden Container Received at ICD Successfully");
                    $scope.ExistCntrBooking($scope.RegId);
                    $('#Portin').modal('hide');
                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {

                ShowPopup('There has been an error: ' + result);
            });

        }

        $scope.PLUpdate = function (gDate) {

            var validation = "";
            var ddlLocationPL = $('#ddlLocationPL').val();
            if (ddlLocationPL == "?" || ddlLocationPL == null) {
                validation += "<span style='color:red;'>*</span> <span>Please select Location</span></br>"
            }


            var PickupDate = $('#txtPLDate').val();
            if (PickupDate.length == "") {
                validation += "<span style='color:red;'>*</span> <span>Please select PL Date </span></br>"
            }
            var CntrNo = "";
            var date1;
            angular.forEach(gDate, function (value, key) {

                if (gDate[key].IsTrue == 1) {
                    ItemsV = gDate[key].ID;
                    date1 = gDate[key].MSDateF;
                }
                else {
                    CntrNo += gDate[key].CntrNo + ",";
                }
            });

            if (CntrNo != "") {
                validation += "<span style='color:red;'>*</span> <span>Please select CntrNo( " + CntrNo + " )</span></br>"
            }
            var Local1 = moment.utc(date1).local().format('MMM DD YYYY h:mm A');
            var local = moment.utc(PickupDate).local().format('MMM DD YYYY h:mm A');
            if (Date.parse(Local1) >= Date.parse(local)) {

                validation += "<span style='color:red;'>*</span> <span>Date of Movement should be greater than previous movement Date</span></br>"
            }

            var GivenDate = $('#txtPLDate').val();
            var CurrentDate = new Date();
            GivenDate = new Date(GivenDate);
            var SelectedDate = moment.utc(GivenDate).local().format('YYYY-MM-DD');
            var CurrentDateV = moment.utc(CurrentDate).local().format('YYYY-MM-DD');

            if (SelectedDate > CurrentDateV) {
                validation += "<span style='color:red;'>*</span> <span>Date of Movement should not be greater than CurrentDate.</span></br>"
            }
            //const dateSelect = moment.utc(GivenDate).local().format('YYYY-MM-DD');
            //const dateMvPrev = moment.utc(date1).local().format('YYYY-MM-DD');
            //const dateSelect1 = new Date(dateSelect);
            //const dateMvPrev1 = new Date(dateMvPrev);
            //const diffTime = Math.abs(dateSelect1 - dateMvPrev1);
            //const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

            //if (localStorage.getItem("UserID") != "1" && localStorage.getItem("UserID") != "3" && localStorage.getItem("UserID") != "11" && localStorage.getItem("UserID") != "12" && localStorage.getItem("UserID") != "13") {
            //    if (diffDays > 5) {
            //        validation += "<span style='color:red;'>*</span> <span>Please Contact EQC Team For the Movement Updation</span></br>"
            //    }
            //}
            const dateSelect1 = new Date(CurrentDateV);
            const dateMvPrev1 = new Date(SelectedDate);
            const diffTime = Math.abs(dateSelect1 - dateMvPrev1);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            const diffdaysV = diffDays - 1;
            if (localStorage.getItem("UserID") != "1" && localStorage.getItem("UserID") != "3" && localStorage.getItem("UserID") != "11" && localStorage.getItem("UserID") != "12" && localStorage.getItem("UserID") != "13") {
                if (diffDays >= 6) {
                    validation += "<span style='color:red;'>*</span> <span>Current Date of Movement exceeds 5 days limits, Please contact EQC team</span></br>"
                }
            }

            if (validation != "") {
                ShowPopup(validation);
                return false;
            }

            var BussData = {};
            var Items = [];
            BussData.BkgID = $scope.RegId;
            BussData.VoyID = $scope.HDVoyID;
            BussData.PickupDate = $('#txtPLDate').val();
            BussData.LocationID = $('#ddlLocationPL').val();
            BussData.AgentName = $("#ddlAgency option:selected").text();;
            BussData.AgentID = localStorage.getItem("AgencyID");
            BussData.CustomerID = $scope.HDCustomerID;
            BussData.UserID = localStorage.getItem("UserID");
            BussData.VoyageID = $scope.HDVoyID;
            angular.forEach(gDate, function (value, key) {
                if (gDate[key].IsTrue == 1) {
                    Items.push('Insert:' + gDate[key].ID, gDate[key].LocationID, gDate[key].CurrentDepotID);
                }
            });
            BussData.Items = Items.toString();

            $http({
                method: 'POST',
                url: '/api/CntrPickupApi/InsertCntrPLMovement/',
                data: JSON.stringify(BussData),

            }).then(function (result) {
                $timeout(function () {

                    ShowPopup("LADEN CONTAINER GATED IN PORT FROM ICD Successfully");
                    $scope.ExistCntrBooking($scope.RegId);
                    $('#Portin').modal('hide');
                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {

                ShowPopup('There has been an error: ' + result);
            });

        }


        $scope.btnCntrMovementFI = function () {
            var CntrMovmentFI = "True";

            angular.forEach($scope.FillExstingCntrBookingValues, function (value, key) {
                if ($scope.FillExstingCntrBookingValues[key].IsTrue == "1") {
                    if ($scope.FillExstingCntrBookingValues[key].FIDate != "") {
                        CntrMovmentFI = "False"
                    }
                }
            });
            var validation = "";

            if (CntrMovmentFI == "False")
                validation += "<span style='color:red;'>*</span> <span> Alredy FI Movement done please contact admin</span></br>"


            if (validation != "") {
                ShowPopup(validation);
                return false;
            }
            if ($scope.HDPOLID != 0)
                $('#RoadPort').modal('show');

        }

        $scope.btnCntrMovementFL = function () {


            var CntrMovmentFL = "True";

            angular.forEach($scope.FillExstingCntrBookingValues, function (value, key) {
                if ($scope.FillExstingCntrBookingValues[key].IsTrue == "1") {
                    if ($scope.FillExstingCntrBookingValues[key].FLDate != "") {
                        CntrMovmentFL = "False"
                    }
                }
            });
            var validation = "";

            if (CntrMovmentFL == "False")
                validation += "<span style='color:red;'>*</span> <span> Alredy FL Movement done please contact admin</span></br>"

            var IntRow = 0;
            for (var i = 0; i < $scope.FillExstingCntrBookingValues.length; i++) {

                if ($scope.FillExstingCntrBookingValues[i].IsTrue == 1) {
                    IntRow = true;
                    break;

                }
                else {

                    IntRow = false;
                }

            }
            if (IntRow == false) {
                validation += "<span style='color:red;'>*</span> <span>Please flag Container </span></br>"
            }

            if (validation != "") {
                ShowPopup(validation);
                return false;
            }
            $('#Portin').modal('show');

        }

        $scope.btnCntrMovementFC = function () {

            var CntrMovmentFC = "True";

            angular.forEach($scope.FillExstingCntrBookingValues, function (value, key) {
                if ($scope.FillExstingCntrBookingValues[key].IsTrue == "1") {
                    if ($scope.FillExstingCntrBookingValues[key].FCDate != "") {
                        CntrMovmentFC = "False"
                    }
                }
            });
            var validation = "";

            if (CntrMovmentFC == "False")
                validation += "<span style='color:red;'>*</span> <span> Alredy FC Movement done please contact admin</span></br>"


            if (validation != "") {
                ShowPopup(validation);
                return false;
            }

            if ($scope.HDPOLID != 0)
                $('#RailToPort').modal('show');
        }

        $scope.btnCntrMovementFLICD = function () {

            var CntrMovmentFLICD = "True";

            angular.forEach($scope.FillExstingCntrBookingValues, function (value, key) {
                if ($scope.FillExstingCntrBookingValues[key].IsTrue == "1") {
                    if ($scope.FillExstingCntrBookingValues[key].FLICDDate != "") {
                        CntrMovmentFLICD = "False"
                    }
                }
            });
            var validation = "";

            if (CntrMovmentFLICD == "False")
                validation += "<span style='color:red;'>*</span> <span> Already FLICD Movement done please contact admin</span></br>"

            var IntRow = 0;
            for (var i = 0; i < $scope.FillExstingCntrBookingValues.length; i++) {

                if ($scope.FillExstingCntrBookingValues[i].IsTrue == 1) {
                    IntRow = true;
                    break;

                }
                else {

                    IntRow = false;
                }

            }
            if (IntRow == false) {
                validation += "<span style='color:red;'>*</span> <span>Please flag Container </span></br>"
            }

            if (validation != "") {
                ShowPopup(validation);
                return false;
            }

            if ($scope.HDPOLID != 0)
                $('#FLICD').modal('show');
        }

        $scope.btnCntrMovementPL = function () {

            var CntrMovmentPL = "True";

            angular.forEach($scope.FillExstingCntrBookingValues, function (value, key) {
                if ($scope.FillExstingCntrBookingValues[key].IsTrue == "1") {
                    if ($scope.FillExstingCntrBookingValues[key].PLDate != "") {
                        CntrMovmentPL = "False"
                    }
                }
            });
            var validation = "";

            if (CntrMovmentPL == "False")
                validation += "<span style='color:red;'>*</span> <span> Already FLICD Movement done please contact admin</span></br>"

            var IntRow = 0;
            for (var i = 0; i < $scope.FillExstingCntrBookingValues.length; i++) {

                if ($scope.FillExstingCntrBookingValues[i].IsTrue == 1) {
                    IntRow = true;
                    break;

                }
                else {

                    IntRow = false;
                }

            }
            if (IntRow == false) {
                validation += "<span style='color:red;'>*</span> <span>Please flag Container </span></br>"
            }

            if (validation != "") {
                ShowPopup(validation);
                return false;
            }

            if ($scope.HDPOLID != 0)
                $('#PLICD').modal('show');
        }

        $scope.CheckBoxHeadChecked = function (checked) {

            for (var i = 0; i < $scope.FillExstingCntrBookingValues.length; i++) {

                $scope.FillExstingCntrBookingValues[i].IsTrue = checked;

            }
        };
    });

    function ShowPopup(message) {
        swal(message);
    };




</script>
<style>
    .modal-dialog .modal-header .close {
        color: #fff !important;
        padding-right: 0px !important;
        top: -8px !important;
    }

    .btn-warning {
        padding: 8px 25px;
        margin: 0;
    }

    .btn {
        padding: 6px 20px;
    }

    .card .pickupdiv .table tr td {
        font-size: 11px;
        white-space: nowrap !important;
        border: 1px solid #ccc;
        padding-top: 1px;
        padding-bottom: 1px;
        /* font-weight: 600;*/
        background-color: #f0f8ff78;
        font-weight: 500;
    }

    .card .pickupdiv .table tr th {
        position: sticky;
        top: 0;
        z-index: 1;
        background-color: #2a3f54!important;
    }

    .modal-dialog .modal-header .modal-title {
        margin-top: -13px !important;
        color: #fff !important;
        font-size: 18px;
    }

    .modal-dialog .modal-header {
        background-color: #1e4383 !important;
    }
</style>
<div ng-app="MyApp" ng-controller="MyController">

    <div id="overlay" style="display:none;">
        <div class="loadcontainer">
            <div class="spinner"></div>
            <p>Loading Please Wait</p>
        </div>
    </div>


    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12 backbtn" style="text-align:right;">
                <a href="#" ng-click="OnclickBack();" type="submit" class="btn btn-fill btn-success btn-round btntop">
                    <i class="material-icons">reply</i> Back
                </a>

            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="card ">
                    <div class="card-header card-header-primary card-header-text">

                        <div class="card-text">
                            <h4 class="card-title">Container Pick Up</h4>
                        </div>
                    </div>
                    <div class="card-body ">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group" style="margin-top:0;">
                                            <div class="row">
                                                <div class="col-md-3" style="border: 1px solid #ccc; background-color: #eeeeee59; border-top: 5px solid #ebc354; ">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label>Booking/BL No</label>
                                                        </div>
                                                        <div class="col-md-12">
                                                            <span ng-bind="BookingNo"></span>
                                                        </div>
                                                    </div>


                                                </div>
                                                <div class="col-md-3" style="border: 1px solid #ccc; background-color: #eeeeee59; border-top: 5px solid #ebc354; ">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label>Booking Party</label>
                                                        </div>
                                                        <div class="col-md-12">
                                                            <span ng-bind="BkgParty"></span>
                                                        </div>
                                                    </div>

                                                </div>
                                                <div class="col-md-3" style="border: 1px solid #ccc; background-color:#eeeeee59; border-top: 5px solid #ebc354; ">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label>Vessel/Voyage</label>
                                                        </div>
                                                        <div class="col-md-12">
                                                            <span ng-bind="VesselVoyage"></span>
                                                            <input type="hidden" id="HDVoyID" ng-model="HDVoyID" />
                                                        </div>
                                                    </div>


                                                </div>
                                                <div class="col-md-3" style="border: 1px solid #ccc; background-color:#eeeeee59; border-top: 5px solid #ebc354; ">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label>Container Size Type/Volume</label>
                                                        </div>
                                                        <div class="col-md-12">
                                                            <table>
                                                                <tr ng-repeat="gRow in BookingCntrTypesValues">
                                                                    <td>{{gRow.Size}}</td>
                                                                    <td> * </td>
                                                                    <td>{{gRow.Qty}}</td>
                                                                </tr>
                                                            </table>
                                                        </div>
                                                    </div>


                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="row">
                                            <div class="col-md-3" style="border: 1px solid #ccc; background-color: #eeeeee59;width:300px; ">
                                                <div class="col-md-12">
                                                    <h5 style="text-align:center;" class="cardtitle">Container Pick/UnPick </h5>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-12" style="text-align:center;">
                                                        <a href="#" class="btn btn-success" data-toggle="modal" ng-click="CntrNoPickup();">Pick UP</a>
                                                        <a href="#" class="btn btn-primary" ng-click="OnclickCntrUnPick(FillExstingCntrBookingValues);">Un Pick UP</a>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3" style="border: 1px solid #ccc; background-color: #eeeeee59;width:300px; ">
                                                <div class="col-md-12">
                                                    <h5 style="text-align: center;" class="cardtitle">Direct Movement</h5>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-12" style="text-align:center;">
                                                        <a href="#" class="btn btn-default" ng-click="btnCntrMovementFL();">PORT IN(FL)</a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6" style="border: 1px solid #ccc; background-color: #eeeeee59;width:300px; ">
                                                <div class="col-md-12">
                                                    <h5 style="text-align: center;" class="cardtitle">ICD Movement</h5>

                                                </div>
                                                <div class="col-md-12" style="text-align: center;">
                                                    <a href="#" class="btn btn-default" id="btnICDFullFC" ng-click="btnCntrMovementFC()">ICD-STUFFING(FC)</a>
                                                    <a href="#" class="btn btn-default" id="btnFLICD" ng-click="btnCntrMovementFLICD()">FL-ICD</a>
                                                    <a href="#" class="btn btn-default" id="btnICDPL" ng-click="btnCntrMovementPL()">ICD PORT IN (PL)</a>
                                                    <a href="#" class="btn btn-default" id="btnTransitFI" ng-click="btnCntrMovementFI();">TRANSIT(FI)</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="modal" id="Pickup" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                        <div class="modal-dialog">
                                            <div class="modal-content" style="margin:0 auto; width:1000px;">

                                                <!-- Modal Header -->
                                                <div class="modal-header">
                                                    <h4 class="modal-title">Select Container</h4>
                                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                </div>

                                                <!-- Modal body -->
                                                <div class="modal-body" style="padding-bottom:0;border-bottom: 1px solid #ccc;margin-bottom:6px;">
                                                    <div class="row">
                                                        <div class="col-md-3"><h5 style="margin-top:10px;">Available Container</h5></div>
                                                        <div class="col-md-9">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-md-2">
                                                                        <label>Search Type</label>
                                                                    </div>
                                                                    <div class="col-md-3 padlr0">
                                                                        <select class="form-control" id="ddlCntrTypes" ng-model="ddlCntrTypes" ng-options="item.CntrTypes for item in CntrTypesvalues track by item.ID">
                                                                        </select>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <input type="text" id="txtConainer" style="width:100%;" class="form-control" ng-model="txtConainer" />
                                                                    </div>
                                                                    <div class="col-md-1">
                                                                        <a href="#" ng-click="CntrNoPickupSearch();"> <i class="material-icons">search</i></a>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row pickupdiv">
                                                        <div class="col-md-12">
                                                            <div class="material-datatables" style="overflow:auto;height:200px;">
                                                                <table class="table table-striped table-no-bordered table-hover" style="margin-bottom:-2px;">

                                                                    <thead>
                                                                        <tr>
                                                                            <th>#</th>
                                                                            <th>Container #</th>
                                                                            <th>Size Type</th>
                                                                            <th>Location</th>
                                                                            <th>DtMovement</th>
                                                                            <th>Agent</th>
                                                                            <th>Current Depot</th>
                                                                            <th>Status</th>

                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <tr ng-repeat="gRow in fillCntrNoPickup">
                                                                            <td>
                                                                                <input type="checkbox" ng-true-value="1" ng-click="CntrNoCountValidation(fillCntrNoPickup);" ng-checked="gRow.IsTrue" ng-false-value="0" id="InvCheck" ng-model="gRow.IsTrue" />
                                                                            </td>
                                                                            <td>{{gRow.CntrNo}}</td>
                                                                            <td>{{gRow.Size}}</td>
                                                                            <td>{{gRow.Location}}</td>
                                                                            <td>{{gRow.DtMovement}}</td>
                                                                            <td>
                                                                                {{gRow.AgentName}}
                                                                            </td>
                                                                            <td>{{gRow.CntrDepo}}</td>
                                                                            <td>{{gRow.StatusCode}}</td>

                                                                        </tr>
                                                                    </tbody>
                                                                </table>


                                                            </div>
                                                            @*<div class="material-datatables" style="overflow-y:scroll; height:250px;">


                                                                </div>*@
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-md-3">
                                                                        <label>Pickup Date</label>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <input type="datetime-local" id="txtPickupDate" ng-model="txtPickupDate" class="form-control" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-md-3">
                                                                        <label>Against CRO</label>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <select class="form-control my-select" ng-model="ddlAgency" id="ddlAgency" ng-options="item.CROReleaseOrder for item in ContainerReleaseOrderList track by item.ID" required>
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row" style="margin-top:30px;">
                                                        <div class="col-md-12" style="text-align:right;">
                                                            <a href="#" class="btn btn-success" style="padding: 7px 25px;margin-top:-2px;" ng-click="CntrMovmentRecord(fillCntrNoPickup);"><i class="fa fa-plus"></i> Pickup</a>
                                                            <a href="#" class="btn btn-danger" style="padding: 7px 25px;margin-top:-2px;"><i class="fa fa-trash"></i> Cancel</a>
                                                        </div>
                                                    </div>
                                                </div>


                                            </div>



                                        </div>
                                    </div>



                                    <div class="modal fade" id="Portin" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                        <div class="modal-dialog">
                                            <div class="modal-content" style="margin:0 auto; width:400px;">

                                                <!-- Modal Header -->
                                                <div class="modal-header">
                                                    <h4 class="modal-title" style="font-size:18px;">PORT IN(FL)</h4>
                                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                </div>

                                                <!-- Modal body -->
                                                <div class="modal-body" style="padding-bottom:0;border-bottom: 1px solid #ccc;margin-bottom:6px;">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-md-5">
                                                                        <label>Location</label>
                                                                    </div>
                                                                    <div class="col-md-7">
                                                                        <select id="ddlLocationFL" ng-model="ddlLocationFL" class="form-control my-select" placeholder="Location" ng-options="item.PortName for item in PortAllvalues track by item.ID">
                                                                            <option value="0" disabled selected>--select--</option>
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-md-5">
                                                                        <label>PORT IN DATE</label>
                                                                    </div>
                                                                    <div class="col-md-7">
                                                                        <input type="datetime-local" id="txtPortInDate" style="width:100%;" class="form-control" ng-model="txtPortInDate" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row" style="margin-top:30px;">
                                                        <div class="col-md-12" style="text-align:right;">
                                                            <a href="#" class="btn btn-success" style="padding: 7px 25px;margin-top:-2px;" ng-click="PortUpdateGI(FillExstingCntrBookingValues);">Save</a>
                                                            <input type="hidden" id="HDPOLID" ng-model="HDPOLID" />
                                                            <input type="hidden" id="HDBkgStatus" ng-model="HDBkgStatus" />
                                                        </div>
                                                    </div>

                                                </div>


                                            </div>



                                        </div>
                                    </div>

                                    <div class="modal" id="RailToPort" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                        <div class="modal-dialog">
                                            <div class="modal-content" style="margin:0 auto; width:400px;">

                                                <!-- Modal Header -->
                                                <div class="modal-header">
                                                    <h4 class="modal-title" style="font-size:18px;">EXPORT LADEN RECEIVE-ICD FULL(FC)</h4>
                                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                </div>

                                                <!-- Modal body -->
                                                <div class="modal-body" style="padding-bottom:0;border-bottom: 1px solid #ccc;
                                                        margin-bottom:6px;">
                                                    <div class="row">
                                                        <div class="col-md-5"><h5 style="margin-top:10px;">Location </h5></div>
                                                        <div class="col-md-7">
                                                            <div class="form-group">
                                                                <div class="row">


                                                                    <div class="col-md-12">
                                                                        <select id="ddlLocationFC" ng-model="ddlLocationFC" class="form-control my-select" placeholder="Location" ng-options="item.PortName for item in PortAllvalues track by item.ID">
                                                                            <option value="0" disabled selected>--select--</option>
                                                                        </select>
                                                                    </div>


                                                                </div>

                                                            </div>
                                                        </div>

                                                        <div class="col-md-5"><h5 style="margin-top:10px;">ICD-FULL(FC)</h5></div>
                                                        <div class="col-md-7">
                                                            <div class="form-group">
                                                                <div class="row">


                                                                    <div class="col-md-12">
                                                                        <input type="datetime-local" id="txtRailtoPortDate" style="width:100%;" class="form-control" ng-model="txtRailtoPortDate" />
                                                                    </div>


                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row" style="margin-top:30px;">
                                                        <div class="col-md-12" style="text-align:right;">
                                                            <a href="#" class="btn btn-success" style="padding: 7px 25px;margin-top:-2px;" ng-click="RailtoPortupdate(FillExstingCntrBookingValues);">Save</a>

                                                        </div>
                                                    </div>

                                                </div>


                                            </div>



                                        </div>
                                    </div>


                                    <div class="modal" id="FLICD" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                        <div class="modal-dialog">
                                            <div class="modal-content" style="margin:0 auto; width:400px;">

                                                <!-- Modal Header -->
                                                <div class="modal-header">
                                                    <h4 class="modal-title" style="font-size:18px;">
                                                        LADEN CONTAINER RECEIVED AT ICD YARD AFTER FACTORT STUFFING
                                                    </h4>
                                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                </div>

                                                <!-- Modal body -->
                                                <div class="modal-body" style="padding-bottom:0;border-bottom: 1px solid #ccc;margin-bottom:6px;">
                                                    <div class="row">
                                                        <div class="col-md-5"><h5 style="margin-top:10px;">Location </h5></div>
                                                        <div class="col-md-7">
                                                            <div class="form-group">
                                                                <div class="row">


                                                                    <div class="col-md-12">
                                                                        <select id="ddlLocationFLICD" ng-model="ddlLocationFLICD" class="form-control my-select" placeholder="Location" ng-options="item.PortName for item in PortAllvalues track by item.ID">
                                                                            <option value="0" disabled selected>--select--</option>
                                                                        </select>
                                                                    </div>


                                                                </div>

                                                            </div>
                                                        </div>

                                                        <div class="col-md-5"><h5 style="margin-top:10px;">FL-ICD</h5></div>
                                                        <div class="col-md-7">
                                                            <div class="form-group">
                                                                <div class="row">


                                                                    <div class="col-md-12">
                                                                        <input type="datetime-local" id="txtFLICDDate" style="width:100%;" class="form-control" ng-model="txtFLICDDate" />
                                                                    </div>


                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row" style="margin-top:30px;">
                                                        <div class="col-md-12" style="text-align:right;">
                                                            <a href="#" class="btn btn-success" style="padding: 7px 25px;margin-top:-2px;" ng-click="FLICDUpdate(FillExstingCntrBookingValues);">Save</a>

                                                        </div>
                                                    </div>

                                                </div>


                                            </div>



                                        </div>
                                    </div>




                                    <div class="modal" id="RoadPort" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                        <div class="modal-dialog">
                                            <div class="modal-content" style="margin:0 auto; width:400px;">

                                                <!-- Modal Header -->
                                                <div class="modal-header">
                                                    <h4 class="modal-title" style="font-size:14px;">EXPORT LADEN OUT FROM ONE PLACE TO ANOTHER(FI)</h4>
                                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                </div>

                                                <!-- Modal body -->
                                                <div class="modal-body" style="padding-bottom:0;border-bottom: 1px solid #ccc;margin-bottom:6px;">
                                                    <div class="row">
                                                        <div class="col-md-5"><h5 style="margin-top:10px;">Location</h5></div>
                                                        <div class="col-md-7">
                                                            <div class="form-group">
                                                                <div class="row">


                                                                    <div class="col-md-12">
                                                                        <select id="ddlLocationFI" ng-model="ddlLocationFI" class="form-control my-select" placeholder="Location" ng-options="item.PortName for item in PortAllvalues track by item.ID">
                                                                            <option value="0" disabled selected>--select--</option>
                                                                        </select>
                                                                    </div>


                                                                </div>

                                                            </div>
                                                        </div>
                                                        <div class="col-md-5"><h5 style="margin-top:10px;">Transit</h5></div>
                                                        <div class="col-md-7">
                                                            <div class="form-group">
                                                                <div class="row">


                                                                    <div class="col-md-12">
                                                                        <select id="ddlTransit" ng-model="ddlTransit" class="form-control my-select" ng-options="item.name for item in TransitValues track by item.ID">
                                                                            <option value="0" disabled selected>--select--</option>
                                                                        </select>
                                                                    </div>


                                                                </div>

                                                            </div>
                                                        </div>
                                                        <div class="col-md-5"><h5 style="margin-top:10px;">Date</h5></div>
                                                        <div class="col-md-7">
                                                            <div class="form-group">
                                                                <div class="row">


                                                                    <div class="col-md-12">
                                                                        <input type="datetime-local" id="txtRoadtoPortDate" style="width:100%;" class="form-control" ng-model="txtRoadtoPortDate" />
                                                                    </div>


                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row" style="margin-top:30px;">
                                                        <div class="col-md-12" style="text-align:right;">
                                                            <a href="#" class="btn btn-success" style="padding: 7px 25px;margin-top:-2px;" ng-click="RoadtoPortupdate(FillExstingCntrBookingValues);">Save</a>

                                                        </div>
                                                    </div>

                                                </div>


                                            </div>



                                        </div>
                                    </div>

                                    <div class="modal" id="PLICD" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                        <div class="modal-dialog">
                                            <div class="modal-content" style="margin:0 auto; width:400px;">

                                                <!-- Modal Header -->
                                                <div class="modal-header">
                                                    <h4 class="modal-title" style="font-size:18px;">
                                                        LADEN CONTAINER GATED IN PORT FROM ICD

                                                    </h4>
                                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                </div>

                                                <!-- Modal body -->
                                                <div class="modal-body" style="padding-bottom:0;border-bottom: 1px solid #ccc;margin-bottom:6px;">
                                                    <div class="row">
                                                        <div class="col-md-5"><h5 style="margin-top:10px;">Location </h5></div>
                                                        <div class="col-md-7">
                                                            <div class="form-group">
                                                                <div class="row">


                                                                    <div class="col-md-12">
                                                                        <select id="ddlLocationPL" ng-model="ddlLocationPL" class="form-control my-select" placeholder="Location" ng-options="item.PortName for item in PortAllvalues track by item.ID">
                                                                            <option value="0" disabled selected>--select--</option>
                                                                        </select>
                                                                    </div>


                                                                </div>

                                                            </div>
                                                        </div>

                                                        <div class="col-md-5"><h5 style="margin-top:10px;">FL-ICD</h5></div>
                                                        <div class="col-md-7">
                                                            <div class="form-group">
                                                                <div class="row">


                                                                    <div class="col-md-12">
                                                                        <input type="datetime-local" id="txtPLDate" style="width:100%;" class="form-control" ng-model="txtPLDate" />
                                                                    </div>


                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row" style="margin-top:30px;">
                                                        <div class="col-md-12" style="text-align:right;">
                                                            <a href="#" class="btn btn-success" style="padding: 7px 25px;margin-top:-2px;" ng-click="PLUpdate(FillExstingCntrBookingValues);">Save</a>

                                                        </div>
                                                    </div>

                                                </div>


                                            </div>



                                        </div>
                                    </div>




                                </div>

                            </div>

                        </div>



                    </div>

                    <div class="row pickupdiv" style="margin-top:20px;">
                        <div class="col-md-12">
                            <div class="material-datatables" style="overflow:scroll;height:200px;">
                                <table class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">
                                    <thead>
                                        <tr>
                                            <th><input type="checkbox" ng-change="CheckBoxHeadChecked(CntrIDCheck);" ng-true-value="1" ng-false-value="0" ng-model="CntrIDCheck" id="CntrIDCheck" />  </th>
                                            <th>Container #</th>
                                            <th>Size Type</th>
                                            <th>Pick Up Date(MS)</th>
                                            <th>ICD Stuff (FC)</th>
                                            <th>FL-ICD</th>
                                            <th>Exp Transit(FI)</th>
                                            <th>ICD Port In(PL)</th>
                                            <th>Port-In(FL)</th>
                                            <th>Vessel Dep(FB)</th>
                                            <th>T/S Arrival(TZ)</th>
                                            <th>T/S Dep(TZFB)</th>
                                            <th>Vessel Arrival(FV)</th>
                                            <th>Port Out(FU)</th>
                                            <th>Imp Transit(FI)</th>
                                            <th>ICD Place(FVICD)</th>
                                            <th>Port/CFS Out(FU)</th>
                                            @*<th>Cfs-Out(LO)</th>*@
                                            <th>Depo-In(MA)</th>
                                        </tr>
                                    </thead>

                                    <tbody>
                                        <tr ng-repeat="gRow in FillExstingCntrBookingValues">
                                            <td>
                                                <input type="checkbox" ng-true-value="1" ng-checked="gRow.IsTrue == 1" ng-false-value="0" id="InvCheck" ng-model="gRow.IsTrue" />

                                            </td>
                                            <td>{{gRow.CntrNo}}</td>
                                            <td>{{gRow.Size}}</td>
                                            <td>{{gRow.MSDate}}</td>
                                            <td>{{gRow.FCDate}}</td>

                                            <td>{{gRow.FLICDDate}}</td>
                                            <td>{{gRow.ExpFIDate}}</td>
                                            <td>{{gRow.PLDate}}</td>
                                            <td>{{gRow.FLDate}}</td>
                                            <td>{{gRow.FBDate}}</td>

                                            <td>{{gRow.TZDate}}</td>
                                            <td>{{gRow.TZFBDate}}</td>
                                            <td>{{gRow.FVDate}}</td>
                                            <td>{{gRow.ImpFIDate}}</td>
                                            <td>{{gRow.FVICDDate}}</td>
                                            <td>{{gRow.FUDate}}</td>
                                            <td>{{gRow.MADate}}</td>
                                            @*<td>{{gRow.LODate}}</td>*@
                                            <td>{{gRow.MRDate}}</td>
                                        </tr>
                                    </tbody>
                                </table>

                            </div>
                        </div>
                    </div>



                </div>

            </div>

        </div>
    </div>
</div>

<input type="hidden" id="RegId" ng-model="RegId" />
<input type="hidden" id="HDConfirm" ng-model="HDConfirm" />
<input type="hidden" id="HDCustomerID" ng-model="HDCustomerID" />





