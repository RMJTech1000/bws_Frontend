@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}




<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.4/css/select2.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.4/js/select2.full.min.js"></script>


<script type="text/javascript">

    LayoutApp.controller('MyController', function ($scope, $http, $timeout) {
        //RRQuation
        $scope.PortAllvalues = null;
        $scope.fillPortsValues = function () {
            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/PortValues/',
                data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.PortAllvalues = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillPortsValues();
        $scope.ServiceTypesValue = null;
        $scope.fillServiceTypesValues = function () {
            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/ServiceTypesValues/',
                data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.ServiceTypesValue = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillServiceTypesValues();
        $scope.CustomerMasterAllvalues = null;
        $scope.fillCustomerMasterValues = function () {

            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/CustomerMaster/',
                data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.CustomerMasterAllvalues = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillCustomerMasterValues();
        $scope.UserNameMasterAllvalues = null;
        $scope.fillUserMasterValues = function () {

            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/UserMaster/',
                data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.UserNameMasterAllvalues = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillUserMasterValues();
        $scope.ShipmentTypeAllvalues = null;
        $scope.fillShipmentTypeValues = function () {
            var Datavalue = {};
            Datavalue.ID = "1"; //GeneralMaster Table seqNo
            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/ModuleValues/',
                data: JSON.stringify(Datavalue)
            }).then(function (result) {
                $timeout(function () {
                    $scope.ShipmentTypeAllvalues = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillShipmentTypeValues();
        $scope.HaulageTypeAllvalues = null;
        $scope.HaulageTypeValues = function () {
            var Datavalue = {};
            Datavalue.ID = "3"; //GeneralMaster Table seqNo
            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/ModuleValues/',
                data: JSON.stringify(Datavalue)
            }).then(function (result) {
                $timeout(function () {
                    $scope.HaulageTypeAllvalues = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.HaulageTypeValues();


        $scope.Recordsave = function () {

            var validation = "";
            var txtDate = $('#txtDate').val();
            if (txtDate.length == 0) {
                validation += "<span style='color:red;'>*</span> <span>Please Enter Date</span></br>"
            }

            var ddlbookingParty = $('#ddlbookingParty').val();
            if (ddlbookingParty == "?") {
                validation += "<span style='color:red;'>*</span> <span>Please Select Booking Party</span></br>"
            }

            var ddlSalesPerson = $('#ddlSalesPerson').val();
            if (ddlSalesPerson == "?") {
                validation += "<span style='color:red;'>*</span> <span>Please select Sales Person</span></br>"
            }

            var ddlShipmentType = $('#ddlShipmentType').val();
            if (ddlShipmentType == "?") {
                validation += "<span style='color:red;'>*</span> <span>Please Select ShipmentTypes</span></br>"
            }

            var ddlPortOfOrg = $('#ddlPortOfOrg').val();
            if (ddlPortOfOrg == "?") {
                validation += "<span style='color:red;'>*</span> <span>Please Select Port of Orgin</span></br>"
            }

            var ddlPortofLoading = $('#ddlPortofLoading').val();
            if (ddlPortofLoading == "?") {
                validation += "<span style='color:red;'>*</span> <span>Please Select Port of Loading</span></br>"
            }

            var ddlExportHaulage = $('#ddlExportHaulage').val();
            if (ddlExportHaulage == "?") {
                validation += "<span style='color:red;'>*</span> <span>Please Select Export Haulage</span></br>"
            }

            var ddlPortofDischarge = $('#ddlPortofDischarge').val();
            if (ddlPortofDischarge == "?") {
                validation += "<span style='color:red;'>*</span> <span>Please Select Port of Discharge</span></br>"
            }

            var ddlPortofFinalPOD = $('#ddlPortofFinalPOD').val();
            if (ddlPortofFinalPOD == "?") {
                validation += "<span style='color:red;'>*</span> <span>Please Select Port of Final POD</span></br>"
            }

            var ddlTranshipment = $('#ddlTranshipment').val();
            if (ddlTranshipment == "?") {
                validation += "<span style='color:red;'>*</span> <span>Please Select Port Transhipment Port</span></br>"
            }

            var ddlServiceType = $('#ddlServiceType').val();
            if (ddlServiceType == "?") {
                validation += "<span style='color:red;'>*</span> <span>Please Select Service Types</span></br>"
            }

            var txtValidTill = $('#txtValidTill').val();
            if (txtValidTill.length == 0) {
                validation += "<span style='color:red;'>*</span> <span>Please Enter ValidTill Date</span></br>"
            }


            if (validation != "") {
                ShowPopup(validation);
                return false;
            }
            $('#overlay').fadeIn().delay(100).fadeOut();


            var BussData = {}
            var Items = []
            if ($scope.RegId == "")
                BussData.ID = 0;
            else
                BussData.ID = $scope.RegId;

            BussData.BookingNo = $scope.txtRRNumber;
            BussData.Date = $("#txtDate").val();
            BussData.BookingPartyID = $("#ddlbookingParty").val();
            BussData.SalesPersonID = $("#ddlSalesPerson").val();
            BussData.ShipmentID = $("#ddlShipmentType").val();
            BussData.PortOfOrgin = $("#ddlPortOfOrg").val();
            BussData.PortOfLoading = $("#ddlPortofLoading").val();
            BussData.ExpHaulageID = $("#ddlExportHaulage").val();
            BussData.PlaceofDischargeId = $("#ddlPortofDischarge").val();
            BussData.FinalPODId = $("#ddlPortofFinalPOD").val();
            BussData.ImpHaulageId = $("#ddlImportHaulage").val();
            BussData.TranshimentPortID = $("#ddlTranshipment").val();
            BussData.ServiceTypeID = $("#ddlServiceType").val();
            BussData.ValidTill = $("#txtValidTill").val();
            BussData.UserID = "1";
            BussData.AgentId = "1";
            BussData.SessionFinYear = "2021";
            BussData.AgentCode = "NS";
            BussData.Remarks = $scope.txtRemark;

            $http({
                method: 'POST',
                url: '/api/SalesApi/RatesheetInsert',
                data: JSON.stringify(BussData),

            }).then(function (result)
            {
                $timeout(function ()
                {
                    if (result.data[0].ID != "0")
                    {
                        $scope.RegId = result.data[0].ID;
                        $scope.RatesheetNo = result.data[0].RatesheetNo;
                        $scope.FilRateSheetExsitingMRG();
                        ShowPopup("RateSheet Rate Saved Successfully");
                    }
                    else {

                        ShowPopup("Error Not saved");
                    }

                    setTimeOut(function () {
                        window.location = "/";
                    }, 3000);
                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {

                ShowPopup('There has been an error: ' + result);
            });



        }
        $(document).ready(function () {
            $('.my-select').select2({
                placeholder: "--Select--",
                allowClear: true,
                width: '100%'
            });
        });
        $(document).ready(function () {

            var queryString = new Array();
            if (window.location.search.split('?').length > 1) {
                var params = window.location.search.split('?')[1].split('&');
                for (var i = 0; i < params.length; i++) {
                    var key = params[i].split('=')[0];
                    var value = decodeURIComponent(params[i].split('=')[1]);
                    queryString[key] = value;
                }
            }
            if (queryString["RQRegNo"] != null) {

                $scope.RegId = queryString["RQRegNo"].toString();
                
                $scope.FilRateSheetExsitingMaster(queryString["RQRegNo"].toString());
                $scope.FilRateSheetExsitingMRG();
            }

        });
        $scope.FilRateSheetExsitingMaster = function (RQRegNo) {
          
            var Datavalue = {};
            Datavalue.RRID = RQRegNo;

            $http({
                method: 'POST',
                url: '/api/SalesApi/RateSheetExistingMasterRecord',
                data: JSON.stringify(Datavalue),

            }).then(function (result)
            {
                $timeout(function ()
                {
                    $scope.RegId = result.data[0].ID;
                    $scope.txtRRNumber = result.data[0].RatesheetNo;
                    $scope.txtDate = result.data[0].Date;
                    $scope.ddlbookingParty = { ID: result.data[0].BookingPartyID };
                    $scope.ddlSalesPerson = { ID: result.data[0].SalesPersonID };
                    $scope.ddlShipmentType = { ID: result.data[0].ShipmentID };
                    $scope.ddlPortOfOrg = { ID: result.data[0].PortOfOrgin };
                    $scope.ddlPortofLoading = { ID: result.data[0].PortOfLoading };
                    $scope.ddlExportHaulage = { ID: result.data[0].ExpHaulageID };
                    $scope.ddlPortofDischarge = { ID: result.data[0].PlaceofDischargeId };
                    $scope.ddlPortofFinalPOD = { ID: result.data[0].FinalPODId };
                    $scope.ddlImportHaulage = { ID: result.data[0].ImpHaulageId };
                    $scope.ddlTranshipment = { ID: result.data[0].TranshimentPortID };
                    $scope.ddlServiceType = { ID: result.data[0].ServiceTypeID };
                    $scope.txtValidTill = result.data[0].ValidTill;
                    $scope.txtRemark = result.data[0].Remarks;




                });
            }, function (result) {

                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            });
        }
        //end region 

        $scope.FilRateSheetExsitingMRG = function () {

            var Datavalue = {};
            Datavalue.RRID = $scope.RegId;

            $http({
                method: 'POST',
                url: '/api/SalesApi/RateSheetExistingMasterRecord',
                data: JSON.stringify(Datavalue),

            }).then(function (result) {
                $timeout(function () {

                    $scope.POLValue = result.data[0].POLName;
                    $scope.PODValue = result.data[0].PODName;
                    $scope.POLCodeValue = result.data[0].POLCode;
                    $scope.PODCodeValue = result.data[0].PODCode;

                });
            }, function (result) {

                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            });
        }
       


        $scope.OnPagetab = function (tab)
        {
           
            if (tab == "2" || tab == "3" || tab == "4" || tab == "5")
            {
                if (typeof $scope.RegId == "undefined") {
                    ShowPopup("please fill RATE REQUEST first");
                    $('#tab1').removeClass('active');
                    $('#tab2').addClass('active');
                    $('#tab3').addClass('active');
                    $('#tab4').addClass('active');
                    $('#tab5').addClass('active');
                }
            }

            $scope.InfochargeBindValues = [
                { 'name': '--select--', 'ID': 0 },
                { 'name': 'Yes', 'ID': 1 },
                { 'name': 'No ', 'ID': 2 }
            ];
            $scope.BasicBindValues = [
                { 'name': '--select--', 'ID': 0 },
                { 'name': 'BL', 'ID': 1 },
                { 'name': 'Container ', 'ID': 2 }
            ];
            $scope.CntrTypesvalues = null;
            $scope.fillCntrTypeValues = function () {
                $http({
                    method: 'POST',
                    url: '/api/CommonAccessApi/CntrTypeValues/',
                    data: {}
                }).then(function (result) {
                    $timeout(function () {
                        $scope.CntrTypesvalues = result.data;

                    });
                }, function (result) {
                    if (result.status == 500) {
                        ShowPopup("Sorry no internet connectivity Application Error.");
                    }
                    else if (result.status == 404) {
                        ShowPopup("Sorry no internet connectivity page not found.");
                    }
                    if (result.status > 0) {
                        var errorMsg = result.status + ': ' + result.data;
                        ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                    }
                }).catch(function (result) {
                    ShowPopup('There has been an error: ' + result);
                });
            };
            $scope.fillCntrTypeValues();

            $scope.CommodityValue = null;
            $scope.fillCommodityValues = function ()
            {
               
                var Datavalue = {};
                Datavalue.ID = "2"; //GeneralMaster Table seqNo 
                $http({
                    method: 'POST',
                    url: '/api/CommonAccessApi/ModuleValues/',
                    data: JSON.stringify(Datavalue)
                }).then(function (result) {
                    $timeout(function () {
                        $scope.CommodityValue = result.data;

                    });
                }, function (result) {
                    if (result.status == 500) {
                        ShowPopup("Sorry no internet connectivity Application Error.");
                    }
                    else if (result.status == 404) {
                        ShowPopup("Sorry no internet connectivity page not found.");
                    }
                    if (result.status > 0) {
                        var errorMsg = result.status + ': ' + result.data;
                        ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                    }
                }).catch(function (result) {
                    ShowPopup('There has been an error: ' + result);
                });
            };
            $scope.fillCommodityValues();

            $scope.ChargeCodeAllvalues = null;
            $scope.fillChargecodeValues = function () {
                $http({
                    method: 'POST',
                    url: '/api/CommonAccessApi/ChargeCode/',
                    data: {}
                }).then(function (result) {
                    $timeout(function () {
                        $scope.ChargeCodeAllvalues = result.data;

                    });
                }, function (result) {
                    if (result.status == 500) {
                        ShowPopup("Sorry no internet connectivity Application Error.");
                    }
                    else if (result.status == 404) {
                        ShowPopup("Sorry no internet connectivity page not found.");
                    }
                    if (result.status > 0) {
                        var errorMsg = result.status + ': ' + result.data;
                        ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                    }
                }).catch(function (result) {
                    ShowPopup('There has been an error: ' + result);
                });
            };
            $scope.fillChargecodeValues();

            $scope.CurrencyValue = null;
            $scope.fillCurrencyValues = function () {
                $http({
                    method: 'POST',
                    url: '/api/CommonAccessApi/CurrencyValues/',
                    data: {}
                }).then(function (result) {
                    $timeout(function () {
                        $scope.CurrencyValue = result.data;

                    });
                }, function (result) {
                    if (result.status == 500) {
                        ShowPopup("Sorry no internet connectivity Application Error.");
                    }
                    else if (result.status == 404) {
                        ShowPopup("Sorry no internet connectivity page not found.");
                    }
                    if (result.status > 0) {
                        var errorMsg = result.status + ': ' + result.data;
                        ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                    }
                }).catch(function (result) {
                    ShowPopup('There has been an error: ' + result);
                });
            };
            $scope.fillCurrencyValues();

            $scope.AgencyMasterAllvalues = null;
            $scope.fillAgencyMasterValues = function () {

                $http({
                    method: 'POST',
                    url: '/api/CommonAccessApi/AgencyMaster/',
                    data: {}
                }).then(function (result) {
                    $timeout(function () {
                        $scope.AgencyMasterAllvalues = result.data;

                    });
                }, function (result) {
                    if (result.status == 500) {
                        ShowPopup("Sorry no internet connectivity Application Error.");
                    }
                    else if (result.status == 404) {
                        ShowPopup("Sorry no internet connectivity page not found.");
                    }
                    if (result.status > 0) {
                        var errorMsg = result.status + ': ' + result.data;
                        ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                    }
                }).catch(function (result) {
                    ShowPopup('There has been an error: ' + result);
                });
            };
            $scope.fillAgencyMasterValues();

            $scope.CollectionModeAllValues = null;
            $scope.fillCollectionModeAllValues = function () {
                var Datavalue = {};
                Datavalue.ID = "9"; //GeneralMaster Table seqNo 
                $http({
                    method: 'POST',
                    url: '/api/CommonAccessApi/ModuleValues/',
                    data: JSON.stringify(Datavalue)
                }).then(function (result) {
                    $timeout(function () {
                        $scope.CollectionModeAllValues = result.data;

                    });
                }, function (result) {
                    if (result.status == 500) {
                        ShowPopup("Sorry no internet connectivity Application Error.");
                    }
                    else if (result.status == 404) {
                        ShowPopup("Sorry no internet connectivity page not found.");
                    }
                    if (result.status > 0) {
                        var errorMsg = result.status + ': ' + result.data;
                        ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                    }
                }).catch(function (result) {
                    ShowPopup('There has been an error: ' + result);
                });
            };
            $scope.fillCollectionModeAllValues();

            $scope.ChageOwnerAllValues = null;
            $scope.fillChageOwnerAllValues = function () {
                var Datavalue = {};
                Datavalue.ID = "11"; //GeneralMaster Table seqNo 
                $http({
                    method: 'POST',
                    url: '/api/CommonAccessApi/ModuleValues/',
                    data: JSON.stringify(Datavalue)
                }).then(function (result) {
                    $timeout(function () {
                        $scope.ChageOwnerAllValues = result.data;

                    });
                }, function (result) {
                    if (result.status == 500) {
                        ShowPopup("Sorry no internet connectivity Application Error.");
                    }
                    else if (result.status == 404) {
                        ShowPopup("Sorry no internet connectivity page not found.");
                    }
                    if (result.status > 0) {
                        var errorMsg = result.status + ': ' + result.data;
                        ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                    }
                }).catch(function (result) {
                    ShowPopup('There has been an error: ' + result);
                });
            };
            $scope.fillChageOwnerAllValues();

            if (tab == 2)
            {
                $scope.DynamicGridContainer = [{ RCID: "", CntrTypes: "", CommodityTypes: "", ExFreedays: "", ImFreedays: "", VGM: "" }];
                $scope.Add = function (DynamicGridContainer) {
                  
                    if (DynamicGridContainer.ImFreedays == "")
                    {
                        swal("Please enter Amount");
                        return;
                    }

                    $scope.DynamicGridContainer.push({
                        'RCID': "",
                        'CntrTypes': "",
                        'CommodityTypes': "",
                        'ExFreedays': "",
                        'ImFreedays': "",
                        'VGM':""
                    });
                 
                }
                $scope.Remove = function (DynamicGridContainer, index) {
                    $scope.DynamicGridContainer.splice(index, 1);
                    
                }
                $scope.ContainerRecordsave = function (data)
                {
                    var validation = "";
                    var Datav = "undefined";
                    angular.forEach(data, function (value, key)
                    {
                        Datav += data[key].CntrTypes.ID;
                    });

                    if (Datav.toString() == "undefined") {
                        validation += "<span style='color:red;'>*</span> <span>Please Select Container Details</span></br>"
                    }

                    if (validation != "") {
                        ShowPopup(validation);
                        return false;
                    }
                    $('#overlay').fadeIn().delay(100).fadeOut();

                    var BussData = {}
                    var Items = []
                    if ($scope.RegId == "")
                        BussData.RRID = 0;
                    else
                        BussData.RRID = $scope.RegId

                    angular.forEach(data, function (value, key)
                    {
                        Items.push('Insert:' + data[key].RCID, data[key].CntrTypes.ID, data[key].CommodityTypes.ID, data[key].ExFreedays, data[key].ImFreedays, data[key].VGM);
                    });
                    BussData.Itemsv = Items.toString();

                    $http({
                        method: 'POST',
                        url: '/api/SalesApi/SalesRatesheetContainerInsert',
                        data: JSON.stringify(BussData),

                    }).then(function (result) {
                        $timeout(function () {
                            BussData.ID = result.data[0].ID;
                            if (result.data[0].RRID != "0") {
                                ShowPopup("Ratesheet Container Details Saved Successfully");
                            }
                            else {

                                ShowPopup("Error Not saved");
                            }

                            setTimeOut(function () {
                                window.location = "/";
                            }, 3000);
                        });
                    }, function (result) {
                        if (result.status == 500) {
                            ShowPopup("Sorry no internet connectivity Application Error.");
                        }
                        else if (result.status == 404) {
                            ShowPopup("Sorry no internet connectivity page not found.");
                        }
                        if (result.status > 0) {
                            var errorMsg = result.status + ': ' + result.data;
                            ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                        }
                    }).catch(function (result) {

                        ShowPopup('There has been an error: ' + result);
                    });


                }
                $scope.FilRateSheetContinerExsitingMaster = function ()
                {
                    var Datavalue = {};
                    Datavalue.RRID = $scope.RegId;
                    $http({
                        method: 'POST',
                        url: '/api/SalesApi/RateSheetContainerExsisting',
                        data: JSON.stringify(Datavalue),
                    }).then(function (result) {
                        $timeout(function () {

                            if (result.data[0].CntrTypeID != "")
                            {
                                $scope.DynamicGridContainer.splice(0, 1);
                            }

                            angular.forEach(result.data, function (value, key) {

                                $scope.DynamicGridContainer.push({
                                    'RCID': result.data[key].RCID,
                                    'CntrTypes': { ID: result.data[key].CntrTypeID },
                                    'CommodityTypes': { ID: result.data[key].CommodityTypeID },
                                    'ExFreedays': result.data[key].ExFreeday,
                                    'ImFreedays': result.data[key].ImFreeday,
                                    'VGM': result.data[key].VGM
                                    
                                });

                            });
                        });
                    }, function (result) {

                        if (result.status > 0) {
                            var errorMsg = result.status + ': ' + result.data;
                            ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                        }
                    });
                }
                $scope.FilRateSheetContinerExsitingMaster();
            }
            if (tab == 3) {

                $scope.DynamicGridRateCharge = [{ RID: "", ChargeCodeID: "", infoCh: "", Basic: "", CntrTypes: "", CommodityTypes: "", Currency: "", Amt: "", CollectionMode: "", ChargeOwnership:""}];
                $scope.Add = function (DynamicGridRateCharge) {

                    if (DynamicGridRateCharge.ChargeCodeID == "") {
                        swal("Please enter Amount");
                        return;
                    }

                    $scope.DynamicGridRateCharge.push({
                        'RID': "",
                        'ChargeCodeID': "",
                        'infoCh': "",
                        'Basic': "",
                        'CntrTypes': "",
                        'CommodityTypes': "",
                        'Currency': "",
                        'Amt': "",
                        'CollectionMode': "",
                      
                        'ChargeOwnership':""
                    });

                }
                $scope.Remove = function (DynamicGridContainer, index) {
                    $scope.DynamicGridContainer.splice(index, 1);

                }
                $scope.ChrageRateRecordsave = function (data, datav) {
                    var validation = "";
                    var Datav = "undefined";
                    angular.forEach(data, function (value, key) {
                        Datav += data[key].ChargeCodeID.ID;

                    });

                    if (Datav.toString() == "undefined") {
                        validation += "<span style='color:red;'>*</span> <span>Please Select Container Details</span></br>"
                    }

                    if (validation != "") {
                        ShowPopup(validation);
                        return false;
                    }
                    $('#overlay').fadeIn().delay(100).fadeOut();

                    var BussData = {}
                    var Items = []
                    var itemsCR=[]
                    if ($scope.RegId == "")
                        BussData.RRID = 0;
                    else
                        BussData.RRID = $scope.RegId

                    angular.forEach(data, function (value, key) {
                        Items.push('Insert:' + data[key].RID, data[key].ChargeCodeID.ID, data[key].infoCh.ID, data[key].Basic.ID,
                            data[key].CntrTypes.ID, data[key].CommodityTypes.ID, data[key].Currency.ID, data[key].Amt,
                            data[key].CollectionMode.ID,  data[key].ChargeOwnership.ID
                        );
                    });

                    angular.forEach(datav, function (value, key) {
                        itemsCR.push('Insert:' + datav[key].RID, datav[key].ChargeCodeID.ID, datav[key].Basic.ID,
                            datav[key].CntrTypes.ID, datav[key].CommodityTypes.ID, datav[key].Currency.ID, datav[key].Amt,
                            datav[key].CollectionMode.ID, datav[key].ChargeOwnership.ID
                        );
                    });

                    BussData.Itemsv = Items.toString();
                    BussData.ItemsCR = itemsCR.toString();

                    $http({
                        method: 'POST',
                        url: '/api/SalesApi/SalesRatesheetChargesInsert',
                        data: JSON.stringify(BussData),

                    }).then(function (result) {
                        $timeout(function () {
                            if (result.data[0].RRID != "0") {
                                ShowPopup("Ratesheet Container Details Saved Successfully");
                            }
                            else {

                                ShowPopup("Error Not saved");
                            }

                            setTimeOut(function () {
                                window.location = "/";
                            }, 3000);
                        });
                    }, function (result) {
                        if (result.status == 500) {
                            ShowPopup("Sorry no internet connectivity Application Error.");
                        }
                        else if (result.status == 404) {
                            ShowPopup("Sorry no internet connectivity page not found.");
                        }
                        if (result.status > 0) {
                            var errorMsg = result.status + ': ' + result.data;
                            ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                        }
                    }).catch(function (result) {

                        ShowPopup('There has been an error: ' + result);
                    });


                }
                $scope.FilRateSheetRevRateExsitingMaster = function () {
                    var Datavalue = {};
                    Datavalue.RRID = $scope.RegId;
                    $http({
                        method: 'POST',
                        url: '/api/SalesApi/RateSheetRevRateExsisting',
                        data: JSON.stringify(Datavalue),
                    }).then(function (result) {
                        $timeout(function () {

                            if (result.data[0].ChargeCodeID != "") {
                                $scope.DynamicGridRateCharge.splice(0, 1);
                            }

                            angular.forEach(result.data, function (value, key) {

                                $scope.DynamicGridRateCharge.push({
                                    'RID': result.data[key].RID,
                                    'ChargeCodeID': { ID: result.data[key].ChargeCodeID },
                                    'infoCh': { ID: result.data[key].infoChID },
                                    'Basic': { ID: result.data[key].BasicID },
                                    'CntrTypes': { ID: result.data[key].CntrTypeID },
                                    'CommodityTypes': { ID: result.data[key].CommodityTypeID },
                                    'Currency': { ID: result.data[key].CurrencyID },
                                    'Amt': result.data[key].Amt,
                                    'CollectionMode': { ID: result.data[key].CollectionModeID },
                                    'ChargeOwnership': { ID: result.data[key].ChargeOwnershipID }

                                });

                            });
                        });
                    }, function (result) {

                        if (result.status > 0) {
                            var errorMsg = result.status + ': ' + result.data;
                            ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                        }
                    });
                }
                $scope.FilRateSheetRevRateExsitingMaster();
                $scope.DynamicGridCostRateCharge = [{ RID: "", ChargeCodeID: "", Basic: "", CntrTypes: "", CommodityTypes: "", Currency: "", Amt: "", CollectionMode: "",  ChargeOwnership: "" }];
                $scope.CostRowAdd = function (DynamicGridCostRateCharge) {

                    if (DynamicGridCostRateCharge.ChargeCodeID == "") {
                        swal("Please enter Amount");
                        return;
                    }

                    $scope.DynamicGridCostRateCharge.push({
                        'RID': "",
                        'ChargeCodeID': "",
                        'Basic': "",
                        'CntrTypes': "",
                        'CommodityTypes': "",
                        'Currency': "",
                        'Amt': "",
                        'CollectionMode': "",
                        'ChargeOwnership': ""
                    });

                }
                $scope.FilRateSheetCostRateExsitingMaster = function () {
                    var Datavalue = {};
                    Datavalue.RRID = $scope.RegId;
                    $http({
                        method: 'POST',
                        url: '/api/SalesApi/RateSheetCostRateExsisting',
                        data: JSON.stringify(Datavalue),
                    }).then(function (result) {
                        $timeout(function () {

                            if (result.data[0].ChargeCodeID != "") {
                                $scope.DynamicGridCostRateCharge.splice(0, 1);
                            }

                            angular.forEach(result.data, function (value, key) {

                                $scope.DynamicGridCostRateCharge.push({
                                    'RID': result.data[key].RID,
                                    'ChargeCodeID': { ID: result.data[key].ChargeCodeID },
                                    'Basic': { ID: result.data[key].BasicID },
                                    'CntrTypes': { ID: result.data[key].CntrTypeID },
                                    'CommodityTypes': { ID: result.data[key].CommodityTypeID },
                                    'Currency': { ID: result.data[key].CurrencyID },
                                    'Amt': result.data[key].Amt,
                                    'CollectionMode': { ID: result.data[key].CollectionModeID },
                                  
                                    'ChargeOwnership': { ID: result.data[key].ChargeOwnershipID }

                                });

                            });
                        });
                    }, function (result) {

                        if (result.status > 0) {
                            var errorMsg = result.status + ': ' + result.data;
                            ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                        }
                    });
                }
                $scope.FilRateSheetCostRateExsitingMaster();
            }

            if (tab == 5)
            {
                $scope.DynamicGridMRG = [{ MID: "", CntrTypes: "", MRGAmt: "", QuotedAmt: "", FreightTerms: "", CollectionAgent: "" }];
                $scope.FileRatesheetMRGValues = function () {

                    var Datavalue = {};
                    Datavalue.RRID = $scope.RegId;
                    $http({
                        method: 'POST',
                        url: '/api/SalesApi/RateSheetMRG',
                        data: JSON.stringify(Datavalue),
                    }).then(function (result) {
                        $timeout(function () {

                            if (result.data[0].CntrTypeID != "") {
                                $scope.DynamicGridMRG.splice(0, 1);
                            }
                            angular.forEach(result.data, function (value, key) {
                             
                                $scope.DynamicGridMRG.push({
                                    'MID': result.data[key].RCID,
                                    'CntrTypes': { ID: result.data[key].CntrTypeID },
                                    'MRGAmt': result.data[key].MRGAmt,
                                    'QuotedAmt': result.data[key].QuotedAmt,
                                    'FreightTerms': { ID: result.data[key].FreightTems },
                                    'CollectionAgent': { ID: result.data[key].AgentID }

                                });

                            });
                        });
                    }, function (result) {

                        if (result.status > 0) {
                            var errorMsg = result.status + ': ' + result.data;
                            ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                        }
                    });
                }
                $scope.FileRatesheetMRGValues();

                $scope.DynamicGridSlOT = [{ RSID: "", SlotOperator: "", SlotTerm: "" }];
                $scope.SlotTermsValue = null;
                $scope.fillSlotTermsValues = function () {


                    var Datavalue = {};
                    $http({
                        method: 'POST',
                        url: '/api/CommonAccessApi/SlotTremsValues/',
                        data: {}
                    }).then(function (result) {
                        $timeout(function () {
                            $scope.SlotTermsValue = result.data;

                        });
                    }, function (result) {
                        if (result.status == 500) {
                            ShowPopup("Sorry no internet connectivity Application Error.");
                        }
                        else if (result.status == 404) {
                            ShowPopup("Sorry no internet connectivity page not found.");
                        }
                        if (result.status > 0) {
                            var errorMsg = result.status + ': ' + result.data;
                            ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                        }
                    }).catch(function (result) {
                        ShowPopup('There has been an error: ' + result);
                    });
                };
                $scope.fillSlotTermsValues();


                $scope.SlotOperatorValue = null;
                $scope.fillSlotOperatorValues = function () {


                    var Datavalue = {};
                    Datavalue.BussTypes = "7,8,13";
                    $http({
                        method: 'POST',
                        url: '/api/CommonAccessApi/CustomerBussTypesMaster/',
                        data: JSON.stringify(Datavalue)
                    }).then(function (result) {

                        $timeout(function () {
                            console.log(result);
                            $scope.SlotOperatorValue = result.data;

                        });
                    }, function (result) {
                        if (result.status == 500) {
                            ShowPopup("Sorry no internet connectivity Application Error.");
                        }
                        else if (result.status == 404) {
                            ShowPopup("Sorry no internet connectivity page not found.");
                        }
                        if (result.status > 0) {
                            var errorMsg = result.status + ': ' + result.data;
                            ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                        }
                    }).catch(function (result) {
                        ShowPopup('There has been an error: ' + result);
                    });
                };
                $scope.fillSlotOperatorValues();

                $scope.FileRatesheetSLOTValues = function () {

                    var Datavalue = {};
                    Datavalue.RRID = $scope.RegId;
                    $http({
                        method: 'POST',
                        url: '/api/SalesApi/RateSheetSLOTView',
                        data: JSON.stringify(Datavalue),
                    }).then(function (result)
                    {
                        $timeout(function () {

                            $scope.SLOTValidateDate = result.data[0].ValidDate;
                            $scope.SLOTRef = result.data[0].SlotRef;
                            
                            if (result.data[0].SlotOperator != "")
                            {
                                $scope.DynamicGridSlOT.splice(0, 1);
                            }
                            angular.forEach(result.data, function (value, key) {
                             
                                $scope.DynamicGridSlOT.push({
                                    'RSID': result.data[key].RSID,
                                    'SlotOperator': { ID: result.data[key].SlotOperator },
                                    'SlotTerm': { ID: result.data[key].SlotTermID }

                                });


                            });
                        });
                    }, function (result) {

                        if (result.status > 0) {
                            var errorMsg = result.status + ': ' + result.data;
                            ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                        }
                    });
                }
                $scope.FileRatesheetSLOTValues();

                $scope.DynamicGridSlOTDtls = [{ RSIDD: "", ChargeID :"", SizeType: "", Commodity: "", Amount:""}];
                $scope.FileRatesheetSLOTDtlsValues = function () {

                    var Datavalue = {};
                    Datavalue.RRID = $scope.RegId;
                    $http({
                        method: 'POST',
                        url: '/api/SalesApi/RateSheetSLOTDtlsView',
                        data: JSON.stringify(Datavalue),
                    }).then(function (result) {
                        $timeout(function () {

                            if (result.data[0].SizeType != "") {
                                $scope.DynamicGridSlOTDtls.splice(0, 1);
                            }
                            angular.forEach(result.data, function (value, key) {

                                $scope.DynamicGridSlOTDtls.push({
                                    'RSIDD': result.data[key].RSIDD,
                                    'ChargeID': { ID: result.data[key].ChargeID },
                                    'SizeType': { ID: result.data[key].SizeID },
                                    'Commodity': { ID: result.data[key].CommodityID },
                                    'Amount': result.data[key].Amount

                                });

                            });
                        });
                    }, function (result) {

                        if (result.status > 0) {
                            var errorMsg = result.status + ': ' + result.data;
                            ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                        }
                    });
                }
                $scope.FileRatesheetSLOTDtlsValues();
                $scope.MRGSLOTRecordsave = function (DataMrg, DataSlot, dataSlotdtls) {

                    var validation = "";
                    var DatavMrgv = "undefined";
                    var DataSlotv = "undefined";
                    var dataSlotdtlsv = "undefined";

                    angular.forEach(DataMrg, function (value, key) {
                        DatavMrgv += DataMrg[key].MID;
                    });
                    angular.forEach(DataSlot, function (value, key) {
                        DataSlotv += DataSlot[key].RSID;
                    });
                    angular.forEach(dataSlotdtls, function (value, key) {
                        dataSlotdtlsv += dataSlotdtls[key].RSIDD;
                    });

                  
                    if (DatavMrgv.toString() == "undefined") {
                        validation += "<span style='color:red;'>*</span> <span>Please Select MRG Details</span></br>"
                    }
                    if (DataSlotv.toString() == "undefined") {
                        validation += "<span style='color:red;'>*</span> <span>Please Select Slot</span></br>"
                    }
                    if (dataSlotdtlsv.toString() == "undefined") {
                        validation += "<span style='color:red;'>*</span> <span>Please Select Slot Details</span></br>"
                    }

                    if (validation != "") {
                        ShowPopup(validation);
                        return false;
                    }
                    $('#overlay').fadeIn().delay(100).fadeOut();

                    var BussData = {}
                    var MRGItems = []
                    var SLTItems = []
                    var SLTDItems = []
                  
                    BussData.RRID = $scope.RegId;
                    angular.forEach(DataMrg, function (value, key) {
                        MRGItems.push('Insert:' + DataMrg[key].MID, DataMrg[key].QuotedAmt);
                    });

                    angular.forEach(DataSlot, function (value, key) {
                        SLTItems.push('Insert1:' + DataSlot[key].RSID);
                    });
                    angular.forEach(dataSlotdtls, function (value, key) {
                        SLTDItems.push('Insert2:' + dataSlotdtls[key].RSIDD);
                    });
                    BussData.MRGItemsv = MRGItems.toString();
                    BussData.SLTItemsv = SLTItems.toString();
                    BussData.SLTDItemsv = SLTDItems.toString();

                    $http({
                        method: 'POST',
                        url: '/api/SalesApi/SalesRatesheetSLTMRGInsert',
                        data: JSON.stringify(BussData),

                    }).then(function (result) {
                        $timeout(function () {
                           // BussData.ID = result.data[0].ID;
                            if (result.data[0].RRID != "0") {
                                ShowPopup("Ratesheet MRG & SLOT Details Saved Successfully");
                            }
                            else {

                                ShowPopup("Error Not saved");
                            }

                            setTimeOut(function () {
                                window.location = "/";
                            }, 3000);
                        });
                    }, function (result) {
                        if (result.status == 500) {
                            ShowPopup("Sorry no internet connectivity Application Error.");
                        }
                        else if (result.status == 404) {
                            ShowPopup("Sorry no internet connectivity page not found.");
                        }
                        if (result.status > 0) {
                            var errorMsg = result.status + ': ' + result.data;
                            ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                        }
                    }).catch(function (result) {

                        ShowPopup('There has been an error: ' + result);
                    });

                   
                }


                $scope.ExMRGType = [];
                $scope.fillMRGTypeBind = function () {

                    var BussData = {}
                    BussData.RRID = $scope.RegId;
                    var MRGTypes = [];
                    $http({
                        method: 'POST',
                        url: '/api/SalesApi/SalesRatesheetMRGSelect/',
                        data: JSON.stringify(BussData),
                    }).then(function (result) {
                        $timeout(function () {
                            angular.forEach(result.data, function (value, key)
                            {
                                MRGTypes.push(result.data[key].MRGID);
                            });
                           
                            $scope.ExMRGType = MRGTypes;
                           
                        });
                    });
                };
                $scope.fillMRGTypeBind();

                $scope.ExSLOTType = [];
                $scope.fillSLOTTypeBind = function () {

                    var BussData = {}
                    BussData.RRID = $scope.RegId;
                    var SLOTTypes = [];
                    $http({
                        method: 'POST',
                        url: '/api/SalesApi/SalesRatesheetSLOTSelect/',
                        data: JSON.stringify(BussData),
                    }).then(function (result) {
                        $timeout(function () {
                            angular.forEach(result.data, function (value, key) {
                                SLOTTypes.push(result.data[key].SLTID);
                            });

                            $scope.ExSLOTType = SLOTTypes;

                        });
                    });
                };
                $scope.fillSLOTTypeBind();


                $scope.ExSLOTDType = [];
                $scope.fillSLOTDTypeBind = function () {

                    var BussData = {}
                    BussData.RRID = $scope.RegId;
                    var SLOTDTypes = [];
                    $http({
                        method: 'POST',
                        url: '/api/SalesApi/SalesRatesheetSLOTDtlSelect/',
                        data: JSON.stringify(BussData),
                    }).then(function (result) {
                        $timeout(function () {
                            angular.forEach(result.data, function (value, key) {
                                SLOTDTypes.push(result.data[key].SLTIDD);
                            });

                            $scope.ExSLOTDType = SLOTDTypes;

                        });
                    });
                };
                $scope.fillSLOTDTypeBind();
            }
        }

        $scope.GetTariffRatePOL = function () {
            var Datavalue = {};
            Datavalue.RRID = $scope.RegId;
            $http({
                method: 'POST',
                url: '/api/SalesApi/RateSheetCheckTariffRateRevPOLExsisting',
                data: JSON.stringify(Datavalue),
            }).then(function (result) {
                $timeout(function () {

                    if (result.data[0].ChargeCodeID != "") {
                        $scope.DynamicGridRateCharge.splice(0, 1);
                    }

                    angular.forEach(result.data, function (value, key) {

                        $scope.DynamicGridRateCharge.push({
                            'RID': result.data[key].RID,
                            'ChargeCodeID': { ID: result.data[key].ChargeCodeID },
                            'infoCh': { ID: result.data[key].infoChID },
                            'Basic': { ID: result.data[key].BasicID },
                            'CntrTypes': { ID: result.data[key].CntrTypeID },
                            'CommodityTypes': { ID: result.data[key].CommodityTypeID },
                            'Currency': { ID: result.data[key].CurrencyID },
                            'Amt': result.data[key].Amt,
                            'CollectionMode': { ID: result.data[key].CollectionModeID },
                            'ChargeOwnership': { ID: result.data[key].ChargeOwnershipID }

                        });

                    });
                });
            }, function (result) {

                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            });
        }

    });

    function ShowPopup(message) {
        swal(message);
    };


</script>
<style>
    .steps .step {
    display: block;
    width: 100%;
    margin-bottom: 35px;
    text-align: center
}

.steps .step .step-icon-wrap {
    display: block;
    position: relative;
    width: 100%;
    height: auto;
    text-align: center;

}

.steps .step .step-icon-wrap::before,
.steps .step .step-icon-wrap::after {
    display: block;
    position: absolute;
    top:37%;
    width: 87%;
    left: 25px;
    height: 3px;
    margin-top: -1px;
    background-color:#e91e63;
    content: '';
    z-index: 1
}

.steps .step.completed .step-icon-wrap::before,
.steps .step.completed .step-icon-wrap::after {
    display: block;
    position: absolute;
    top:37%;
    width: 87%;
    left:25px;
    height: 3px;
    margin-top: -1px;
    background-color:#0585b5;
    content: '';
    z-index: 1
}

.steps .step .step-icon-wrap::before {
    /*left:23px;*/
}

.steps .step .step-icon-wrap::after {
    right: 0
}

.steps .step .step-icon {
    left: -80px;
    display: inline-block;
    position: relative;
    width: 20px;
    height: 20px;
    border: 3px solid #e91e63;
    border-radius: 50%;
    background-color:transparent;
    color: #374250;
    font-size: 38px;
    line-height: 81px;
    z-index: 5
}
.steps .step .step-icon .material-icons
{
    top:-20px;
    position:absolute;
    text-align:center;
    color: #e91e63;
    left: 80px;
}
.steps .step.completed .step-icon .material-icons
{
    top:-20px;
    position:absolute;
    text-align:center;
    color: #0585b5;
    left: 80px;
}
.steps .step .step-title {
    margin-top: -4px;
    position:absolute;
    margin-bottom: 0;
    margin-left:184px;
    color: #0585b5;
    font-size: 11px;
    font-weight: bold;
}
.steps .step.completed .step-title {
    margin-top:-4px;
    position: absolute;
    margin-bottom: 0;
    margin-left: 185px;
    color: #e91e63;
    font-size: 11px;
    font-weight: bold;
}

.steps .step:first-child .step-icon-wrap::before {
    display: none
}

.steps .step:last-child .step-icon-wrap::after {
    display: none
}

/*.steps .step.completed .step-icon-wrap::before,
.steps .step.completed .step-icon-wrap::after {
    background-color: #0585b5
}*/

.steps .step.completed .step-icon {
    border-color: #0585b5;
    background-color:transparent;
    color: #fff
}

@@media (max-width: 576px) {
    .flex-sm-nowrap .step .step-icon-wrap::before,
    .flex-sm-nowrap .step .step-icon-wrap::after {
        display: none
    }
}

@@media (max-width: 768px) {
    .flex-md-nowrap .step .step-icon-wrap::before,
    .flex-md-nowrap .step .step-icon-wrap::after {
        display: none
    }
}

@@media (max-width: 991px) {
    .flex-lg-nowrap .step .step-icon-wrap::before,
    .flex-lg-nowrap .step .step-icon-wrap::after {
        display: none
    }
}

@@media (max-width: 1200px) {
    .flex-xl-nowrap .step .step-icon-wrap::before,
    .flex-xl-nowrap .step .step-icon-wrap::after {
        display: none
    }
}

.bg-faded, .bg-secondary {
    background-color: #f5f5f5 !important;
}
.card-stats .card-header.card-header-icon, .card-stats .card-header.card-header-text
{
    text-align:center;
}
.card-stats .card-header h3.card-title {
    color: #fff!important;
    font-size: 23px;
    font-weight: bold;
}
.card-stats .card-header .card-category:not([class*=text-]) {
    font-size: 15px;
    font-weight: bold;
    color: #fff;
}
.material-icons.title
{
color: #fff;
    background-color: #0585b5;
    border-radius: 50%;
    padding: 11px;
    margin-bottom: 0;
    margin-top: 0;
    }
h5.cardtitle
{
    font-size:18px!important;
    text-decoration:none!important;
    color: #e91e63!important;
    font-weight: bold!important;
}
.card-stats .card-header.card-header-icon i {
    color: #9e9e9e;
    font-size:38px!important;
}
.card.card-stats.card-cancelled {
    background-color: #f4f4f4;
    margin-bottom: 0;
}
.card-stats .card-header .card-category:not([class*=text-]) {
    font-size: 13px;
    font-weight: bold;
    color: #0585b5;
}
.card-stats .card-header-danger h3.card-title {
    color: #0585b5!important;
    font-size:17px;
    font-weight: bold;
}
.card-stats .card-header-warning.card-header h3.card-title {
    color: #fff!important;
    font-size: 18px;
    font-weight: bold;
}
.card-stats .card-header-warning .card-category:not([class*=text-]) {
    font-size: 15px;
    font-weight: bold;
    color: #fff;
}
</style>
<div ng-app="MyApp" ng-controller="MyController">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12 backbtn" style="text-align:right;">
                <a href="/Sales/RaterequestView" type="submit" ng-click="back();" class="btn btn-fill btnback btn-success btn-round btntop">
                    <i class="material-icons">reply</i> Back
                </a>
                @*<a href="/Sales/RaterequestView" type="submit" class="btn btn-fill btnedit btn-warning btn-round btntop">
                    <i class="material-icons">edit</i>
                </a>*@
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="card ">
                    <div class="card-header card-header-primary card-header-text">
                        <div class="card-text">
                            <h4 class="card-title">Rate Request</h4>
                        </div>
                    </div>
                    <div class="card-body ">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="card card-wizard" data-color="rose">
                                    <div class="wizard-navigation">
                                        <ul class="nav nav-pills">
                                            <li class="nav-item">
                                                <a class="nav-link" href="#raterequest" data-toggle="tab" role="tab" id="tab1" ng-click="OnPagetab(1);">
                                                    Rate Request
                                                </a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" href="#contdetails" data-toggle="tab" role="tab" id="tab2" ng-click="OnPagetab(2);">
                                                    Container Details
                                                </a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" href="#mrg" data-toggle="tab" role="tab" id="tab5" ng-click="OnPagetab(5);">
                                                    MRG & SLOT
                                                </a>
                                            </li>

                                            <li class="nav-item">
                                                <a class="nav-link" href="#chargecode" data-toggle="tab" role="tab" id="tab3" ng-click="OnPagetab(3);">
                                                    Local Charges                                                </a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" href="#confirm" data-toggle="tab" role="tab" id="tab4" ng-click="OnPagetab(4);">
                                                    Confirmation
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="card-body">
                                        <div class="tab-content">
                                            <div class="tab-pane active" id="raterequest">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <div class="row">
                                                            <div class="col-md-4">
                                                                <div class="form-group">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>RR Number</label>
                                                                            <input type="text" autocomplete="off" id="txtRRNumber" ng-model="txtRRNumber" class="form-control" />
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-4">
                                                                &nbsp;
                                                            </div>
                                                            <div class="col-md-4">
                                                                <div class="form-group">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>Date</label>
                                                                            <input type="text" autocomplete="off" id="txtDate" class="form-control datepicker" ng-model="txtDate" class="form-control" />
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                            </div>


                                                            <div class="col-md-4">
                                                                <div class="form-group">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>Booking Party</label>
                                                                            <select class="form-control my-select" id="ddlbookingParty" ng-model="ddlbookingParty" ng-options="item.CustomerName for item in CustomerMasterAllvalues track by item.ID">
                                                                            </select>
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="col-md-4">
                                                                <div class="form-group">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>Sales Person</label>
                                                                            <select class="form-control my-select" id="ddlSalesPerson" ng-model="ddlSalesPerson" ng-options="item.UserName for item in UserNameMasterAllvalues track by item.ID">
                                                                            </select>
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="col-md-4">
                                                                <div class="form-group">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>Shipment Type</label>
                                                                            <select class="form-control my-select" id="ddlShipmentType" ng-model="ddlShipmentType" options="{ allowClear: true }" ng-options="item.GeneralName for item in ShipmentTypeAllvalues track by item.ID">
                                                                            </select>
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                            </div>


                                                            <div class="col-md-4">
                                                                <div class="form-group">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>Place Of Origin</label>
                                                                            <select class="form-control my-select" id="ddlPortOfOrg" ng-model="ddlPortOfOrg" ng-options="item.PortName for item in PortAllvalues track by item.ID">
                                                                            </select>
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="col-md-4">
                                                                <div class="form-group">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>Port Of Loading</label>
                                                                            <select class="form-control my-select" id="ddlPortofLoading" ng-model="ddlPortofLoading" ng-options="item.PortName for item in PortAllvalues track by item.ID"></select>
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="col-md-4">
                                                                <div class="form-group">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>Export Haulage</label>
                                                                            <select class="form-control my-select" id="ddlExportHaulage" ng-model="ddlExportHaulage" ng-options="item.GeneralName for item in HaulageTypeAllvalues track by item.ID">
                                                                            </select>
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-4">
                                                                <div class="form-group">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>Place Of Discharge</label>
                                                                            <select class="form-control my-select" id="ddlPortofDischarge" ng-model="ddlPortofDischarge" ng-options="item.PortName for item in PortAllvalues track by item.ID">
                                                                            </select>
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-4">
                                                                <div class="form-group">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>Final POD</label>
                                                                            <select class="form-control my-select" id="ddlPortofFinalPOD" ng-model="ddlPortofFinalPOD" ng-options="item.PortName for item in PortAllvalues track by item.ID">
                                                                            </select>
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                            </div>



                                                            <div class="col-md-4">
                                                                <div class="form-group">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>Import Haulage</label>
                                                                            <select class="form-control my-select" id="ddlImportHaulage" ng-model="ddlImportHaulage" ng-options="item.GeneralName for item in HaulageTypeAllvalues track by item.ID">
                                                                            </select>
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="col-md-4">
                                                                <div class="form-group">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>Transhipment Port</label>
                                                                            <select class="my-select form-control" id="ddlTranshipment" ng-model="ddlTranshipment" ng-options="item.PortName for item in PortAllvalues track by item.ID"></select>
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="col-md-4">
                                                                <div class="form-group">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>Service Type</label>
                                                                            <select class="form-control my-select" id="ddlServiceType" ng-model="ddlServiceType" ng-options="item.ServiceTypesName for item in ServiceTypesValue track by item.ID">
                                                                            </select>
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="col-md-4">
                                                                <div class="form-group">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>Valid Till</label>
                                                                            <input type="text" autocomplete="off" id="txtValidTill" ng-model="txtValidTill" class="form-control datepicker" />
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="col-md-8">
                                                                <div class="form-group">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>Remarks</label>
                                                                            <textarea id="txtRemark" class="form-control" rows="5"></textarea>
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                            </div>
                                                  
                                                        </div>
                                                    </div>

                                                </div>
                                                <div class="row">
                                                    <div class="ml-auto">
                                                        <button type="submit" ng-click="Recordsave();" class="btn btn-fill btn-success">
                                                            <i class="material-icons">save</i>
                                                            Save & Next
                                                        </button>
                                                        <input type="hidden" id="RegId" name="RegId" />

                                                    </div>
                                                    <div class="clearfix"></div>
                                                </div>
                                            </div>
                                            <div class="tab-pane" id="contdetails">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <div class="material-datatables">

                                                            <table class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">
                                                                <thead>
                                                                    <tr>
                                                                        <th>SNo</th>

                                                                        <th>Container Type</th>
                                                                        <th>Commodity</th>
                                                                        <th>Export Freedays</th>
                                                                        <th>Import Freedays</th>
                                                                        <th>VGM(Gr.Wt + Tr.Wt)</th>

                                                                        <th class="disabled-sorting text-right actwid">Actions</th>
                                                                    </tr>
                                                                </thead>

                                                                <tbody>
                                                                    <tr ng-repeat="gRow in DynamicGridContainer">
                                                                        <td>{{$index+1}}</td>

                                                                        <td>
                                                                            <select class="form-control" id="ddlCntrTypes" ng-model="gRow.CntrTypes" ng-options="item.CntrTypes for item in CntrTypesvalues track by item.ID">
                                                                            </select>
                                                                        </td>
                                                                        <td>
                                                                            <select class="form-control" id="ddlCommodityType" ng-model="gRow.CommodityTypes" ng-options="item.GeneralName for item in CommodityValue track by item.ID">
                                                                            </select>
                                                                        </td>
                                                                        <td><input type="text" id="txtExFreedays" class="form-control" ng-model="gRow.ExFreedays" /></td>
                                                                        <td><input type="text" id="txtImFreedays" class="form-control" ng-model="gRow.ImFreedays" /></td>
                                                                        <td><input type="text" id="txtVGM" class="form-control" ng-model="gRow.VGM" /></td>
                                                                        <td style="display:none;"><input type="hidden" id="HDRCID" class="form-control" ng-model="gRow.RCID" /></td>

                                                                        <td class="td-actions text-right actwid">
                                                                            <button type="button" rel="tooltip" ng-if="$last" ng-click="Add(gRow)" class="btn btn-primary btn-round" data-original-title="" title="">
                                                                                <i class="material-icons">add</i>
                                                                            </button>
                                                                            <button type="button" rel="tooltip" ng-if="!$last" ng-click="Remove(DynamicGridContainer,$index)" class="btn btn-danger btn-round" data-original-title="" title="">
                                                                                <i class="material-icons">delete</i>
                                                                            </button>
                                                                        </td>
                                                                    </tr>

                                                                </tbody>
                                                            </table>

                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="ml-auto">
                                                        <button type="submit" ng-click="ContainerRecordsave(DynamicGridContainer);" class="btn btn-fill btn-success">
                                                            <i class="material-icons">save</i>
                                                            Save
                                                        </button>

                                                    </div>
                                                    <div class="clearfix"></div>
                                                </div>
                                            </div>

                                            <div class="tab-pane" id="mrg">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <h5 class="cardtitle"><i class="material-icons title">directions_boat_filled</i> MRG Rate</h5>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-10">
                                                        <div class="card mb-3" style="margin-top:0!important;">

                                                            <div class="card-body">

                                                                <div class="row">
                                                                    <div class="col-md-6"><h6 style="margin-bottom:33px;"><span ng-bind="POLValue" ></span></h6></div>
                                                                    <div class="col-md-6" style="text-align:right"><h6 style="margin-bottom:33px;"><span ng-bind="PODValue"></span></h6></div>
                                                                </div>
                                                                <div class="steps d-flex flex-wrap flex-sm-nowrap justify-content-between padding-top-2x padding-bottom-1x">
                                                                    <div class="step">
                                                                        <div class="step-icon-wrap">
                                                                            <div class="step-icon">
                                                                                <i class="material-icons">local_shipping</i>

                                                                            </div>
                                                                            <h6 class="step-title" ng-bind="POLCodeValue"></h6>
                                                                        </div>

                                                                    </div>
                                                                    <div class="step completed">
                                                                        <div class="step-icon-wrap">
                                                                            <div class="step-icon"><i class="material-icons">directions_boat_filled</i></div>
                                                                        </div>
                                                                        <h6 class="step-title" ng-bind="PODCodeValue"></h6>
                                                                    </div>
                                                                    <div class="step">
                                                                        <div class="step-icon-wrap">
                                                                            <div class="step-icon"><i class="pe-7s-medal"></i></div>
                                                                        </div>

                                                                    </div>
                                                                    <div class="step completed">
                                                                        <div class="step-icon-wrap">
                                                                            <div class="step-icon"><i class="pe-7s-car"></i></div>
                                                                        </div>

                                                                    </div>

                                                                </div>
                                                            </div>

                                                        </div>

                                                    </div>
                                                    <div class="col-md-2">
                                                        <div class="card card-stats card-draft" style="margin-top:0!important;">
                                                            <div class="card-header card-header-warning card-header-icon">
                                                                <div class="row">

                                                                    <div class="col-md-12">
                                                                        <h3 class="card-title">$986</h3>
                                                                        <p class="card-category">Ocean Freight</p>

                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <div class="material-datatables">

                                                            <table class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">
                                                                <thead>
                                                                    <tr>
                                                                        <th>S.No</th>
                                                                        <th></th>
                                                                        <th>Size Type</th>
                                                                        <th>MRG Amount</th>
                                                                        <th>Quoted Amount</th>
                                                                        <th>Freight Term</th>
                                                                        <th>Collection Agent</th>

                                                                      
                                                                    </tr>
                                                                </thead>

                                                                <tbody>
                                                                    <tr ng-repeat="gRow in DynamicGridMRG">
                                                                        <td>
                                                                            {{$index+1}}
                                                                            <input type="hidden" id="HDMID" ng-model="gRow.MID" />
                                                                        </td>
                                                                        <td>
                                                                             <input  type="checkbox" id="ChekMRG{{gRow.MID}}" value="{{gRow.MID}}" ng-model="gRow.Selected" ng-checked="ExMRGType.indexOf(gRow.MID) > -1" />
                                                                        </td>
                                                                        <td>
                                                                            <select class="form-control" id="ddlCntrTypes" ng-model="gRow.CntrTypes" ng-options="item.CntrTypes for item in CntrTypesvalues track by item.ID">
                                                                            </select>
                                                                        </td>
                                                                        <td><input type="text" id="txtMRGAmt" class="form-control" ng-model="gRow.MRGAmt" /></td>


                                                                        <td><input type="text" id="txtQuotedAmt" class="form-control" ng-model="gRow.QuotedAmt" /></td>

                                                                        <td>
                                                                            <select class="form-control" id="ddlCollectionMode" ng-model="gRow.FreightTerms" ng-options="item.GeneralName for item in CollectionModeAllValues track by item.ID">
                                                                            </select>
                                                                        </td>

                                                                        <td>
                                                                            <select class="form-control" id="ddlCollectionAgent" ng-model="gRow.CollectionAgent" ng-options="item.AgencyName for item in AgencyMasterAllvalues track by item.ID">
                                                                            </select>
                                                                        </td>
                                                                     


                                                                    </tr>

                                                                </tbody>
                                                            </table>

                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <h5 class="cardtitle"><i class="material-icons title">directions_boat_filled</i> Slot Cost</h5>
                                                    </div>

                                                    <div class="col-md-10">
                                                        <div class="row">
                                                            <div class="col-lg-4 col-md-4 col-sm-6">
                                                                <div class="card card-stats card-cancelled" style="margin-top:0!important;">
                                                                    <div class="card-header card-header-danger card-header-icon">
                                                                        <div class="row">
                                                                            <div class="col-md-3">

                                                                                <i class="material-icons">location_on</i>
                                                                            </div>
                                                                            <div class="col-md-9">
                                                                                <p class="card-category">From</p>
                                                                                <h3 class="card-title" ng-bind="POLValue"></h3>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-4 col-md-4 col-sm-6">
                                                                <div class="card card-stats card-cancelled" style="margin-top:0!important;">
                                                                    <div class="card-header card-header-danger card-header-icon">
                                                                        <div class="row">
                                                                            <div class="col-md-3">

                                                                                <i class="material-icons">location_on</i>
                                                                            </div>
                                                                            <div class="col-md-9">
                                                                                <p class="card-category">To</p>
                                                                                <h3 class="card-title" ng-bind="PODValue"></h3>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-4 col-md-4 col-sm-6">
                                                                <div class="card card-stats card-cancelled" style="margin-top:0!important;">
                                                                    <div class="card-header card-header-danger card-header-icon">
                                                                        <div class="row">
                                                                            <div class="col-md-3">

                                                                                <i class="material-icons">location_on</i>
                                                                            </div>
                                                                            <div class="col-md-9">
                                                                                <p class="card-category">Transhipment</p>
                                                                                <h3 class="card-title"></h3>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div class="card card-stats card-draft" style="margin-top:0!important;">
                                                            <div class="card-header card-header-warning card-header-icon">
                                                                <div class="row">

                                                                    <div class="col-md-12">
                                                                        <h3 class="card-title">$986</h3>
                                                                        <p class="card-category">Slot Cost</p>

                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12 padlr0" style="margin-bottom:20px;">
                                                            <p style="font-size:12px;color:#6d6c6c; text-align:center;margin-bottom:0;">Valid:<span ng-bind="SLOTValidateDate"></span></p>
                                                            <p style="font-size:11px;color:#6d6c6c; text-align:center;margin-bottom:0;margin-top:-5px;">Ref:<span ng-bind="SLOTRef"></span></p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="material-datatables">
                                                            <table class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">
                                                                <thead>
                                                                    <tr>
                                                                        <th>SNo</th>
                                                                        <th>&nbsp;</th>
                                                                        <th>Slot Operator</th>
                                                                        <th>Slot Term</th>
                                                                      
                                                                    </tr>
                                                                </thead>

                                                                <tbody>
                                                                    <tr ng-repeat="gRow in DynamicGridSlOT">
                                                                        <td>
                                                                            {{$index+1}}
                                                                            <input type="hidden" id="HDMID" ng-model="gRow.RSID" />
                                                                        </td>

                                                                        <td>
                                                                            <input type="checkbox" id="ChekSLOT{{gRow.RSID}}" value="{{gRow.RSID}}" ng-model="gRow.Selected" ng-checked="ExSLOTType.indexOf(gRow.RSID) > -1"  />
                                                                        </td>
                                                                        <td>
                                                                            <select class="form-control my-select" id="ddlSlotOperator" ng-model="gRow.SlotOperator" options="{ allowClear: true }" ng-options="item.CustomerName for item in SlotOperatorValue track by item.ID">
                                                                            </select>
                                                                        </td>

                                                                        <td>
                                                                            <select class="form-control my-select" id="ddlSlotTerm" ng-model="gRow.SlotTerm" options="{ allowClear: true }" ng-options="item.SlotTerm for item in SlotTermsValue track by item.ID">
                                                                            </select>
                                                                        </td>
                                                                       
                                                                    </tr>

                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="material-datatables">
                                                            <table class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">
                                                                <thead>
                                                                    <tr>
                                                                        <th>SNo.</th>
                                                                        <th>&nbsp;</th>
                                                                        <th>Charge Code</th>
                                                                        <th>Size Type</th>
                                                                        <th>Commodity</th>
                                                                        <th>Slot Cost</th>

                                                                    </tr>
                                                                </thead>

                                                                <tbody>
                                                                    <tr ng-repeat="gRow in DynamicGridSlOTDtls">
                                                                        <td>
                                                                            {{$index+1}}
                                                                            <input type="hidden" id="HDRRSIDD" ng-model="gRow.RSIDD" />
                                                                        </td>
                                                                        <td>
                                                                            <input type="checkbox" id="ChekSLOTD{{gRow.RSIDD}}" value="{{gRow.RSIDD}}" ng-model="gRow.Selected" ng-checked="ExSLOTDType.indexOf(gRow.RSIDD) > -1" />
                                                                        </td>
                                                                        <td>
                                                                            <select class="form-control" id="ddlSLTchargeCode" ng-model="gRow.ChargeID" ng-options="item.ChargeCode for item in ChargeCodeAllvalues track by item.ID"></select>

                                                                        </td>

                                                                        <td>
                                                                            <select class="form-control" id="ddlSizeType" ng-model="gRow.SizeType" ng-options="item.CntrTypes for item in CntrTypesvalues track by item.ID">
                                                                            </select>

                                                                        </td>

                                                                        <td>
                                                                            <select class="form-control" id="ddlCommodity" ng-model="gRow.Commodity" ng-options="item.GeneralName for item in CommodityValue track by item.ID">
                                                                            </select>
                                                                        </td>
                                                                        <td>
                                                                            <input type="text" id="txtSlotCost" ng-model="gRow.Amount" />
                                                                        </td>

                                                                    </tr>

                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="ml-auto">
                                                        <button type="submit" ng-click="MRGSLOTRecordsave(DynamicGridMRG,DynamicGridSlOT,DynamicGridSlOTDtls);" class="btn btn-fill btn-success">
                                                            <i class="material-icons">save</i>
                                                            Save & Next
                                                        </button>

                                                    </div>
                                                    <div class="clearfix"></div>
                                                </div>
                                            </div>
                                                            <div class="tab-pane" id="chargecode">
                                                                <div class="row">
                                                                    <h5 class="cardtitle">Rate Details</h5>
                                                                    <div class="col-md-12">

                                                                        <div class="col-md-12">
                                                                            <div class="col-md-12">
                                                                                <div class="form-group">
                                                                                    <div class="row">
                                                                                        <div class="col-md-2">
                                                                                            <span ng-bind="POLValue"></span>
                                                                                        </div>
                                                                                        <div class="col-md-2">
                                                                                            <button class="btn btn-default"  ng-click="GetTariffRatePOL()">View Rate</button>
                                                                                        </div>

                                                                                        <div class="col-md-2">
                                                                                            <span> Export Local <br /> Charges <br />INR - 26000</span>
                                                                                        </div>
                                                                                        <div class="col-md-2">
                                                                                            <span> Import Local <br /> Charges <br />SGD - 200</span>
                                                                                        </div>
                                                                                        <div class="col-md-2">
                                                                                            <button class="btn btn-default">View Rate</button>
                                                                                        </div>

                                                                                        <div class="col-md-2">
                                                                                            <span ng-bind="PODValue"></span>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                        </div>

                                                                        <div class="material-datatables">

                                                                            <table class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">
                                                                                <thead>
                                                                                    <tr>
                                                                                        <th>S.No</th>
                                                                                        <th>Charges</th>
                                                                                        <th>Inc.of.Frt</th>
                                                                                        <th>Basis</th>
                                                                                        <th>Container Type</th>
                                                                                        <th>Commodity</th>
                                                                                        <th>Currency</th>
                                                                                        <th>Amount</th>
                                                                                        <th>Collection Mode</th>
                                                                                        @*<th>Collection Agent</th>*@
                                                                                        <th>Charge Ownership</th>

                                                                                        <th class="disabled-sorting text-right actwid">Actions</th>
                                                                                    </tr>
                                                                                </thead>

                                                                                <tbody>
                                                                                    <tr ng-repeat="gRow in DynamicGridRateCharge">
                                                                                        <td>{{$index+1}}</td>

                                                                                        <td>
                                                                                            <select class="form-control" id="ddlchargeCode" ng-model="gRow.ChargeCodeID" ng-options="item.ChargeCode for item in ChargeCodeAllvalues track by item.ID"></select>

                                                                                        </td>

                                                                                        <td>
                                                                                            <select class="form-control" id="ddlinfofrt" ng-model="gRow.infoCh" ng-options="item.name for item in InfochargeBindValues track by item.ID"></select>

                                                                                        </td>
                                                                                        <td>
                                                                                            <select class="form-control" id="ddlBasic" ng-model="gRow.Basic" ng-options="item.name for item in BasicBindValues track by item.ID"> </select>
                                                                                        </td>
                                                                                        <td>
                                                                                            <select class="form-control" id="ddlCntrTypes" ng-model="gRow.CntrTypes" ng-options="item.CntrTypes for item in CntrTypesvalues track by item.ID">
                                                                                            </select>
                                                                                        </td>

                                                                                        <td>
                                                                                            <select class="form-control" id="ddlCommodityType" ng-model="gRow.CommodityTypes" ng-options="item.GeneralName for item in CommodityValue track by item.ID">
                                                                                            </select>
                                                                                        </td>

                                                                                        <td>
                                                                                            <select class="form-control" id="ddlCurrency" ng-model="gRow.Currency" ng-options="item.Currency for item in CurrencyValue track by item.ID">
                                                                                            </select>
                                                                                        </td>

                                                                                        <td><input type="text" id="txtAmt" class="form-control" ng-model="gRow.Amt" /></td>

                                                                                        <td>
                                                                                            <select class="form-control" id="ddlCollectionMode" ng-model="gRow.CollectionMode" ng-options="item.GeneralName for item in CollectionModeAllValues track by item.ID">
                                                                                            </select>
                                                                                        </td>

                                                                                        @*<td>
                                                                                            <select class="form-control" id="ddlCollectionAgent" ng-model="gRow.CollectionAgent" ng-options="item.AgencyName for item in AgencyMasterAllvalues track by item.ID">
                                                                                            </select>
                                                                                        </td>*@

                                                                                        <td>
                                                                                            <select class="form-control" id="ddlChargeOwnership" ng-model="gRow.ChargeOwnership" ng-options="item.GeneralName for item in ChageOwnerAllValues track by item.ID">
                                                                                            </select>
                                                                                        </td>

                                                                                        <td style="display:none;"><input type="hidden" id="HDRID" class="form-control" ng-model="gRow.RID" /></td>


                                                                                        <td class="td-actions text-right actwid">
                                                                                            <button type="button" rel="tooltip" ng-if="$last" ng-click="Add(gRow)" class="btn btn-primary btn-round" data-original-title="" title="">
                                                                                                <i class="material-icons">add</i>
                                                                                            </button>
                                                                                            <button type="button" rel="tooltip" ng-if="!$last" ng-click="Remove(DynamicGrid,$index)" class="btn btn-danger btn-round" data-original-title="" title="">
                                                                                                <i class="material-icons">delete</i>
                                                                                            </button>
                                                                                        </td>
                                                                                    </tr>

                                                                                </tbody>
                                                                            </table>

                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <div class="row">
                                                                    <h5 class="cardtitle">Cost Details</h5>
                                                                    <div class="col-md-12">

                                                                        <div class="col-md-12">
                                                                            <div class="form-group">
                                                                                <div class="row">
                                                                                    <div class="col-md-2">
                                                                                        <span ng-bind="POLValue"></span>
                                                                                    </div>
                                                                                    <div class="col-md-2">
                                                                                        <button class="btn btn-default" ng-click="GetRateCostPOL()">View Cost</button>
                                                                                    </div>

                                                                                    <div class="col-md-2">
                                                                                        <span> Export Local <br /> Charges <br />INR - 26000</span>
                                                                                    </div>
                                                                                    <div class="col-md-2">
                                                                                        <span> Import Local <br /> Charges <br />SGD - 200</span>
                                                                                    </div>
                                                                                    <div class="col-md-2">
                                                                                        <button class="btn btn-default">View Cost</button>
                                                                                    </div>

                                                                                    <div class="col-md-2">
                                                                                        <span ng-bind="PODValue"></span>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="material-datatables">


                                                                            <table class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">
                                                                                <thead>
                                                                                    <tr>
                                                                                        <th>S.No</th>
                                                                                        <th>Charge Description</th>
                                                                                        <th>Basis</th>
                                                                                        <th>Container Type</th>
                                                                                        <th>Commodity</th>
                                                                                        <th>Currency</th>
                                                                                        <th>Amount</th>
                                                                                        <th>Payment Centre</th>
                                                                                        @*<th>Responsible Agency</th>*@
                                                                                        <th>Charge Owner</th>
                                                                                        <th class="disabled-sorting text-right actwid">Actions</th>
                                                                                    </tr>
                                                                                </thead>
                                                                                <tbody>
                                                                                    <tr ng-repeat="gRow in DynamicGridCostRateCharge">
                                                                                        <td>{{$index+1}}</td>

                                                                                        <td>
                                                                                            <select class="form-control" id="ddlchargeCode" ng-model="gRow.ChargeCodeID" ng-options="item.ChargeCode for item in ChargeCodeAllvalues track by item.ID"></select>

                                                                                        </td>

                                                                                        <td>
                                                                                            <select class="form-control" id="ddlBasic" ng-model="gRow.Basic" ng-options="item.name for item in BasicBindValues track by item.ID"> </select>
                                                                                        </td>
                                                                                        <td>
                                                                                            <select class="form-control" id="ddlCntrTypes" ng-model="gRow.CntrTypes" ng-options="item.CntrTypes for item in CntrTypesvalues track by item.ID">
                                                                                            </select>
                                                                                        </td>

                                                                                        <td>
                                                                                            <select class="form-control" id="ddlCommodityType" ng-model="gRow.CommodityTypes" ng-options="item.GeneralName for item in CommodityValue track by item.ID">
                                                                                            </select>
                                                                                        </td>

                                                                                        <td>
                                                                                            <select class="form-control" id="ddlCurrency" ng-model="gRow.Currency" ng-options="item.Currency for item in CurrencyValue track by item.ID">
                                                                                            </select>
                                                                                        </td>

                                                                                        <td><input type="text" id="txtAmt" class="form-control" ng-model="gRow.Amt" /></td>

                                                                                        <td>
                                                                                            <select class="form-control" id="ddlCollectionMode" ng-model="gRow.CollectionMode" ng-options="item.GeneralName for item in CollectionModeAllValues track by item.ID">
                                                                                            </select>
                                                                                        </td>

                                                                                        @*<td>
                                                                                            <select class="form-control" id="ddlCollectionAgent" ng-model="gRow.CollectionAgent" ng-options="item.AgencyName for item in AgencyMasterAllvalues track by item.ID">
                                                                                            </select>
                                                                                        </td>*@

                                                                                        <td>
                                                                                            <select class="form-control" id="ddlChargeOwnership" ng-model="gRow.ChargeOwnership" ng-options="item.GeneralName for item in ChageOwnerAllValues track by item.ID">
                                                                                            </select>
                                                                                        </td>

                                                                                        <td style="display:none;"><input type="hidden" id="HDRID" class="form-control" ng-model="gRow.RID" /></td>


                                                                                        <td class="td-actions text-right actwid">
                                                                                            <button type="button" rel="tooltip" ng-if="$last" ng-click="CostRowAdd(gRow)" class="btn btn-primary btn-round" data-original-title="" title="">
                                                                                                <i class="material-icons">add</i>
                                                                                            </button>
                                                                                            <button type="button" rel="tooltip" ng-if="!$last" ng-click="Remove(DynamicGridCostRateCharge,$index)" class="btn btn-danger btn-round" data-original-title="" title="">
                                                                                                <i class="material-icons">delete</i>
                                                                                            </button>
                                                                                        </td>
                                                                                    </tr>
                                                                                </tbody>
                                                                            </table>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="ml-auto">
                                                                        <button type="submit" ng-click="ChrageRateRecordsave(DynamicGridRateCharge,DynamicGridCostRateCharge);" class="btn btn-fill btn-success">
                                                                            <i class="material-icons">save</i>
                                                                            Save
                                                                        </button>

                                                                    </div>
                                                                    <div class="clearfix"></div>
                                                                </div>
                                                            </div>
                                                            <div class="tab-pane" id="confirm">
                                                                <div class="row">
                                                                    <div class="row buttons">
                                                                        <div class="col-md-12 topbtn" style="text-align:center;">
                                                                            <button type="submit" class="btn btn-fill btn-success btntop">
                                                                                <i class="material-icons">done</i>
                                                                                Approve
                                                                            </button>
                                                                            <button type="submit" class="btn btn-fill btn-danger btntop">
                                                                                <i class="material-icons">close</i>
                                                                                Reject
                                                                            </button>
                                                                            <button type="submit" class="btn btn-fill btn-primary btntop">
                                                                                <i class="material-icons">cached</i>
                                                                                Revise
                                                                            </button>
                                                                            <button type="submit" class="btn btn-fill btn-info btntop">
                                                                                <i class="material-icons">book</i>
                                                                                History
                                                                            </button>
                                                                            <button type="submit" name="btnSearch" value="PDF" onclick="location.href='@Url.Action("btnPDF", "Sales")'" class="btn btn-fill btn-default btntop">
                                                                                <i class="material-icons">print</i>
                                                                                Print
                                                                            </button>
                                                                            <span class="btn btn-round btn-rose btn-file">
                                                                                <span class="fileinput-new">Add Attachments</span>
                                                                                <input type="file" name="..." />
                                                                            </span>



                                                                        </div>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>


                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                    </div>
                </div>
            </div>
        </div>


    </div>
</div>
<script>
    $(document).ready(function () {
        // Initialise the wizard
        demo.initMaterialWizard();
        setTimeout(function () {
            $('.card.card-wizard').addClass('active');
        }, 600);

        md.initFormExtendedDatetimepickers();
        if ($('.slider').length != 0) {
            md.initSliders();
        }
    });
</script>