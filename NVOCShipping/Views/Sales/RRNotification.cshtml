@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css" rel="stylesheet" />
@*<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>*@
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>

<style>
    .bg-gradient-info, .bg-gradient-success, .bg-gradient-danger, .bg-gradient-warning {
        height: 127px !important;
    }

    .viewdiv {
        background-color: #fff;
        margin-top: -10px;
        height: 22px;
        position: absolute;
        left: 0;
        top: 115px;
    }

        .viewdiv h5 {
            color: #00172a;
            font-size: 13px;
            font-weight: bold;
            margin-top: 2px;
            margin-left: 4px;
        }

        .viewdiv .fa-arrow-right {
            color: #000;
        }

        .viewdiv .col-md-4 {
            text-align: right;
            padding-right: 6px;
            margin-top: -2px;
        }

    .exceldownload .fa-file-excel-o {
        color: #4caf50;
        font-weight: 400;
        font-size: 20px;
    }

    .exceldownload a {
        color: #000;
    }
    /*.table > tbody > tr > td {
        white-space: nowrap;
    }*/
</style>
<style>
    .bmd-form-group [class*=" bmd-label"], .bmd-form-group [class^=bmd-label] {
        position: initial;
    }

    .nav-tabs .nav-item .nav-link.active {
        background-color: hsl(336deg 76% 50%);
        transition: background-color .3s .2s;
    }

    .nav-tabs .nav-item .nav-link {
        margin: 3px 6px;
        background-color: #20498e;
        padding: 5px 0;
    }

    .nav-tabs.ratetab .nav-item .nav-link.active {
        background-color: hsl(197.91deg 76% 50%);
        transition: background-color .3s .2s;
    }

    .nav-tabs.ratetab .nav-item .nav-link {
        margin: 3px 6px;
        background-color: #1a6865;
        padding: 5px 0;
    }

    .nav-tabs .nav-item {
        width: 46%;
    }

    .chargedtls label {
        font-size: 13px !important;
    }

    .nav-tabs {
        padding: 8px 0px;
        border-bottom: none !important;
    }
    /* .chargedtls
        {
            border:1px solid #ccc;
        }*/
    .card .pickupdiv .table tr td {
        font-size: 12px;
        border: 1px solid #ccc;
        padding-top: 1px;
        padding-bottom: 1px;
        /* font-weight: 600;*/
        background-color: #f0f8ff78;
        color: #333;
    }

    .card .pickupdiv .table tr th {
        position: sticky;
        top: 0;
        z-index: 1;
        background-color: #21277a;
    }

    .btncharge {
        padding: 8px 18px;
        margin: -4px 1px;
    }

    .form-control[disabled], .form-group .form-control[disabled], fieldset[disabled] .form-control, fieldset[disabled] .form-group .form-control {
        background-color: #eee;
    }
</style>
<script type="text/javascript">

    LayoutApp.controller('MyController', function ($scope, $http, $timeout) {

        $('#overlay').fadeIn().delay(300).fadeOut();


        $(document).ready(function () {
            $('.my-selectPOL').select2({
                placeholder: "POL", allowClear: true, width: '100%'
            });
            $('.my-selectPOD').select2({
                placeholder: "POD", allowClear: true, width: '100%'
            });
            $('.my-selectStatus').select2({
                placeholder: "Status", allowClear: true, width: '100%'
            });
            $('.my-selectBP').select2({
                placeholder: "Booking Party", allowClear: true, width: '100%'
            });

        });


        $scope.RRStatusValueAll = [

            { 'Status': 'PENDING', 'ID': 1 },
            { 'Status': 'REJECTED', 'ID': 2 },
            { 'Status': 'RE-QUOTE', 'ID': 3 },
            { 'Status': 'APPROVED', 'ID': 4 }
        ];

        $scope.CustomerMasterAllvalues = null;
        $scope.fillCustomerMasterValues = function () {

            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/CustomerMaster/',
                data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.CustomerMasterAllvalues = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillCustomerMasterValues();

        $scope.PortAllvalues = null;
        $scope.fillPortsValues = function () {
            $http({
                method: 'POST',
                url: '/api/CommonAccessApi/PortValues/',
                data: {}
            }).then(function (result) {
                $timeout(function () {
                    $scope.PortAllvalues = result.data;

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillPortsValues();

        $scope.fillRRStatusCount = function () {
            var BussData = {};

            BussData.AgentId = 2;
            $http({
                method: 'POST',
                url: '/api/SalesApi/RRDashBordCount/',
                data: JSON.stringify(BussData),
            }).then(function (result) {
                $timeout(function () {

                    $scope.Pending = result.data[0].Pending;
                    $scope.Rejected = result.data[0].Rejected;
                    $scope.REQuote = result.data[0].REQuote;
                    $scope.Approved = result.data[0].Approved;
                    $('#overlay').hide();

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
         $scope.fillRRStatusCount();

        $scope.RateRequetRateview = null;
        $scope.fillRateRequetRateview = function () {
            var BussData = {};
            BussData.PortofLoading = $('#ddlPOL').val();
            BussData.PortofDischarge = $('#ddlPOD').val();
            BussData.RRNumber = $scope.txtRRNumber;
            BussData.BookingParty = $('#ddlbookingParty').val();
            BussData.Status = $('#ddlStatus').val();

            $http({
                method: 'POST',
                url: '/api/SalesApi/RateSheetNotification/',
                data: JSON.stringify(BussData),
            }).then(function (result) {

                $timeout(function () {
                    $scope.RateRequetRateview = result.data;
                    $scope.totalItems = $scope.RateRequetRateview.length;
                    $scope.currentPage = 1;
                    $scope.numPerPage = 8;
                    $scope.paginate = function (value) {
                        var begin, end, index;
                        begin = ($scope.currentPage - 1) * $scope.numPerPage;
                        end = begin + $scope.numPerPage;
                        index = $scope.RateRequetRateview.indexOf(value);
                        return (begin <= index && index < end);
                    };


                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };
        $scope.fillRateRequetRateview();

        $scope.fillViewDtlsRRviewDtlsButton = function (status) {


            var BussData = {};
            BussData.PortofLoading = $('#ddlPOL').val();
            BussData.PODStr = $('#ddlPOD').val();
            BussData.RRNumber = $scope.txtRRNumber;
            BussData.BookingParty = $('#ddlbookingParty').val();
            BussData.Status = status;

            $http({
                method: 'POST',
                url: '/api/SalesApi/RateSheetViewRecord/',
                data: JSON.stringify(BussData),
            }).then(function (result) {
                $timeout(function () {
                    $scope.RateRequetRateview = result.data;
                    $scope.totalItems = $scope.RateRequetRateview.length;
                    $scope.currentPage = 1;
                    $scope.numPerPage = 8;
                    $scope.paginate = function (value) {
                        var begin, end, index;
                        begin = ($scope.currentPage - 1) * $scope.numPerPage;
                        end = begin + $scope.numPerPage;
                        index = $scope.RateRequetRateview.indexOf(value);
                        return (begin <= index && index < end);
                    };


                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        };


        $scope.ShowWindow = function (IDv) {
            $scope.RegId = IDv;
            var BussData = {}
            BussData.RRID = IDv;


            $http({
                method: 'POST',
                url: '/api/SalesApi/RateSheetNotificationPopup/',
                data: JSON.stringify(BussData)
            }).then(function (result) {
                $timeout(function () {

                    if (result.data.length != 0)
                    {

                        $scope.RRNO = result.data[0].RatesheetNo;
                        $scope.POL = result.data[0].POLName;
                        $scope.POD = result.data[0].PODName;
                        $scope.Status = result.data[0].Status;
                        $scope.BookingParty = result.data[0].BookingParty;

                        $scope.TSPort = result.data[0].Tsport;
                        $scope.FPOD = result.data[0].FPODName;

                        $scope.RRNoteCargo = result.data[0].Cargo;
                        $scope.CollectionMode = result.data[0].CollectMode;
                       // $scope.FreeDays = result.data[0].FreeDays;
                        $scope.POR = result.data[0].PORName;
                        $scope.SalesMode = result.data[0].SalesMode;
                        $scope.Validity = result.data[0].Validate;

                        if (result.data[0].Status == "PENDING") {

                            $scope.BtnApproval = true;
                            $scope.BtnReject = true;
                            $scope.BtnReQuote = true;

                        }
                        else {
                            $scope.BtnApproval = false;
                            $scope.BtnReject = false;
                            $scope.BtnReQuote = false;

                        }
                        $scope.SlotRatedisplay(IDv);

                    }

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
            $('#demoModal').modal('show');
            $scope.ShowNotifyTHCandIHC(IDv);
            $scope.ShowNotifyChargewiseRates(IDv);
            $scope.ShowModeList(IDv);
            //Revenus


        }

        $scope.DynamicGridSlotAmount = null;
        $scope.SlotRatedisplay = function (IDv)
        {

            var BussData = {}
            BussData.RRID = IDv;
            $http({
                method: 'POST',
                url: '/api/SalesApi/RateSheetNotificationSlotTerms/',
                data: JSON.stringify(BussData)
            }).then(function (result) {
                $timeout(function () {

                    $scope.DynamicGridSlotAmount = result.data;


                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
            $('#demoModal').modal('show');
            $scope.ShowNotifyTHCandIHC(IDv);
            $scope.ShowNotifyChargewiseRates(IDv);
            $scope.ShowModeList(IDv);
            $scope.FillExistingFreightTraiffCharges(IDv);
            $scope.FillExistingImportTraiffCharges(IDv);
            $scope.FillExistingExportTraiffCharges(IDv);
            $scope.FillExistingCostImportTraiffCharges(IDv);
            $scope.FillExistingCostExportTraiffCharges(IDv);
            $scope.FilRateSheetExsitingSlotAmount(IDv);
            $scope.FillExistingCostRevenuTotal(IDv);


        }


        $scope.ApprovalsSave = function () {

            $('#overlay').fadeIn().delay(100).fadeOut();
            var BussData = {}
            BussData.ID = $scope.RegId;
            BussData.status = 4;
            BussData.Notes = $scope.txtNotes;
            BussData.UserID = localStorage.getItem("UserID");
            $http({
                method: 'POST',
                url: '/api/SalesApi/SalesRRSendApproval',
                data: JSON.stringify(BussData),

            }).then(function (result) {
                $timeout(function () {
                    if (result.data.length != 0) {
                        ShowPopup("Approval Successfully");
                        $scope.btnSendEmailAlert();
                        setTimeout(function () { location.href = "/Sales/RRNotification" }, 1000);
                    }
                    else {

                        ShowPopup("Error Not saved");
                    }

                    setTimeOut(function () {
                        window.location = "/";
                    }, 3000);
                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {

                ShowPopup('There has been an error: ' + result);
            });
        }

        $scope.RejectSave = function () {


            var validation = "";
            var txtDate = $('#txtNotes').val();
            if (txtDate.length == 0) {
                validation += "<span style='color:red;'>*</span> <span>Please Enter  Comments</span></br>"
            }
            if (validation != "") {
                ShowPopup(validation);
                return false;
            }
            $('#overlay').fadeIn().delay(100).fadeOut();
            var BussData = {}
            BussData.ID = $scope.RegId;
            BussData.status = 2;
            BussData.Notes = $scope.txtNotes;
            BussData.UserID = localStorage.getItem("UserID");
            $http({
                method: 'POST',
                url: '/api/SalesApi/SalesRRSendApproval',
                data: JSON.stringify(BussData),

            }).then(function (result) {
                $timeout(function () {
                    if (result.data.length != 0) {
                        ShowPopup("Reject Successfully");
                        $scope.btnSendEmailAlert();
                        setTimeout(function () { location.href = "/Sales/RRNotification" }, 1000);
                    }
                    else {

                        ShowPopup("Error Not saved");
                    }

                    setTimeOut(function () {
                        window.location = "/";
                    }, 3000);
                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {

                ShowPopup('There has been an error: ' + result);
            });
        }

        $scope.ReQuoteSave = function () {

            var validation = "";
            var txtDate = $('#txtNotes').val();
            if (txtDate.length == 0) {
                validation += "<span style='color:red;'>*</span> <span>Please Enter  Comments</span></br>"
            }
            if (validation != "") {
                ShowPopup(validation);
                return false;
            }
            $('#overlay').fadeIn().delay(100).fadeOut();
            var BussData = {}
            BussData.ID = $scope.RegId;
            BussData.status = 3;
            BussData.Notes = $scope.txtNotes;
            BussData.UserID = localStorage.getItem("UserID");
            $http({
                method: 'POST',
                url: '/api/SalesApi/SalesRRSendApproval',
                data: JSON.stringify(BussData),

            }).then(function (result) {
                $timeout(function () {
                    if (result.data.length != 0) {
                        ShowPopup("Re-Quote Successfully");
                        //$scope.fillRateRequetRateview();
                        $scope.btnSendEmailAlert();
                         setTimeout(function () { location.href = "/Sales/RRNotification" }, 1000);
                    }
                    else {

                        ShowPopup("Error Not saved");
                    }

                    setTimeOut(function () {
                        window.location = "/";
                    }, 3000);
                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {

                ShowPopup('There has been an error: ' + result);
            });
        }

        $scope.ShowNotifyTHCandIHC = function (IDv) {

            $scope.RegId = IDv;
            var BussData = {}
            BussData.RRID = IDv;

            $http({
                method: 'POST',
                url: '/api/SalesApi/RateSheetNotificationTHCandIHC/',
                data: JSON.stringify(BussData)
            }).then(function (result) {
                $timeout(function () {

                    if (result.data.length != 0) {

                    $scope.Ratesheetthcihc = result.data;

                    }

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
            $('#demoModal').modal('show');
        }
        $scope.ShowNotifyChargewiseRates = function (IDv) {

            $scope.RegId = IDv;
            var BussData = {}
            BussData.RRID = IDv;

            $http({
                method: 'POST',
                url: '/api/SalesApi/RRNotificationChargewiseRates/',
                data: JSON.stringify(BussData)
            }).then(function (result) {
                $timeout(function () {

                    if (result.data.length != 0) {

                        $scope.RRmanifestrateschargewise = result.data;

                    }

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
            $('#demoModal').modal('show');
        }



        $scope.ShowModeList = function (IDv) {
            
            $scope.RegId = IDv;
            var BussData = {}
            BussData.RRID = IDv;

            $http({
                method: 'POST',
                url: '/api/SalesApi/RRNotificationModeview/',
                data: JSON.stringify(BussData)
            }).then(function (result) {
                $timeout(function () {

                    if (result.data.length != 0) {

                        $scope.RRModeList = result.data;

                    }

                });
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
            $('#demoModal').modal('show');
        }


        $scope.btnPrintEmail = function () {
            var id = $scope.RegId;
            window.location.href = '@Url.Action("RRPDFSave", "RateRequest")?id=' + id + "&AgentID=" + localStorage.getItem("AgencyID");
            $scope.fillRateRequetRateview();

        }




         $scope.btnPrint = function () {
            var id = $scope.RegId;
            //window.location.href = '@Url.Action("RateRequestPdfSample", "RateRequest")?id=' + id;
            window.open('@Url.Action("RRPDF", "RateRequest")?id=' + id);
        }

        $scope.PendingView = function () {
           //$scope.HdPending = 1;
            var status = 1;
            $scope.fillViewDtlsRRviewDtlsButton(status);
        }
        $scope.ApprovedView = function () {
           // $scope.HdApproved = 4;
            var status = 4;
            $scope.fillViewDtlsRRviewDtlsButton(status);
        }
        $scope.RequotedView = function () {
           // $scope.HdRequoted = 3;
            var status = 3;
            $scope.fillViewDtlsRRviewDtlsButton(status);
        }
        $scope.RejectedView = function () {
            //$scope.HdRejected = 2;
            var status = 2;
            $scope.fillViewDtlsRRviewDtlsButton(status);
        }
        $scope.ClearRecords = function () {
            $("#ddlPOL").val(null).trigger("change");
            $("#ddlPOD").val(null).trigger("change");
            $scope.txtRRNumber = "";
            $("#ddlbookingParty").val(null).trigger("change");
            $("#ddlStatus").val(null).trigger("change");
            $scope.fillRateRequetRateview();

        }

        $scope.btnExcel = function () {

               var POL = $('#ddlPOL').val();
               var POD = $('#ddlPOD').val();
               var RRNumber = $scope.txtRRNumber;
               var BookingParty = $('#ddlbookingParty').val();
               var Status = $('#ddlStatus').val();
               var User = localStorage.getItem("UserName");
               var AgencyID = localStorage.getItem("AgencyID");

                   window.location.href = '@Url.Action("CreateRRExcel", "RRExcel")?POL=' + POL + "&RRNumber=" + RRNumber
                        + "&POD=" + POD + "&BookingParty=" + BookingParty + "&Status=" + Status + "&User=" + User + "&AgencyID=" + AgencyID;

        }


        $scope.btnSendEmailAlert = function () {

            $("#overlay").show();
            var Datavalue = {};
            Datavalue.ID = $scope.RegId;
            Datavalue.AgentId = localStorage.getItem("AgencyID");
            //Datavalue.To = $scope.txtTo;
            //Datavalue.CC = $scope.txtCC;
            //Datavalue.BCC = $scope.txtBCC;
            //Datavalue.Message = $scope.txtMessage;

            $http({
                method: 'POST',
                url: '/api/SendingEmailsApi/EmailsendingRateSheet/',
                data: JSON.stringify(Datavalue),
            }).then(function (result) {
                $timeout(function () {
                    if (result.data.length > 0) {
                        ShowPopup(result.data[0].AlertMessage);
                        $("#overlay").hide();
                    }
                });
                $("#overlay").hide();
            }, function (result) {
                if (result.status == 500) {
                    ShowPopup("Sorry no internet connectivity Application Error.");
                }
                else if (result.status == 404) {
                    ShowPopup("Sorry no internet connectivity page not found.");
                }
                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            }).catch(function (result) {
                ShowPopup('There has been an error: ' + result);
            });
        }



        $scope.FillExistingFreightTraiffCharges = function (idv) {
            var Datavalue = {};

            Datavalue.TraiffRegular = 135;
            Datavalue.ID = idv;
            Datavalue.PaymentModeID = 18;
            $http({
                method: 'POST',
                url: '/api/SalesApi/RRNotifyTariffExistingValues',
                data: JSON.stringify(Datavalue),
            }).then(function (result) {
                $timeout(function () {

                    $scope.DynamicGridFreight = result.data;
                });
            }, function (result) {

                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            });
        }

        $scope.FillExistingImportTraiffCharges = function () {

            var Datavalue = {};

            Datavalue.TraiffRegular = "138,136";
            Datavalue.ID = $scope.RegId;
            Datavalue.PaymentModeID = 18;
            $http({
                method: 'POST',
                url: '/api/SalesApi/RRNotifyTariffExistingValues',
                data: JSON.stringify(Datavalue),
            }).then(function (result) {
                $timeout(function () {
                    $scope.DynamicGridLocalImport = result.data;

                   
                });
            }, function (result) {

                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            });
        }


        $scope.FillExistingExportTraiffCharges = function () {
            var Datavalue = {};

            Datavalue.TraiffRegular = "138,136";
            Datavalue.ID = $scope.RegId;
            Datavalue.PaymentModeID = 19;
            $http({
                method: 'POST',
                url: '/api/SalesApi/RRNotifyTariffExistingValues',
                data: JSON.stringify(Datavalue),
            }).then(function (result) {
                $timeout(function () {

                    $scope.DynamicGridLocalExport = result.data;
                   
                });
            }, function (result) {

                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            });
        }


        $scope.FilRateSheetExsitingSlotAmount = function () {

            var Datavalue = {};
            Datavalue.RRID = $scope.RegId;
            $http({
                method: 'POST',
                url: '/api/SalesApi/RRExistNotifySlotAmt',
                data: JSON.stringify(Datavalue),
            }).then(function (result) {
                $timeout(function () {

                    $scope.DynamicGridChargeSlotAmount = result.data;
                    
                });
            }, function (result) {

                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            });
           
        }



        $scope.FillExistingCostImportTraiffCharges = function () {

            var Datavalue = {};

            Datavalue.TraiffRegular = 138;
            Datavalue.ID = $scope.RegId;
            Datavalue.PaymentModeID = 18;
            $http({
                method: 'POST',
                url: '/api/SalesApi/RRNotifyCostTariffExistingValues',
                data: JSON.stringify(Datavalue),
            }).then(function (result) {
                $timeout(function () {
                    $scope.DynamicGridCostLocalImport = result.data;


                });
            }, function (result) {

                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            });
        }


        $scope.FillExistingCostExportTraiffCharges = function () {
            var Datavalue = {};

            Datavalue.TraiffRegular = 136;
            Datavalue.ID = $scope.RegId;
            Datavalue.PaymentModeID = 19;
            $http({
                method: 'POST',
                url: '/api/SalesApi/RRNotifyCostTariffExistingValues',
                data: JSON.stringify(Datavalue),
            }).then(function (result) {
                $timeout(function () {

                    $scope.DynamicGridCostLocalExport = result.data;

                });
            }, function (result) {

                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            });
        }


        $scope.FillExistingCostRevenuTotal = function () {
            var Datavalue = {};
            Datavalue.ID = $scope.RegId;
            $http({
                method: 'POST',
                url: '/api/SalesApi/RRExistNotifyCostRevenuTotalAmt',
                data: JSON.stringify(Datavalue),
            }).then(function (result) {
                $timeout(function () {

                   
                    $scope.FreightExRate = result.data[0].ExRate;
                    $scope.FreightUSDAmt = result.data[0].CustomerRate;

                    $scope.POLChargeExRate = result.data[1].ExRate;
                    $scope.POLChargeUSDAmt = result.data[1].CustomerRate;

                    $scope.PODChargeExRate = result.data[2].ExRate;
                    $scope.PODChargeUSDAmt = result.data[2].CustomerRate;

                    $scope.SlotChargeExRate = result.data[3].ExRate;
                    $scope.SlotChargeUSDAmt = result.data[3].CustomerRate;

                    $scope.POLCostExRate = result.data[4].ExRate;
                    $scope.POLCostUSDAmt = result.data[4].CustomerRate;

                    $scope.PODCostExRate = result.data[5].ExRate;
                    $scope.PODCostUSDAmt = result.data[5].CustomerRate;

                    $scope.RevenueAmt = (parseFloat(result.data[0].CustomerRate) +
                        parseFloat(result.data[1].CustomerRate) + parseFloat(result.data[2].CustomerRate)).toFixed(3);
                    $scope.CostAmt = (parseFloat(result.data[3].CustomerRate) +
                        parseFloat(result.data[4].CustomerRate) + parseFloat(result.data[5].CustomerRate)).toFixed(3);
                    $scope.ProfitAmt = (parseFloat($scope.RevenueAmt) - parseFloat($scope.CostAmt)).toFixed(3);

                });
            }, function (result) {

                if (result.status > 0) {
                    var errorMsg = result.status + ': ' + result.data;
                    ShowPopup("Sorry no internet connectivity detected.Please reconnect and try  again.");
                }
            });
        }
        



    });
    function ShowPopup(message) {
        swal(message);
    };


</script>
<style>
    .modal-dialog {
        max-width: 550px;
    }

    .modal-body .form-group {
        margin-bottom: 0 !important;
        padding-bottom: 0;
    }

    .modal-dialog .modal-header {
        background-color: #057ba7;
    }

        .modal-dialog .modal-header .modal-title {
            line-height: 0.5;
            padding-bottom: 12px;
            color: #fff;
        }

    .modal-body label {
        color: #3e3d3d !important;
        font-weight: bold !important;
        margin-bottom: 0;
        padding-bottom: 0;
        text-transform: uppercase;
    }

    .modal .modal-header .close {
        color: #fff;
    }

    .modal-dialog .modal-body {
        padding: 10px 24px 16px;
    }

    .card .card-body .form-group {
        margin: 0px 0 0;
    }
</style>
<div ng-app="MyApp" ng-controller="MyController">
    <div class="row">

    </div>
    <div class="row">
        <div class="col-md-9">
            <div class="card">
                <div class="card-header card-header-primary card-header-icon">
                    <div class="card-icon">
                        RR Notifications
                    </div>
                </div>

                <div class="card-body">
                    <div class="toolbar">
                    </div>
                    <div class="modal fade" id="demoModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content" style="overflow:scroll;height:850px;width:850px;">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                    <h4 class="modal-title" id="myModalLabel">RR Notification Status</h4>
                                </div>

                                <div class="modal-body">

                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="nav-tabs-navigation">
                                                <div class="nav-tabs-wrapper">
                                                    <div class="row">
                                                        <div class="col-md-6 offset-3 padlr0">
                                                            <ul class="nav nav-tabs demtab" data-tabs="tabs">
                                                                <li class="nav-item">
                                                                    <a class="nav-link active" href="#summary" id="User" data-toggle="tab">
                                                                        RR Summary
                                                                        <div class="ripple-container"></div>
                                                                    </a>
                                                                </li>
                                                                <li class="nav-item">
                                                                    <a class="nav-link" href="#visiblity" id="Role" data-toggle="tab">
                                                                        P & L Visibility
                                                                        <div class="ripple-container"></div>
                                                                    </a>
                                                                </li>

                                                            </ul>
                                                        </div>

                                                    </div>

                                                </div>
                                            </div>


                                            <div class="tab-content" style="padding:0;">
                                                <div class="tab-pane active" id="summary">
                                                    <div class="row">
                                                        <div class="col-md-12" style="border-bottom: 1px dashed #ccc; margin-bottom:3px;">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-md-4">
                                                                        <label>Booking/RR Number</label>

                                                                    </div>
                                                                    <div class="col-md-1">:</div>
                                                                    <div class="col-md-5">
                                                                        <span ng-bind="RRNO"></span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12" style="border-bottom: 1px dashed #ccc; margin-bottom:3px;">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-md-4">
                                                                        <label>Booking Party</label>

                                                                    </div>
                                                                    <div class="col-md-1">:</div>
                                                                    <div class="col-md-5">
                                                                        <span ng-bind="BookingParty"></span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12" style="border-bottom: 1px dashed #ccc;margin-bottom:3px;">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-md-4">
                                                                        <label>POR</label>

                                                                    </div>
                                                                    <div class="col-md-1">:</div>
                                                                    <div class="col-md-5">
                                                                        <span ng-bind="POR"></span>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>
                                                        <div class="col-md-12" style="border-bottom: 1px dashed #ccc;margin-bottom:3px;">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-md-4">
                                                                        <label>POL</label>

                                                                    </div>
                                                                    <div class="col-md-1">:</div>
                                                                    <div class="col-md-5">
                                                                        <span ng-bind="POL"></span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12" style="border-bottom: 1px dashed #ccc;margin-bottom:3px;">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-md-4">
                                                                        <label>POD</label>

                                                                    </div>
                                                                    <div class="col-md-1">:</div>
                                                                    <div class="col-md-5">
                                                                        <span ng-bind="POD"></span>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>

                                                        <div class="col-md-12" style="border-bottom: 1px dashed #ccc;margin-bottom:3px;">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-md-4">
                                                                        <label>T/S PORT</label>

                                                                    </div>
                                                                    <div class="col-md-1">:</div>
                                                                    <div class="col-md-5">
                                                                        <span ng-bind="TSPort"></span>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>

                                                        <div class="col-md-12" style="border-bottom: 1px dashed #ccc;margin-bottom:3px;">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-md-4">
                                                                        <label>FINAL POD</label>

                                                                    </div>
                                                                    <div class="col-md-1">:</div>
                                                                    <div class="col-md-5">
                                                                        <span ng-bind="FPOD"></span>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>

                                                        <div class="col-md-12" style="border-bottom: 1px dashed #ccc;margin-bottom:3px;">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-md-4">
                                                                        <label>CARGO</label>

                                                                    </div>
                                                                    <div class="col-md-1">:</div>
                                                                    <div class="col-md-5">
                                                                        <span ng-bind="RRNoteCargo"></span>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>


                                                        <div class="col-md-12" style="border-bottom: 1px dashed #ccc;margin-bottom:3px;">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-md-4">
                                                                        <label>Collection Mode</label>

                                                                    </div>
                                                                    <div class="col-md-1">:</div>
                                                                    <div class="col-md-5">
                                                                        <span ng-bind="CollectionMode"></span>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>


                                                        @*<div class="col-md-12" style="border-bottom: 1px dashed #ccc;margin-bottom:3px;">
            <div class="form-group">
                <div class="row">
                    <div class="col-md-4">
                        <label>Free Days</label>

                    </div>
                    <div class="col-md-1">:</div>
                    <div class="col-md-5">
                        <span ng-bind="FreeDays"></span>
                    </div>
                </div>

            </div>
        </div>*@

                                                        <div class="col-md-12" style="border-bottom: 1px dashed #ccc;margin-bottom:3px;">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-md-4">
                                                                        <label>Sales Mode</label>

                                                                    </div>
                                                                    <div class="col-md-1">:</div>
                                                                    <div class="col-md-5">
                                                                        <span ng-bind="SalesMode"></span>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>

                                                        <div class="col-md-12" style="border-bottom: 1px dashed #ccc;margin-bottom:3px;">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-md-4">
                                                                        <label>Validity</label>

                                                                    </div>
                                                                    <div class="col-md-1">:</div>
                                                                    <div class="col-md-5">
                                                                        <span ng-bind="Validity"></span>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>

                                                        <div class="col-md-12" style="border-bottom: 1px dashed #ccc;margin-bottom:3px;">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-md-4">
                                                                        <label>Status</label>

                                                                    </div>
                                                                    <div class="col-md-1">:</div>
                                                                    <div class="col-md-5">
                                                                        <span ng-bind="Status"></span>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>
                                                        <div class="col-md-12 padlr0" style="border-bottom: 1px dashed #ccc;margin-bottom:3px;">
                                                            <div class="material-datatables">
                                                                <table class="table table-striped table-no-bordered table-hover">
                                                                    <thead>
                                                                        <tr>

                                                                            <td>Mode</td>
                                                                            <td>ExpFreeDays</td>
                                                                            <td>ImpFreeDays</td>


                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <tr ng-repeat="k in RRModeList">
                                                                            <td>{{k.Mode}}</td>
                                                                            <td>{{k.ExpFreeDays}}</td>
                                                                            <td>{{k.ImpFreeDays}}</td>

                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12 padlr0" style="border-bottom: 1px dashed #ccc;margin-bottom:3px;">
                                                            <div class="material-datatables">
                                                                <table class="table table-striped table-no-bordered table-hover">
                                                                    <thead>
                                                                        <tr>

                                                                            <td>Size Type</td>
                                                                            <td>Commodity</td>
                                                                            <td>Cargo</td>
                                                                            <td>FRT</td>
                                                                            <td>BAF</td>
                                                                            <td>DGS</td>
                                                                            <td>ECRS</td>
                                                                            <td>CAF</td>
                                                                            <td>EWRS</td>
                                                                            <td>LSS</td>

                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <tr ng-repeat="k in RRmanifestrateschargewise">
                                                                            <td>{{k.Size}}</td>
                                                                            <td>{{k.Commodity}}</td>
                                                                            <td>{{k.Cargo}}</td>
                                                                            <td>{{k.FRT}}  {{k.FRTCurr}}        </td>
                                                                            <td>{{k.BAF}}  {{k.BAFCurr}}       </td>
                                                                            <td>{{k.DGS}}    {{k.DGSCurr}}     </td>
                                                                            <td>{{k.ECRS}}   {{k.ECRSCurr}}     </td>
                                                                            <td>{{k.CAF}}    {{k.CAFCurr}}      </td>
                                                                            <td>{{k.EWRS}}   {{k.EWRSCurr}}    </td>
                                                                            <td>{{k.LSS}}    {{k.LSSCurr}}    </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </div>

                                                        <div class="col-md-12 padlr0" style="border-bottom: 1px dashed #ccc;margin-bottom:3px;">
                                                            <div class="material-datatables">
                                                                <table class="table table-striped table-no-bordered table-hover" style="margin-bottom:3px;">
                                                                    <thead>
                                                                        <tr>
                                                                            <th>Size Type</th>
                                                                            <th>LOAD PORT THC</th>
                                                                            <td>DEST.THC</td>
                                                                            <td>EXPORT IHC</td>
                                                                            <td>IMPORT IHC</td>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <tr ng-repeat="k in Ratesheetthcihc">
                                                                            <td>{{k.Size}}</td>
                                                                            <td>{{k.LoadTHCRate}} {{k.Curr1}}</td>
                                                                            <td>{{k.DestTHCRate}} {{k.Curr4}}</td>
                                                                            <td>{{k.ExportIHCRate}} {{k.Curr3}}</td>
                                                                            <td>{{k.ImportIHCRate}} {{k.Curr2}}</td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </div>



                                                        <div class="col-md-12 padlr0" style="border-bottom: 1px dashed #ccc;margin-bottom:3px;">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="col-md-12">
                                                                        <textarea type="text" id="txtNotes" ng-model="txtNotes" placeholder="COMMENTS" rows="3" style="width:100%;"></textarea>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>


                                                        <div class="col-md-12 padlr0" style="border-bottom: 1px dashed #ccc;margin-bottom:3px;">

                                                            <div class="material-datatables">
                                                                <table class="table table-striped table-no-bordered table-hover">
                                                                    <thead>
                                                                        <tr>
                                                                            <td></td>
                                                                            <th>Slot Operator</th>
                                                                            <th>Slot Terms</th>
                                                                            <th>Slot 20</th>
                                                                            <th>Slot 40</th>
                                                                        </tr>
                                                                    </thead>

                                                                    <tbody>

                                                                        <tr ng-repeat="gRow in DynamicGridSlotAmount">
                                                                            <td>{{$index+1}}</td>
                                                                            <td>{{gRow.SlotOperator}}</td>
                                                                            <td>{{gRow.SlotTerms}}</td>
                                                                            <td>{{gRow.SlotAmt20}}</td>
                                                                            <td>{{gRow.SlotAmt40}}</td>
                                                                        </tr>

                                                                    </tbody>
                                                                </table>

                                                            </div>

                                                        </div>

                                                    </div>
                                                    @*<div class="row">
                <div class="col-md-12" style="text-align:center;">
                    <button type="submit" id="btnPrint" name="btnprint" ng-click="btnPrint();" value="PDF" class="btn btn-fill btn-info btntop">

                        Preview
                    </button>
                    <button type="submit" ng-show="BtnApproval" ng-click="ApprovalsSave();" class="btn btn-fill btn-success btntop">
                        <i class="material-icons">task_alt</i>
                        Approval
                    </button>
                    <button type="submit" ng-show="BtnReject" ng-click="RejectSave();" class="btn btn-fill btn-danger btntop">
                        <i class="material-icons">clear</i>
                        Reject
                    </button>
                    <button type="submit" ng-show="BtnReQuote" ng-click="ReQuoteSave();" class="btn btn-fill btn-warning btntop">
                        <i class="material-icons">autorenew</i>
                        Re-Quote
                    </button>
                </div>
                <input type="hidden" id="RegId" ng-model="RegId" />

            </div>*@
                                                </div>
                                                <div class="tab-pane" id="visiblity">
                                                    <div class="nav-tabs-navigation">
                                                        <div class="nav-tabs-wrapper">
                                                            <div class="row">
                                                                <div class="col-md-3 offset-4 padlr0">
                                                                    <ul class="nav nav-tabs demtab ratetab" data-tabs="tabs">
                                                                        <li class="nav-item">
                                                                            <a class="nav-link active" href="#Rate" id="User" data-toggle="tab">
                                                                                Rate
                                                                                <div class="ripple-container"></div>
                                                                            </a>
                                                                        </li>

                                                                        <li class="nav-item">
                                                                            <a class="nav-link" href="#Cost" id="Role" data-toggle="tab">
                                                                                Cost
                                                                                <div class="ripple-container"></div>
                                                                            </a>
                                                                        </li>

                                                                    </ul>
                                                                </div>

                                                            </div>

                                                        </div>
                                                    </div>


                                                    <div class="tab-content" style="padding:0;">
                                                        <div class="tab-pane active" id="Rate">


                                                            <div class="row">
                                                                <div class="col-md-8" style="border: 1px solid #ccc; background-color: #eeeeee59; border-top: 5px solid #ebc354; ">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>Freight Charges</label>
                                                                        </div>

                                                                    </div>


                                                                </div>

                                                                <div class="col-md-2" style="border: 1px solid #ccc; background-color:#eeeeee59; border-top: 5px solid #ebc354; ">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>
                                                                                ExRate :
                                                                                <span style="color:red; font-size:15px" ng-bind="FreightExRate"></span>
                                                                            </label>
                                                                        </div>

                                                                    </div>


                                                                </div>
                                                                <div class="col-md-2" style="border: 1px solid #ccc; background-color:#eeeeee59; border-top: 5px solid #ebc354; ">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>USD :</label>
                                                                            <span style="color:red; font-size:15px" ng-bind="FreightUSDAmt"></span>
                                                                        </div>
                                                                    </div>

                                                                </div>

                                                                <div class="col-md-12">
                                                                    <div class="material-datatables">
                                                                        <table class="table table-striped">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>SNo</th>
                                                                                    <th>Charges</th>
                                                                                    <th>Currency</th>
                                                                                    <th>CntrType</th>
                                                                                    <th>Mode</th>
                                                                                    <th>Amount</th>
                                                                                </tr>
                                                                            </thead>

                                                                            <tbody>
                                                                                <tr ng-repeat="gRow in DynamicGridFreight">
                                                                                    <td>{{$index+1}}</td>
                                                                                    <td>{{gRow.ChargeCode}}</td>
                                                                                    <td>{{gRow.Currency}}</td>
                                                                                    <td>{{gRow.CntrTypes}}</td>
                                                                                    <td>{{gRow.PaymentMode}}</td>
                                                                                    <td style="text-align:right!important;">{{gRow.CustomerRate}}</td>

                                                                                </tr>
                                                                            </tbody>
                                                                        </table>

                                                                    </div>
                                                                </div>

                                                            </div>

                                                            <div class="row">
                                                                <div class="col-md-8" style="border: 1px solid #ccc; background-color: #eeeeee59; border-top: 5px solid #ebc354; ">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>POL Charges</label>
                                                                        </div>

                                                                    </div>


                                                                </div>

                                                                <div class="col-md-2" style="border: 1px solid #ccc; background-color:#eeeeee59; border-top: 5px solid #ebc354; ">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>ExRate :</label>
                                                                            <span style="color:red; font-size:15px" ng-bind="POLChargeExRate"></span>

                                                                        </div>

                                                                    </div>


                                                                </div>
                                                                <div class="col-md-2" style="border: 1px solid #ccc; background-color:#eeeeee59; border-top: 5px solid #ebc354; ">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>USD</label>
                                                                            <span style="color:red; font-size:15px" ng-bind="POLChargeUSDAmt"></span>
                                                                        </div>

                                                                    </div>


                                                                </div>

                                                                <div class="col-md-12">
                                                                    <div class="material-datatables">
                                                                        <table class="table table-striped">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>S.No</th>
                                                                                    <th>Charges</th>
                                                                                    <th>Currency</th>
                                                                                    <th>CntrType</th>
                                                                                    <th>Mode</th>
                                                                                    <th>Amount</th>
                                                                                </tr>
                                                                            </thead>

                                                                            <tbody>
                                                                                <tr ng-repeat="gRow in DynamicGridLocalImport">
                                                                                    <td>{{$index+1}}</td>
                                                                                    <td>{{gRow.ChargeCode}}</td>
                                                                                    <td>{{gRow.Currency}}</td>
                                                                                    <td>{{gRow.CntrTypes}}</td>
                                                                                    <td>{{gRow.PaymentMode}}</td>
                                                                                    <td style="text-align:right!important;">{{gRow.CustomerRate}}</td>

                                                                                </tr>
                                                                            </tbody>
                                                                        </table>

                                                                    </div>
                                                                </div>

                                                            </div>

                                                            <div class="row">
                                                                <div class="col-md-8" style="border: 1px solid #ccc; background-color: #eeeeee59; border-top: 5px solid #ebc354; ">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>POD Charges</label>
                                                                        </div>

                                                                    </div>


                                                                </div>

                                                                <div class="col-md-2" style="border: 1px solid #ccc; background-color:#eeeeee59; border-top: 5px solid #ebc354; ">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>ExRate</label>
                                                                            <span style="color:red; font-size:15px" ng-bind="PODChargeExRate"></span>
                                                                        </div>

                                                                    </div>


                                                                </div>
                                                                <div class="col-md-2" style="border: 1px solid #ccc; background-color:#eeeeee59; border-top: 5px solid #ebc354; ">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>USD</label>
                                                                            <span style="color:red; font-size:15px" ng-bind="PODChargeUSDAmt"></span>
                                                                        </div>

                                                                    </div>


                                                                </div>

                                                                <div class="col-md-12">
                                                                    <div class="material-datatables">
                                                                        <table class="table table-striped">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>S.No</th>
                                                                                    <th>Charges</th>
                                                                                    <th>Currency</th>
                                                                                    <th>CntrType</th>
                                                                                    <th>Mode</th>
                                                                                    <th>Amount</th>
                                                                                </tr>
                                                                            </thead>

                                                                            <tbody>
                                                                                <tr ng-repeat="gRow in DynamicGridLocalExport">
                                                                                    <td>{{$index+1}}</td>
                                                                                    <td>{{gRow.ChargeCode}}</td>
                                                                                    <td>{{gRow.Currency}}</td>
                                                                                    <td>{{gRow.CntrTypes}}</td>
                                                                                    <td>{{gRow.PaymentMode}}</td>
                                                                                    <td style="text-align:right!important;">{{gRow.CustomerRate}}</td>

                                                                                </tr>
                                                                            </tbody>
                                                                        </table>

                                                                    </div>
                                                                </div>

                                                            </div>

                                                        </div>
                                                        <div class="tab-pane" id="Cost">

                                                            <div class="row">
                                                                <div class="col-md-8" style="border: 1px solid #ccc; background-color: #eeeeee59; border-top: 5px solid #ebc354; ">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>Slot Cost</label>
                                                                        </div>

                                                                    </div>


                                                                </div>

                                                                <div class="col-md-2" style="border: 1px solid #ccc; background-color:#eeeeee59; border-top: 5px solid #ebc354; ">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>ExRate :</label>
                                                                            <span style="color:red; font-size:15px" ng-bind="SlotChargeExRate"></span>
                                                                        </div>



                                                                    </div>


                                                                </div>
                                                                <div class="col-md-2" style="border: 1px solid #ccc; background-color:#eeeeee59; border-top: 5px solid #ebc354; ">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>USD :</label>
                                                                            <span style="color:red; font-size:15px" ng-bind="SlotChargeUSDAmt"></span>
                                                                        </div>

                                                                    </div>

                                                                </div>

                                                                <div class="col-md-12">
                                                                    <div class="material-datatables">
                                                                        <table class="table table-striped">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>S.No</th>
                                                                                    <th>Charges</th>
                                                                                    <th>Currency</th>
                                                                                    <th>Slot Operator</th>
                                                                                    <th>Slot Terms</th>
                                                                                    <th>20-Amt</th>
                                                                                    <th>40-Amt</th>

                                                                                </tr>
                                                                            </thead>

                                                                            <tbody>
                                                                                <tr ng-repeat="gRow in DynamicGridChargeSlotAmount">
                                                                                    <td>{{$index+1}}</td>
                                                                                    <td>{{gRow.ChargeCode}}</td>
                                                                                    <td>{{gRow.Currency}}</td>
                                                                                    <td>{{gRow.SlotOperator}}</td>
                                                                                    <td>{{gRow.SlotTerms}}</td>
                                                                                    <td>{{gRow.SlotAmt20}}</td>
                                                                                    <td>{{gRow.SlotAmt40}}</td>

                                                                                </tr>
                                                                            </tbody>
                                                                        </table>

                                                                    </div>
                                                                </div>

                                                            </div>

                                                            <div class="row">
                                                                <div class="col-md-8" style="border: 1px solid #ccc; background-color: #eeeeee59; border-top: 5px solid #ebc354; ">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>POL Cost</label>
                                                                        </div>

                                                                    </div>


                                                                </div>

                                                                <div class="col-md-2" style="border: 1px solid #ccc; background-color:#eeeeee59; border-top: 5px solid #ebc354; ">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>ExRate:</label>
                                                                            <span style="color:red; font-size:15px" ng-bind="POLCostExRate"></span>
                                                                        </div>

                                                                    </div>


                                                                </div>
                                                                <div class="col-md-2" style="border: 1px solid #ccc; background-color:#eeeeee59; border-top: 5px solid #ebc354; ">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>USD:</label>
                                                                            <span style="color:red; font-size:15px" ng-bind="POLCostUSDAmt"></span>
                                                                        </div>

                                                                    </div>


                                                                </div>

                                                                <div class="col-md-12">
                                                                    <div class="material-datatables">
                                                                        <table class="table table-striped">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>S.No</th>
                                                                                    <th>Charges</th>
                                                                                    <th>Currency</th>
                                                                                    <th>CntrType</th>
                                                                                    <th>Mode</th>
                                                                                    <th>Amount</th>
                                                                                </tr>
                                                                            </thead>

                                                                            <tbody>
                                                                                <tr ng-repeat="gRow in DynamicGridCostLocalImport">
                                                                                    <td>{{$index+1}}</td>
                                                                                    <td>{{gRow.ChargeCode}}</td>
                                                                                    <td>{{gRow.Currency}}</td>
                                                                                    <td>{{gRow.CntrTypes}}</td>
                                                                                    <td>{{gRow.PaymentMode}}</td>
                                                                                    <td style="text-align:right;">{{gRow.CustomerRate}}</td>

                                                                                </tr>


                                                                            </tbody>
                                                                        </table>

                                                                    </div>
                                                                </div>

                                                            </div>

                                                            <div class="row">
                                                                <div class="col-md-8" style="border: 1px solid #ccc; background-color: #eeeeee59; border-top: 5px solid #ebc354; ">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>POD Cost</label>
                                                                        </div>

                                                                    </div>


                                                                </div>

                                                                <div class="col-md-2" style="border: 1px solid #ccc; background-color:#eeeeee59; border-top: 5px solid #ebc354; ">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>ExRate:</label>
                                                                            <span style="color:red; font-size:15px" ng-bind="PODCostExRate"></span>
                                                                        </div>

                                                                    </div>


                                                                </div>
                                                                <div class="col-md-2" style="border: 1px solid #ccc; background-color:#eeeeee59; border-top: 5px solid #ebc354; ">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>USD:</label>
                                                                            <span style="color:red; font-size:15px" ng-bind="PODCostUSDAmt"></span>
                                                                        </div>


                                                                    </div>


                                                                </div>

                                                                <div class="col-md-12">
                                                                    <div class="material-datatables">
                                                                        <table class="table table-striped">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>S.No</th>
                                                                                    <th>Charges</th>
                                                                                    <th>Currency</th>
                                                                                    <th>CntrType</th>
                                                                                    <th>Mode</th>
                                                                                    <th>Amount</th>
                                                                                </tr>
                                                                            </thead>

                                                                            <tbody>
                                                                                <tr ng-repeat="gRow in DynamicGridCostLocalExport">
                                                                                    <td>{{$index+1}}</td>
                                                                                    <td>{{gRow.ChargeCode}}</td>
                                                                                    <td>{{gRow.Currency}}</td>
                                                                                    <td>{{gRow.CntrTypes}}</td>
                                                                                    <td>{{gRow.PaymentMode}}</td>
                                                                                    <td style="text-align:right!important;">{{gRow.CustomerRate}}</td>

                                                                                </tr>
                                                                            </tbody>
                                                                        </table>

                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>

                                                        <div class="col-md-12">
                                                            <div class="row">
                                                                <div class="col-md-4" style="border: 1px solid #ccc; border-top: 5px solid #ebc354; ">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>Revenue : </label><br />
                                                                            <span style="color:red; font-size:20px" ng-bind="RevenueAmt"></span>
                                                                        </div>

                                                                    </div>


                                                                </div>

                                                                <div class="col-md-4" style="border: 1px solid #ccc; background-color: #eeeeee59; border-top: 5px solid #ebc354; ">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>Cost : </label><br />
                                                                            <span style="color:red; font-size:20px" ng-bind="CostAmt"></span>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <div class="col-md-4" style="border: 1px solid #ccc; background-color: #eeeeee59; border-top: 5px solid #ebc354; ">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <label>Profit : </label><br />
                                                                            <span style="color:red; font-size:20px" ng-bind="ProfitAmt"></span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-md-12" style="text-align:center;">
                                                        <button type="submit" id="btnPrint" name="btnprint" ng-click="btnPrint();" value="PDF" class="btn btn-fill btn-info btntop">

                                                            Preview
                                                        </button>
                                                        <button type="submit" ng-show="BtnApproval" ng-click="ApprovalsSave();" class="btn btn-fill btn-success btntop">
                                                            <i class="material-icons">task_alt</i>
                                                            Approval
                                                        </button>
                                                        <button type="submit" ng-show="BtnReject" ng-click="RejectSave();" class="btn btn-fill btn-danger btntop">
                                                            <i class="material-icons">clear</i>
                                                            Reject
                                                        </button>
                                                        <button type="submit" ng-show="BtnReQuote" ng-click="ReQuoteSave();" class="btn btn-fill btn-warning btntop">
                                                            <i class="material-icons">autorenew</i>
                                                            Re-Quote
                                                        </button>
                                                    </div>
                                                    <input type="hidden" id="RegId" ng-model="RegId" />

                                                </div>
                                            </div>



                                        </div>
                                    </div>




                                </div>

                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-3 col-md-3 col-sm-6">
                            <div class="card bg-gradient-info card-img-holder text-white">
                                <div class="card-body">
                                    <img src="https://www.bootstrapdash.com/demo/purple-admin-free/assets/images/dashboard/circle.svg" class="card-img-absolute" alt="circle-image">
                                    <h4 class="font-weight-normal">
                                        Pending
                                    </h4>
                                    <div class="row">
                                        <div class="col-md-6"><h2><span ng-bind="Pending"></span></h2></div>
                                        <div class="col-md-6"><h2><i class="material-icons">file_copy</i></h2></div>

                                    </div>
                                    <div class="col-md-12 viewdiv">
                                        <a style="cursor: pointer!important;">
                                            <div class="row">
                                                <div class="col-md-8 padlr0"><h5 ng-click="PendingView();">View Details</h5></div>
                                                <div class="col-md-4"><i class="fa fa-arrow-right"></i></div>
                                            </div>
                                        </a>

                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-6">
                            <div class="card bg-gradient-success card-img-holder text-white">
                                <div class="card-body">
                                    <img src="https://www.bootstrapdash.com/demo/purple-admin-free/assets/images/dashboard/circle.svg" class="card-img-absolute" alt="circle-image">
                                    <h4 class="font-weight-normal">
                                        Approved
                                    </h4>
                                    <div class="row">
                                        <div class="col-md-6"><h2><span ng-bind="Approved"></span></h2></div>
                                        <div class="col-md-6"><h2><i class="material-icons">task_alt</i></h2></div>
                                    </div>
                                    <div class="col-md-12 viewdiv">
                                        <a style="cursor: pointer!important;">
                                            <div class="row">
                                                <div class="col-md-8 padlr0"><h5 ng-click="ApprovedView();">View Details</h5></div>
                                                <div class="col-md-4"><i class="fa fa-arrow-right"></i></div>
                                            </div>
                                        </a>

                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-6">
                            <div class="card bg-gradient-danger card-img-holder text-white">
                                <div class="card-body">
                                    <img src="https://www.bootstrapdash.com/demo/purple-admin-free/assets/images/dashboard/circle.svg" class="card-img-absolute" alt="circle-image">
                                    <h4 class="font-weight-normal">
                                        Requoted
                                    </h4>
                                    <div class="row">
                                        <div class="col-md-6"><h2><span ng-bind="REQuote"></span></h2></div>
                                        <div class="col-md-6"><h2><i class="material-icons">restore_page</i></h2></div>
                                    </div>
                                    <div class="col-md-12 viewdiv">
                                        <a style="cursor: pointer!important;">
                                            <div class="row">
                                                <div class="col-md-8 padlr0"><h5 ng-click="RequotedView();">View Details</h5></div>
                                                <div class="col-md-4"><i class="fa fa-arrow-right"></i></div>
                                            </div>
                                        </a>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-3 col-sm-6">
                            <div class="card bg-gradient-warning card-img-holder text-white">
                                <div class="card-body">
                                    <img src="https://www.bootstrapdash.com/demo/purple-admin-free/assets/images/dashboard/circle.svg" class="card-img-absolute" alt="circle-image">
                                    <h4 class="font-weight-normal">
                                        Rejected
                                    </h4>
                                    <div class="row">
                                        <div class="col-md-6"><h2><span ng-bind="Rejected"></span></h2></div>
                                        <div class="col-md-6"><h2><i class="material-icons">clear</i></h2></div>
                                    </div>

                                    <div class="col-md-12 viewdiv">
                                        <a style="cursor: pointer!important;">
                                            <div class="row">
                                                <div class="col-md-8 padlr0"><h5 ng-click="RejectedView();">View Details</h5></div>
                                                <div class="col-md-4"><i class="fa fa-arrow-right"></i></div>
                                            </div>
                                        </a>

                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div id="buttonexcel" class="col-md-12 exceldownload" style="text-align:right;">
                                <a ng-click="btnExcel();">Download <i class="fa fa-file-excel-o"></i></a>
                            </div>
                        </div>
                        <div class="material-datatables" style="margin-top:20px;">

                            <table class="table table-striped table-no-bordered table-hover" cellspacing="0" width="100%" style="width:100%">
                                <thead>
                                    <tr>
                                        <th>S.No</th>
                                        <th>RR Number</th>
                                        <th>Date</th>
                                        <th>Booking Party</th>
                                        <th>POL</th>
                                        <th>POD</th>
                                        <th>Status</th>
                                        <th>Action</th>



                                    </tr>
                                </thead>

                                <tbody>
                                    <tr ng-repeat="i in RateRequetRateview | filter : paginate | orderBy:'-Statusv'">
                                        <td>{{numPerPage *(currentPage-1)+$index+1}}</td>

                                        <td><a href="#">{{i.RatesheetNo}}</a></td>
                                        <td>{{i.Date}}</td>
                                        <td>{{i.BookingParty}}</td>
                                        <td>{{i.PortofLoading}}</td>
                                        <td>{{i.PortofDischarge}}</td>
                                        <td>{{i.Status}}</td>

                                        <td class="td-actions text-right">

                                            <button type="button" ng-click="ShowWindow(i.ID);" rel="tooltip" class="btn btn-success btn-round" data-original-title="" title="">
                                                <i class="material-icons">edit</i>
                                            </button>

                                        </td>

                                    </tr>

                                </tbody>
                            </table>
                            <div id="notFoundDiv" ng-show="(RateRequetRateview|filter:RatesheetNo).length==0" style="color: red; font-weight: bold">No Records Found</div>
                        </div>
                    </div>

                </div>
                <div class="card-footer">
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-5">
                                <p>Showing <span style="padding-left:5px; padding-right:3px;">1</span>to<span style="padding-left:3px; padding-right:3px;">10</span>of<span style="padding-left:3px; padding-right:3px;">40</span>entries</p>
                            </div>
                            <div class="col-md-7" style="text-align:right;">
                                <pagination total-items="totalItems" ng-model="currentPage"
                                            max-size="10" boundary-links="true" items-per-page="numPerPage" class="pagination-sm">
                                </pagination>
                            </div>
                        </div>

                    </div>

                </div>
            </div>

        </div>
        <div class="col-md-3">
            <div class="card">
                <div class="card-body">
                    <div class="form-group">
                        <div class="col-md-12 padlr0">
                            <input type="text" id="txtRRNumber" ng-model="txtRRNumber" class="form-control" placeholder="RR Number">
                        </div>
                    </div>
                    <div class="form-group">
                        <select id="ddlPOL" ng-model="ddlPOL" class="form-control my-selectPOL" placeholder="POL" ng-options="item.PortName for item in PortAllvalues track by item.ID">
                            <option value="" disabled selected>POL</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <select id="ddlPOD" ng-model="ddlPOD" class="form-control my-selectPOD" placeholder="POD" ng-options="item.PortName for item in PortAllvalues track by item.ID">
                            <option value="" disabled selected>POD</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <select class="form-control my-selectBP" id="ddlbookingParty" ng-model="ddlbookingParty" ng-options="item.CustomerName for item in CustomerMasterAllvalues track by item.ID">

                            <option value="" disabled selected>Booking Party</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <select id="ddlStatus" ng-model="ddlStatus" class="form-control my-selectStatus" placeholder="Status" ng-options="item.Status for item in RRStatusValueAll track by item.ID">
                            <option value="" disabled selected>Status</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <div class="col-md-12 padlr0">
                            <button type="submit" ng-click="ClearRecords();" class="btn btn-fill btn-danger searchbtn">Clear</button>
                            <button type="submit" ng-click="fillRateRequetRateview();" class="btn btn-fill btn-rose searchbtn">Search</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

